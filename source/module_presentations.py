# -*- coding: utf-8 -*-
from header_common import *
from header_presentations import *
from header_mission_templates import *
from ID_meshes import *
from header_operations import *
from header_triggers import *
from module_constants import *
import string

####################################################################################################################
#  Each presentation record contains the following fields:
#  1) Presentation id: used for referencing presentations in other files. The prefix prsnt_ is automatically added before each presentation id.
#  2) Presentation flags. See header_presentations.py for a list of available flags
#  3) Presentation background mesh: See module_meshes.py for a list of available background meshes
#  4) Triggers: Simple triggers that are associated with the presentation
####################################################################################################################

presentations = [
	("game_start", prsntf_read_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, "$g_presentation_credits_obj_1", "@Anno Domini 1257", 2048),
			(str_store_string, 22, "str_revision"),
			(create_text_overlay, "$g_presentation_credits_obj_2", "@{s22}", 2048),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, "$g_presentation_credits_obj_1", 1),
			(overlay_set_size, "$g_presentation_credits_obj_2", 1),
			(overlay_set_color, "$g_presentation_credits_obj_1", 16777215),
			(overlay_set_color, "$g_presentation_credits_obj_2", 16777215),
			(position_set_x, 1, -300),
			(position_set_y, 1, 650),
			(overlay_set_position, "$g_presentation_credits_obj_1", 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 650),
			(overlay_animate_to_position, "$g_presentation_credits_obj_1", 600, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_credits_obj_2", 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 600),
			(overlay_animate_to_position, "$g_presentation_credits_obj_2", 600, 1)
		])
	]),

	("game_credits", prsntf_read_only, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(assign, "$g_presentation_credits_obj_1", -1),
			(assign, "$g_presentation_credits_obj_2", -1),
			(assign, "$g_presentation_credits_obj_3", -1),
			(assign, "$g_presentation_credits_obj_4", -1),
			(assign, "$g_presentation_credits_obj_5", -1),
			(assign, "$g_presentation_credits_obj_6", -1),
			(assign, "$g_presentation_credits_obj_7", -1),
			(assign, "$g_presentation_credits_obj_8", -1),
			(assign, "$g_presentation_credits_obj_9", -1),
			(assign, "$g_presentation_credits_obj_10", -1),
			(assign, "$g_presentation_credits_obj_11", -1),
			(assign, "$g_presentation_credits_obj_12", -1),
			(assign, "$g_presentation_credits_obj_1_alpha", 0),
			(assign, "$g_presentation_credits_obj_2_alpha", 0),
			(assign, "$g_presentation_credits_obj_3_alpha", 0),
			(assign, "$g_presentation_credits_obj_4_alpha", 0),
			(assign, "$g_presentation_credits_obj_5_alpha", 0),
			(assign, "$g_presentation_credits_obj_6_alpha", 0),
			(assign, "$g_presentation_credits_obj_7_alpha", 0),
			(assign, "$g_presentation_credits_obj_8_alpha", 0),
			(assign, "$g_presentation_credits_obj_9_alpha", 0)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 1000000),
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 224),
				(this_or_next|key_clicked, 225),
				(this_or_next|key_clicked, 252),
				(key_clicked, 253),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(lt, "$g_presentation_credits_obj_1", 0),
				(str_store_string, 1, "str_credits_1"),
				(create_text_overlay, "$g_presentation_credits_obj_1", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_1", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_1", 0),
				(position_set_x, 1, 1500),
				(position_set_y, 1, 1500),
				(overlay_set_size, "$g_presentation_credits_obj_1", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_1", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 2000),
				(eq, "$g_presentation_credits_obj_1_alpha", 0),
				(assign, "$g_presentation_credits_obj_1_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 3500),
				(lt, "$g_presentation_credits_obj_2", 0),
				(str_store_string, 1, "str_credits_2"),
				(create_text_overlay, "$g_presentation_credits_obj_2", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_2", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_2", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_2", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_2", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 5500),
				(eq, "$g_presentation_credits_obj_2_alpha", 0),
				(assign, "$g_presentation_credits_obj_2_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 7000),
				(lt, "$g_presentation_credits_obj_3", 0),
				(str_store_string, 1, "str_credits_3"),
				(create_text_overlay, "$g_presentation_credits_obj_3", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_3", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_3", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_3", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_3", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 9000),
				(eq, "$g_presentation_credits_obj_3_alpha", 0),
				(assign, "$g_presentation_credits_obj_3_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 10500),
				(lt, "$g_presentation_credits_obj_4", 0),
				(str_store_string, 1, "str_credits_4"),
				(create_text_overlay, "$g_presentation_credits_obj_4", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_4", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_4", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_4", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_4", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 12500),
				(eq, "$g_presentation_credits_obj_4_alpha", 0),
				(assign, "$g_presentation_credits_obj_4_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 14000),
				(lt, "$g_presentation_credits_obj_5", 0),
				(str_store_string, 1, "str_credits_5"),
				(create_text_overlay, "$g_presentation_credits_obj_5", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_5", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_5", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_5", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_5", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 16000),
				(eq, "$g_presentation_credits_obj_5_alpha", 0),
				(assign, "$g_presentation_credits_obj_5_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 17500),
				(lt, "$g_presentation_credits_obj_6", 0),
				(str_store_string, 1, "str_credits_6"),
				(create_text_overlay, "$g_presentation_credits_obj_6", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_6", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_6", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_6", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_6", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 19500),
				(eq, "$g_presentation_credits_obj_6_alpha", 0),
				(assign, "$g_presentation_credits_obj_6_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 21000),
				(lt, "$g_presentation_credits_obj_7", 0),
				(str_store_string, 1, "str_credits_7"),
				(create_text_overlay, "$g_presentation_credits_obj_7", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_7", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_7", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_7", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_7", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_7", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 23000),
				(eq, "$g_presentation_credits_obj_7_alpha", 0),
				(assign, "$g_presentation_credits_obj_7_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_7", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 24500),
				(lt, "$g_presentation_credits_obj_8", 0),
				(str_store_string, 1, "str_credits_8"),
				(create_text_overlay, "$g_presentation_credits_obj_8", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_8", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_8", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_8", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_8", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_8", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 26500),
				(eq, "$g_presentation_credits_obj_8_alpha", 0),
				(assign, "$g_presentation_credits_obj_8_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_8", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 28000),
				(lt, "$g_presentation_credits_obj_9", 0),
				(str_store_string, 1, "str_credits_10"),
				(create_text_overlay, "$g_presentation_credits_obj_9", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_9", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_9", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_9", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 485),
				(overlay_set_position, "$g_presentation_credits_obj_9", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 255),
				(str_store_string, 1, "str_credits_11"),
				(create_text_overlay, "$g_presentation_credits_obj_10", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_10", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_10", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_10", 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 470),
				(overlay_set_position, "$g_presentation_credits_obj_10", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 255),
				(str_store_string, 1, "str_credits_12"),
				(create_text_overlay, "$g_presentation_credits_obj_11", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_11", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_11", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_11", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 105),
				(overlay_set_position, "$g_presentation_credits_obj_11", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 34000),
				(eq, "$g_presentation_credits_obj_9_alpha", 0),
				(assign, "$g_presentation_credits_obj_9_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 0),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 0),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 35500),
				(lt, "$g_presentation_credits_obj_12", 0),
				(str_store_string, 1, "str_credits_9"),
				(create_text_overlay, "$g_presentation_credits_obj_12", 1, 2064),
				(overlay_set_color, "$g_presentation_credits_obj_12", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_12", 255),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, "$g_presentation_credits_obj_12", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, -4800),
				(overlay_set_position, "$g_presentation_credits_obj_12", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 760),
				(overlay_animate_to_position, "$g_presentation_credits_obj_12", 70000, 1),
			(else_try),
				(gt, ":trigger_param_1", 105500),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_profile_banner_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_profile_banner_selection_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_button_overlay, "$g_presentation_obj_profile_banner_selection_1", "@Next Page", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_profile_banner_selection_1", 1),
			(create_button_overlay, "$g_presentation_obj_profile_banner_selection_2", "str_use_default_banner", 16),
			(position_set_x, 1, 300),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_profile_banner_selection_2", 1),
			(assign, ":value", 150),
			(assign, ":var_2", 575),
			(store_mul, ":value_2", 16, "$g_presentation_page_no"),
			(store_add, ":value_3", ":value_2", 16),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_profile_banner_selection_2", 1),
			(assign, ":var_5", 0),
			(try_for_range, ":mesh", "mesh_banner_a01", "mesh_banner_x21"),
				(assign, ":value_4", 0),
				(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction", slot_faction_banner, ":mesh"),
					(assign, ":value_4", 1),
				(try_end),
				(eq, ":value_4", 0),
				(val_add, ":var_5", 1),
				(gt, ":var_5", ":value_2"),
				(le, ":var_5", ":value_3"),
				(create_image_button_overlay, reg1, ":mesh", ":mesh"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(val_add, ":value", 100),
				(ge, ":value", 900),
				(assign, ":value", 150),
				(val_sub, ":var_2", 250),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_profile_banner_selection_1"),
				(val_add, "$g_presentation_page_no", 1),
				(val_mod, "$g_presentation_page_no", 28),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_profile_banner_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_profile_banner_selection_2"),
				(profile_set_banner_id, -1),
				(presentation_set_duration, 0),
			(else_try),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_banner_start"),
				(store_mul, ":value_2", 16, "$g_presentation_page_no"),
				(val_add, ":value", ":value_2"),
				(assign, ":var_4", 0),
				(assign, ":value_3", "mesh_banner_x21"),
				(try_for_range, ":mesh", "mesh_banner_a01", ":value_3"),
					(assign, ":value_4", 0),
					(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
						(faction_slot_eq, ":faction", slot_faction_banner, ":mesh"),
						(assign, ":value_4", 1),
					(try_end),
					(eq, ":value_4", 0),
					(try_begin),
						(eq, ":value", ":var_4"),
						(store_sub, ":value_5", ":mesh", "mesh_banner_a01"),
						(profile_set_banner_id, ":value_5"),
						(assign, ":value_3", 0),
					(try_end),
					(val_add, ":var_4", 1),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_custom_battle_designer", prsntf_manual_end_only, mesh_cb_ui_main, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg0, "str_player", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_enemy", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_character", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, 670),
			(overlay_set_position, reg0, 1),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_18"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_18", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 635),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_18", 1),
			(try_for_range, ":troop", "trp_quick_battle_troop_1", "trp_quick_battle_troops_end"),
				(str_store_troop_name, 0, ":troop"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_18", 0),
			(try_end),
			(store_sub, ":troop", "$g_quick_battle_troop", "trp_quick_battle_troop_1"),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_18", ":troop"),
			(store_mul, ":troop", "$g_quick_battle_troop", 2),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":troop"),
			(position_set_x, 1, 25),
			(position_set_y, 1, 370),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_1"),
				(assign, ":troop", "trp_teu_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_2"),
				(assign, ":troop", "trp_balt_noble_3"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_3"),
				(assign, ":troop", "trp_tatar_veteran_horse_archer"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_4"),
				(assign, ":troop", "trp_nordic_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_5"),
				(assign, ":troop", "trp_euro_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_6"),
				(assign, ":troop", "trp_euro_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_7"),
				(assign, ":troop", "trp_euro_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_8"),
				(assign, ":troop", "trp_rus_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_9"),
				(assign, ":troop", "trp_euro_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_10"),
				(assign, ":troop", "trp_euro_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_11"),
				(assign, ":troop", "trp_nordic_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_12"),
				(assign, ":troop", "trp_euro_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_13"),
				(assign, ":troop", "trp_gaelic_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_14"),
				(assign, ":troop", "trp_nordic_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_15"),
				(assign, ":troop", "trp_rus_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_16"),
				(assign, ":troop", "trp_iberian_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_17"),
				(assign, ":troop", "trp_iberian_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_18"),
				(assign, ":troop", "trp_iberian_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_20"),
				(assign, ":troop", "trp_andalus_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_papacy"),
				(assign, ":troop", "trp_iberian_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_22"),
				(assign, ":troop", "trp_byz_castle_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_23"),
				(assign, ":troop", "trp_templar_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_24"),
				(assign, ":troop", "trp_iberian_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_25"),
				(assign, ":troop", "trp_mamluke_elite_horse_archer"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_26"),
				(assign, ":troop", "trp_iberian_knight"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_27"),
				(assign, ":troop", "trp_tatar_heavy_lancer"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_28"),
				(assign, ":troop", "trp_marinid_mounted_skirmisher_3"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_29"),
				(assign, ":troop", "trp_rus_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_30"),
				(assign, ":troop", "trp_rus_horse_4"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_31"),
				(assign, ":troop", "trp_marinid_mounted_skirmisher_3"),
			(else_try),
				(assign, ":troop", "trp_taiga_bandit"),
			(try_end),
			(val_mul, ":troop", 2),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":troop"),
			(position_set_x, 1, 670),
			(position_set_y, 1, 370),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_biography", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(store_sub, ":value", "$g_quick_battle_troop", "trp_quick_battle_troop_1"),
			(val_add, ":value", "str_quick_battle_troop_1"),
			(create_text_overlay, reg0, ":value", 8192),
			(position_set_x, 1, 850),
			(position_set_y, 1, 850),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 320),
			(position_set_y, 1, 560),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 360),
			(position_set_y, 1, 130),
			(overlay_set_area_size, reg0, 1),
			(create_text_overlay, reg0, "str_map_basic", 16),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_1"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_1", 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 415),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_1", 1),
			(try_begin),
				(eq, "$g_quick_battle_game_type", 0),
				(try_for_range, ":scene", "scn_quick_battle_scene_1", "scn_quick_battle_scene_4"),
					(store_sub, ":value_2", ":scene", "scn_quick_battle_scene_1"),
					(val_add, ":value_2", "str_quick_battle_scene_1"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_1", ":value_2"),
				(try_end),
				(try_begin),
					(is_between, "$g_quick_battle_map", "scn_quick_battle_scene_1", "scn_quick_battle_scene_4"),
					(store_sub, ":value_3", "$g_quick_battle_map", "scn_quick_battle_scene_1"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", ":value_3"),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", 0),
					(assign, "$g_quick_battle_map", "scn_quick_battle_scene_1"),
				(try_end),
			(else_try),
				(try_for_range, ":scene", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_sub, ":value_2", ":scene", "scn_quick_battle_scene_1"),
					(val_add, ":value_2", "str_quick_battle_scene_1"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_1", ":value_2"),
				(try_end),
				(try_begin),
					(is_between, "$g_quick_battle_map", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_sub, ":value_3", "$g_quick_battle_map", "scn_quick_battle_scene_4"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", ":value_3"),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", 0),
					(assign, "$g_quick_battle_map", "scn_quick_battle_scene_4"),
				(try_end),
			(try_end),
			(store_sub, ":value_4", "$g_quick_battle_map", "scn_quick_battle_scene_1"),
			(val_add, ":value_4", "mesh_cb_ui_maps_scene_01"),
			(create_mesh_overlay, reg0, ":value_4"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 380),
			(position_set_y, 1, 220),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_game_type_basic", 16),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 180),
			(overlay_set_position, reg0, 1),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_23"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_23", 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_23", 1),
			(overlay_add_item, "$g_presentation_obj_custom_battle_designer_23", "str_battle"),
			(overlay_add_item, "$g_presentation_obj_custom_battle_designer_23", "str_siege_offense"),
			(overlay_add_item, "$g_presentation_obj_custom_battle_designer_23", "str_siege_defense"),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_23", "$g_quick_battle_game_type"),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_24", "str_randomize"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_24", 1),
			(assign, ":value_5", 330),
			(assign, ":value_5", 350),
			(assign, ":var_8", 40),
			(create_text_overlay, reg0, "str_faction", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_faction", 16),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_5", ":var_8"),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_4"),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_4", 1),
			(try_begin),
				(is_trial_version),
				(str_store_faction_name, 0, "fac_kingdom_1"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
				(store_add, ":value_6", "fac_kingdom_1", 1),
				(str_store_faction_name, 0, ":value_6"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
			(else_try),
				(try_for_range, ":value_6", "fac_kingdom_1", "fac_kingdoms_end"),
					(str_store_faction_name, 0, ":value_6"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
				(try_end),
				(str_store_faction_name, 0, "fac_outlaws"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
			(try_end),
			(try_begin),
				(eq, "$g_quick_battle_team_1_faction", "fac_outlaws"),
				(store_sub, ":value_7", "fac_kingdoms_end", "fac_kingdom_1"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_4", ":value_7"),
			(else_try),
				(store_sub, ":value_8", "$g_quick_battle_team_1_faction", "fac_kingdom_1"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_4", ":value_8"),
			(try_end),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_5"),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_5", 1),
			(try_begin),
				(is_trial_version),
				(str_store_faction_name, 0, "fac_kingdom_1"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
				(store_add, ":value_6", "fac_kingdom_1", 1),
				(str_store_faction_name, 0, ":value_6"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
			(else_try),
				(try_for_range, ":value_6", "fac_kingdom_1", "fac_kingdoms_end"),
					(str_store_faction_name, 0, ":value_6"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
				(try_end),
				(str_store_faction_name, 0, "fac_outlaws"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
			(try_end),
			(try_begin),
				(eq, "$g_quick_battle_team_2_faction", "fac_outlaws"),
				(store_sub, ":value_7", "fac_kingdoms_end", "fac_kingdom_1"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_5", ":value_7"),
			(else_try),
				(store_sub, ":value_9", "$g_quick_battle_team_2_faction", "fac_kingdom_1"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_5", ":value_9"),
			(try_end),
			(val_sub, ":value_5", ":var_8"),
			(create_text_overlay, reg0, "str_army_composition", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_army_composition", 16),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_5", ":var_8"),
			(try_begin),
				(eq, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 34),
				(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 34),
				(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_infantry"),
			(position_set_x, 1, 5),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_infantry"),
			(position_set_x, 1, 650),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_6", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_6", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_6", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent", 0),
			(position_set_x, 1, 295),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_12", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_9", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_9", 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_9", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent", 0),
			(position_set_x, 1, 940),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_15", 1),
			(val_sub, ":value_5", ":var_8"),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_archer"),
			(position_set_x, 1, 15),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_archer"),
			(position_set_x, 1, 660),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_7", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_7", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_7", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent", 0),
			(position_set_x, 1, 295),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_13", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_10", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_10", 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_10", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent", 0),
			(position_set_x, 1, 940),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_16", 1),
			(val_sub, ":value_5", ":var_8"),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_horseman"),
			(position_set_x, 1, 10),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_horseman"),
			(position_set_x, 1, 655),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_8", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_8", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_8", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent", 0),
			(position_set_x, 1, 295),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_14", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_11", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_11", 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_11", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent", 0),
			(position_set_x, 1, 940),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_17", 1),
			(val_sub, ":value_5", ":var_8"),
			(create_text_overlay, reg0, "str_army_size", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_army_size", 16),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_5", ":var_8"),
			(try_begin),
				(is_trial_version),
				(val_min, "$g_quick_battle_army_1_size", 25),
				(val_min, "$g_quick_battle_army_2_size", 25),
			(try_end),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_2", 0, 100),
			(overlay_set_boundaries, "$g_presentation_obj_custom_battle_designer_2", 1000, 75000),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_2", "$g_quick_battle_army_1_size"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_2", 1),
			(position_set_x, 1, 135),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_2", 1),
			(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_1_size"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_21", "str_reg0_men", 0),
			(position_set_x, 1, 255),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_21", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_3", 200),
			(overlay_set_boundaries, "$g_presentation_obj_custom_battle_designer_3", 1000, 75000),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_3", "$g_quick_battle_army_2_size"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_3", 1),
			(position_set_x, 1, 780),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_3", 1),
			(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_2_size"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_22", "str_reg0_men", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_22", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_19", "str_start", 0),
			(position_set_x, 1, 415),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_19", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_20", "str_back", 0),
			(position_set_x, 1, 585),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_20", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_1"),
				(try_begin),
					(eq, "$g_quick_battle_game_type", 0),
					(store_add, "$g_quick_battle_map", ":trigger_param_2", "scn_quick_battle_scene_1"),
				(else_try),
					(store_add, "$g_quick_battle_map", ":trigger_param_2", "scn_quick_battle_scene_4"),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_23"),
				(assign, "$g_quick_battle_game_type", ":trigger_param_2"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_24"),
				(store_random_in_range, "$g_quick_battle_game_type", 0, 3),
				(store_random_in_range, "$g_quick_battle_troop", "trp_quick_battle_troop_1", "trp_quick_battle_troops_end"),
				(try_begin),
					(is_trial_version),
					(store_random_in_range, "$g_quick_battle_team_1_faction", 0, 2),
					(try_begin),
						(eq, "$g_quick_battle_team_1_faction", 0),
						(assign, "$g_quick_battle_team_2_faction", 1),
					(else_try),
						(assign, "$g_quick_battle_team_2_faction", 0),
					(try_end),
					(val_add, "$g_quick_battle_team_1_faction", "fac_kingdom_1"),
					(val_add, "$g_quick_battle_team_2_faction", "fac_kingdom_1"),
					(store_random_in_range, "$g_quick_battle_army_1_size", 10, 16),
					(store_random_in_range, ":random_in_range_0_6", 0, 6),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
					(store_random_in_range, ":random_in_range_0_6", 0, 6),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
				(else_try),
					(store_sub, ":value", "fac_kingdoms_end", "fac_kingdom_1"),
					(val_add, ":value", 1),
					(store_random_in_range, "$g_quick_battle_team_1_faction", 0, ":value"),
					(try_begin),
						(eq, "$g_quick_battle_team_1_faction", 0),
						(assign, "$g_quick_battle_team_1_faction", "fac_outlaws"),
					(else_try),
						(val_add, "$g_quick_battle_team_1_faction", "fac_kingdom_1"),
						(val_sub, "$g_quick_battle_team_1_faction", 1),
					(try_end),
					(assign, ":value_2", 1000),
					(try_for_range, ":unused", 0, ":value_2"),
						(store_random_in_range, "$g_quick_battle_team_2_faction", 0, ":value"),
						(try_begin),
							(eq, "$g_quick_battle_team_2_faction", 0),
							(assign, "$g_quick_battle_team_2_faction", "fac_outlaws"),
						(else_try),
							(val_add, "$g_quick_battle_team_2_faction", "fac_kingdom_1"),
							(val_sub, "$g_quick_battle_team_2_faction", 1),
						(try_end),
						(neq, "$g_quick_battle_team_1_faction", "$g_quick_battle_team_2_faction"),
						(assign, ":value_2", 0),
					(try_end),
					(store_random_in_range, "$g_quick_battle_army_1_size", 10, 21),
					(store_random_in_range, ":random_in_range_0_6", 0, 11),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
					(store_random_in_range, ":random_in_range_0_6", 0, 11),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
				(try_end),
				(assign, "$g_quick_battle_army_2_size", "$g_quick_battle_army_1_size"),
				(try_begin),
					(eq, "$g_quick_battle_game_type", 0),
					(store_random_in_range, "$g_quick_battle_map", "scn_quick_battle_scene_1", "scn_quick_battle_scene_4"),
					(store_random_in_range, ":random_in_range_0_3", 0, 3),
					(store_random_in_range, ":random_in_range_0_2", 0, 2),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(store_sub, ":value_3", 100, ":random_in_range_0_100"),
					(store_random_in_range, ":random_in_range_0_value_3", 0, ":value_3"),
					(store_sub, ":value_4", ":value_3", ":random_in_range_0_value_3"),
					(try_begin),
						(eq, ":random_in_range_0_3", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_4"),
						(try_end),
					(else_try),
						(eq, ":random_in_range_0_3", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_4"),
						(try_end),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_4"),
						(try_end),
					(try_end),
					(store_random_in_range, ":random_in_range_0_3", 0, 3),
					(store_random_in_range, ":random_in_range_0_2", 0, 2),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(store_sub, ":value_3", 100, ":random_in_range_0_100"),
					(store_random_in_range, ":random_in_range_0_value_3", 0, ":value_3"),
					(store_sub, ":value_4", ":value_3", ":random_in_range_0_value_3"),
					(try_begin),
						(eq, ":random_in_range_0_3", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_4"),
						(try_end),
					(else_try),
						(eq, ":random_in_range_0_3", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_4"),
						(try_end),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_4"),
						(try_end),
					(try_end),
				(else_try),
					(eq, "$g_quick_battle_game_type", 1),
					(store_random_in_range, "$g_quick_battle_map", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_10_last_value", 30, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_9_last_value", 100, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_6_last_value", 20, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_7_last_value", 100, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
				(else_try),
					(store_random_in_range, "$g_quick_battle_map", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_7_last_value", 30, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_6_last_value", 100, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_9_last_value", 20, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_10_last_value", 100, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_2"),
				(assign, "$g_quick_battle_army_1_size", ":trigger_param_2"),
				(try_begin),
					(is_trial_version),
					(gt, "$g_quick_battle_army_1_size", 25),
					(assign, "$g_quick_battle_army_1_size", 25),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_2", 25),
				(try_end),
				(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_1_size"),
				(overlay_set_text, "$g_presentation_obj_custom_battle_designer_21", "str_reg0_men"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_3"),
				(assign, "$g_quick_battle_army_2_size", ":trigger_param_2"),
				(try_begin),
					(is_trial_version),
					(gt, "$g_quick_battle_army_2_size", 25),
					(assign, "$g_quick_battle_army_2_size", 25),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_3", 25),
				(try_end),
				(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_2_size"),
				(overlay_set_text, "$g_presentation_obj_custom_battle_designer_22", "str_reg0_men"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_4"),
				(try_begin),
					(store_sub, ":value_5", "fac_kingdoms_end", "fac_kingdom_1"),
					(eq, ":trigger_param_2", ":value_5"),
					(assign, "$g_quick_battle_team_1_faction", "fac_outlaws"),
				(else_try),
					(store_add, "$g_quick_battle_team_1_faction", ":trigger_param_2", "fac_kingdom_1"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_5"),
				(try_begin),
					(store_sub, ":value_5", "fac_kingdoms_end", "fac_kingdom_1"),
					(eq, ":trigger_param_2", ":value_5"),
					(assign, "$g_quick_battle_team_2_faction", "fac_outlaws"),
				(else_try),
					(store_add, "$g_quick_battle_team_2_faction", ":trigger_param_2", "fac_kingdom_1"),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_18"),
				(store_add, "$g_quick_battle_troop", ":trigger_param_2", "trp_quick_battle_troop_1"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_6"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_6_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_7"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_7_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", "$g_presentation_obj_custom_battle_designer_6_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_8"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_8_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_6_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_9"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_9_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_10"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_10_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", "$g_presentation_obj_custom_battle_designer_9_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_11"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_11_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_9_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19"),
				(assign, "$g_is_quick_battle", 1),
				(assign, ":var_18", "$g_quick_battle_map"),
				(try_begin),
					(eq, "$g_quick_battle_game_type", 0),
					(assign, ":value_9", "mt_quick_battle_battle"),
					(modify_visitors_at_site, ":var_18"),
					(call_script, "script_spawn_quick_battle_army", 0, "$g_quick_battle_team_1_faction", "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value", 0, 1),
					(call_script, "script_spawn_quick_battle_army", 16, "$g_quick_battle_team_2_faction", "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value", 0, 0),
				(else_try),
					(eq, "$g_quick_battle_game_type", 1),
					(assign, ":value_9", "mt_quick_battle_siege"),
					(modify_visitors_at_site, ":var_18"),
					(call_script, "script_spawn_quick_battle_army", 16, "$g_quick_battle_team_1_faction", "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value", 0, 1),
					(call_script, "script_spawn_quick_battle_army", 0, "$g_quick_battle_team_2_faction", "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value", 1, 0),
				(else_try),
					(assign, ":value_9", "mt_quick_battle_siege"),
					(modify_visitors_at_site, ":var_18"),
					(call_script, "script_spawn_quick_battle_army", 0, "$g_quick_battle_team_1_faction", "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value", 1, 1),
					(call_script, "script_spawn_quick_battle_army", 16, "$g_quick_battle_team_2_faction", "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value", 0, 0),
				(try_end),
				(set_jump_mission, ":value_9"),
				(jump_to_menu, "mnu_custom_battle_end"),
				(jump_to_scene, ":var_18"),
				(change_screen_mission),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_20"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_6"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_7"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_8"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_9"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_10"),
			(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_11"),
			(try_begin),
				(eq, ":trigger_param_2", 1),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_last_mouse_over_object"),
					(assign, "$g_presentation_obj_custom_battle_last_mouse_over_object", -1),
				(try_end),
			(else_try),
				(assign, "$g_presentation_obj_custom_battle_last_mouse_over_object", ":trigger_param_1"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(presentation_set_duration, 0),
			(else_try),
				(key_clicked, 225),
				(neq, "$g_presentation_obj_custom_battle_last_mouse_over_object", -1),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_6"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_7"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_8"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_9"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_10"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_11"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
					(try_end),
				(try_end),
			(try_end)
		])
	]),

	("game_multiplayer_admin_panel", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_1"),
				(assign, ":value", "mesh_mp_ui_host_maps_1"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_2"),
				(assign, ":value", "mesh_mp_ui_host_maps_2"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_3"),
				(assign, ":value", "mesh_mp_ui_host_maps_3"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_4"),
				(assign, ":value", "mesh_mp_ui_host_maps_4"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_5"),
				(assign, ":value", "mesh_mp_ui_host_maps_5"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_6"),
				(assign, ":value", "mesh_mp_ui_host_maps_6"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_7"),
				(assign, ":value", "mesh_mp_ui_host_maps_7"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_8"),
				(assign, ":value", "mesh_mp_ui_host_maps_8"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_9"),
				(assign, ":value", "mesh_mp_ui_host_maps_9"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_10"),
				(assign, ":value", "mesh_mp_ui_host_maps_10"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_11"),
				(assign, ":value", "mesh_mp_ui_host_maps_11"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_12"),
				(assign, ":value", "mesh_mp_ui_host_maps_12"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_13"),
				(assign, ":value", "mesh_mp_ui_host_maps_13"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_14"),
				(assign, ":value", "mesh_mp_ui_host_maps_14"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_15"),
				(assign, ":value", "mesh_mp_ui_host_maps_15"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_16"),
				(assign, ":value", "mesh_mp_ui_host_maps_16"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_17"),
				(assign, ":value", "mesh_mp_ui_host_maps_17"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_18"),
				(assign, ":value", "mesh_mp_ui_host_maps_18"),
			(else_try),
				(this_or_next|eq, "$g_multiplayer_selected_map", "scn_random_multi_plain_medium"),
				(eq, "$g_multiplayer_selected_map", "scn_random_multi_plain_large"),
				(assign, ":value", "mesh_mp_ui_host_maps_randomp"),
			(else_try),
				(this_or_next|eq, "$g_multiplayer_selected_map", "scn_random_multi_steppe_medium"),
				(eq, "$g_multiplayer_selected_map", "scn_random_multi_steppe_large"),
				(assign, ":value", "mesh_mp_ui_host_maps_randoms"),
			(else_try),
				(assign, ":value", "mesh_mp_ui_host_maps_randomp"),
			(try_end),
			(create_mesh_overlay, reg0, ":value"),
			(position_set_x, 1, -1),
			(position_set_y, 1, 550),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1002),
			(position_set_y, 1, 1002),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_mp_ui_host_main"),
			(position_set_x, 1, -1),
			(position_set_y, 1, -1),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1002),
			(position_set_y, 1, 1002),
			(overlay_set_size, reg0, 1),
			(assign, ":var_2", 1240),
			(assign, ":var_3", 40),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 1),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(this_or_next|eq, "$g_multiplayer_game_type", 4),
				(this_or_next|eq, "$g_multiplayer_game_type", 5),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
				(val_add, ":var_2", ":var_3"),
				(this_or_next|eq, "$g_multiplayer_game_type", 4),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
			(try_end),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_admin_panel_container", 0, 8192),
			(position_set_x, 1, 59),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_admin_panel_container", 1),
			(position_set_x, 1, 640),
			(position_set_y, 1, 520),
			(overlay_set_area_size, "$g_presentation_obj_admin_panel_container", 1),
			(set_container_overlay, "$g_presentation_obj_admin_panel_container"),
			(create_text_overlay, reg0, "str_add_to_official_game_servers_list", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_14", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_14", 1),
			(server_get_add_to_game_servers_list, ":server_add_to_game_servers_list"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_14", ":server_add_to_game_servers_list"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_enable_valve_anti_cheat", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_41", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_41", 1),
			(server_get_anti_cheat, ":server_anti_cheat"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_41", ":server_anti_cheat"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_server_name", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(str_store_server_name, 0),
			(try_begin),
				(eq, "$g_multiplayer_renaming_server_allowed", 1),
				(create_simple_text_box_overlay, "$g_presentation_obj_admin_panel_20"),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_20", 1),
				(overlay_set_text, "$g_presentation_obj_admin_panel_20", 0),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_20", -1),
				(create_text_overlay, reg0, 0, 0),
				(position_set_x, 1, 385),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_game_password", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_admin_panel_9"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_9", 1),
			(str_store_server_password, 0),
			(overlay_set_text, "$g_presentation_obj_admin_panel_9", 0),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_welcome_message", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_admin_panel_32"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_32", 1),
			(str_store_welcome_message, 0),
			(overlay_set_text, "$g_presentation_obj_admin_panel_32", 0),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_map", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
			(assign, ":var_7", reg0),
			(assign, ":value_3", 0),
			(try_begin),
				(gt, ":var_7", 12),
				(create_combo_label_overlay, "$g_presentation_obj_admin_panel_1"),
			(else_try),
				(create_combo_button_overlay, "$g_presentation_obj_admin_panel_1"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_1", 1),
			(try_begin),
				(gt, ":var_7", 14),
				(position_set_x, 1, 465),
			(else_try),
				(position_set_x, 1, 490),
			(try_end),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_1", 1),
			(troop_get_slot, ":multiplayer_data_relations_begin", "trp_multiplayer_data", slot_troop_relations_begin),
			(assign, ":value_4", 0),
			(try_for_range, ":localvariable", 0, ":var_7"),
				(store_add, ":value_5", ":localvariable", 0),
				(troop_get_slot, ":multiplayer_data_value_5", "trp_multiplayer_data", ":value_5"),
				(store_sub, ":value_6", ":multiplayer_data_value_5", "scn_multi_scene_1"),
				(val_add, ":value_6", "str_multi_scene_1"),
				(str_store_string, 0, ":value_6"),
				(overlay_add_item, "$g_presentation_obj_admin_panel_1", 0),
				(try_begin),
					(eq, ":multiplayer_data_value_5", "$g_multiplayer_selected_map"),
					(assign, ":value_3", ":localvariable"),
					(assign, ":value_4", 1),
				(try_end),
			(try_end),
			(overlay_set_val, "$g_presentation_obj_admin_panel_1", ":value_3"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_game_type", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(eq, "$g_multiplayer_changing_game_type_allowed", 1),
				(create_combo_button_overlay, "$g_presentation_obj_admin_panel_10"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, "$g_presentation_obj_admin_panel_10", 1),
				(position_set_x, 1, 490),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_10", 1),
				(try_for_range, ":number", 0, 8),
					(store_add, ":value_6", ":number", "str_multi_game_type_1"),
					(str_store_string, 0, ":value_6"),
					(overlay_add_item, "$g_presentation_obj_admin_panel_10", 0),
				(try_end),
				(overlay_set_val, "$g_presentation_obj_admin_panel_10", "$g_multiplayer_game_type"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_10", -1),
				(store_add, ":value_6", "$g_multiplayer_game_type", "str_multi_game_type_1"),
				(str_store_string, 0, ":value_6"),
				(create_text_overlay, reg0, 0, 0),
				(position_set_x, 1, 385),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 1),
			(create_text_overlay, reg0, "str_team_reg1_faction", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_11"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_11", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_11", 1),
			(call_script, "script_multiplayer_fill_available_factions_combo_button", "$g_presentation_obj_admin_panel_11", "$g_multiplayer_next_team_1_faction", "$g_multiplayer_next_team_2_faction"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 2),
			(create_text_overlay, reg0, "str_team_reg1_faction", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_12"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_12", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_12", 1),
			(call_script, "script_multiplayer_fill_available_factions_combo_button", "$g_presentation_obj_admin_panel_12", "$g_multiplayer_next_team_2_faction", "$g_multiplayer_next_team_1_faction"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 1),
			(create_text_overlay, reg0, "str_max_number_of_players", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_21", 2, 201),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_21", 1),
			(server_get_max_num_players, ":server_max_num_players"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_21", ":server_max_num_players"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 1),
			(create_text_overlay, reg0, "str_number_of_bots_in_team_reg1", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_3", 0, "$g_multiplayer_max_num_bots"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_3", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_3", "$g_multiplayer_num_bots_team_1"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 2),
			(create_text_overlay, reg0, "str_number_of_bots_in_team_reg1", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_4", 0, "$g_multiplayer_max_num_bots"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_4", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_4", "$g_multiplayer_num_bots_team_2"),
			(try_begin),
				(neq, "$g_multiplayer_game_type", 0),
				(neq, "$g_multiplayer_game_type", 7),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_allow_friendly_fire", 0),
				(position_set_x, 1, 30),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_check_box_overlay, "$g_presentation_obj_admin_panel_5", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 7),
				(store_add, ":value_2", ":var_2", 7),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_5", 1),
				(server_get_friendly_fire, ":server_friendly_fire"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_5", ":server_friendly_fire"),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_allow_melee_friendly_fire", 0),
				(position_set_x, 1, 30),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_check_box_overlay, "$g_presentation_obj_admin_panel_36", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 7),
				(store_add, ":value_2", ":var_2", 7),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_36", 1),
				(server_get_melee_friendly_fire, ":server_melee_friendly_fire"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_36", ":server_melee_friendly_fire"),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_friendly_fire_damage_self_ratio", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_37", 0, 101),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_37", 1),
			(server_get_friendly_fire_damage_self_ratio, ":server_friendly_fire_damage_self_ratio"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_37", ":server_friendly_fire_damage_self_ratio"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_friendly_fire_damage_friend_ratio", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_38", 0, 101),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_38", 1),
			(server_get_friendly_fire_damage_friend_ratio, ":server_friendly_fire_damage_friend_ratio"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_38", ":server_friendly_fire_damage_friend_ratio"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_spectator_camera", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_19"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_19", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_19", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_free"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_stick_to_any_player"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_stick_to_team_members"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_stick_to_team_members_view"),
			(server_get_ghost_mode, ":server_ghost_mode"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_19", ":server_ghost_mode"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_control_block_direction", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_15"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_15", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_15", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_15", "str_automatic"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_15", "str_by_mouse_movement"),
			(server_get_control_block_dir, ":server_control_block_dir"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_15", ":server_control_block_dir"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_combat_speed", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_26"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_26", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_26", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_0"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_1"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_2"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_3"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_4"),
			(server_get_combat_speed, ":server_combat_speed"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_26", ":server_combat_speed"),
			(try_begin),
				(neq, "$g_multiplayer_game_type", 5),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_map_time_limit", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_7", 5, 121),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_7", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_7", "$g_multiplayer_game_max_minutes"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_7", -1),
			(try_end),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_round_time_limit", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_16", 60, 901),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_16", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_16", "$g_multiplayer_round_max_seconds"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_16", -1),
			(try_end),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(eq, "$g_multiplayer_game_type", 3),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_players_take_control_of_a_bot_after_death", 0),
				(position_set_x, 1, 30),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_check_box_overlay, "$g_presentation_obj_admin_panel_25", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 7),
				(store_add, ":value_2", ":var_2", 7),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_25", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_25", "$g_multiplayer_player_respawn_as_bot"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_25", -1),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 6),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_defender_spawn_count_limit", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_combo_button_overlay, "$g_presentation_obj_admin_panel_27"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, "$g_presentation_obj_admin_panel_27", 1),
				(position_set_x, 1, 490),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_27", 1),
				(assign, reg0, 5),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 4),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 3),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 2),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 1),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_unlimited"),
				(store_sub, ":value_7", 5, "$g_multiplayer_number_of_respawn_count"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_27", ":value_7"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_27", -1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_team_points_limit", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_8", 3, 1001),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_8", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_8", "$g_multiplayer_game_max_points"),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 5),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_point_gained_from_flags", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_17", 25, 401),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_17", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_17", "$g_multiplayer_point_gained_from_flags"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_17", -1),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 4),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_point_gained_from_capturing_flag", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_18", 0, 11),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_18", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_18", "$g_multiplayer_point_gained_from_capturing_flag"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_18", -1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_respawn_period", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_6", 3, 31),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_6", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_6", "$g_multiplayer_respawn_period"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_initial_gold_multiplier", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_33", 0, 1001),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_33", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_33", "$g_multiplayer_initial_gold_multiplier"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_battle_earnings_multiplier", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_34", 0, 1001),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_34", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_34", "$g_multiplayer_battle_earnings_multiplier"),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_round_earnings_multiplier", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_35", 0, 1001),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_35", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_35", "$g_multiplayer_round_earnings_multiplier"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_35", -1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_kick_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_28", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_28", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_28", "$g_multiplayer_kick_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_ban_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_29", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_29", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_29", "$g_multiplayer_ban_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_maps_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_24", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_24", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_24", "$g_multiplayer_maps_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_factions_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_23", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_23", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_23", "$g_multiplayer_factions_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_bots_upper_limit_for_votes", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":var_25", 51),
			(val_min, ":var_25", "$g_multiplayer_max_num_bots"),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_22", 0, ":var_25"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_22", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_22", "$g_multiplayer_num_bots_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_valid_vote_ratio", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_30", 50, 101),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_30", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_30", "$g_multiplayer_valid_vote_ratio"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_auto_team_balance_limit", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_31"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_31", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_31", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_unlimited"),
			(assign, reg0, 6),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 5),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 4),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 3),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 2),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(try_begin),
				(ge, "$g_multiplayer_auto_team_balance_limit", 1000),
				(overlay_set_val, "$g_presentation_obj_admin_panel_31", 0),
			(else_try),
				(store_sub, ":value_8", 7, "$g_multiplayer_auto_team_balance_limit"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_31", ":value_8"),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_allow_player_banners", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_39", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_39", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_39", "$g_multiplayer_allow_player_banners"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_disallow_ranged_weapons", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_42", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_42", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_42", "$g_multiplayer_disallow_ranged_weapons"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_force_default_armor", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_40", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_40", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_40", "$g_multiplayer_force_default_armor"),
			(set_container_overlay, -1),
			(create_button_overlay, "$g_presentation_obj_admin_panel_13", "str_back", 16),
			(position_set_x, 1, 825),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_admin_panel_13", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_presentation_obj_admin_panel_13", 1),
			(create_button_overlay, "$g_presentation_obj_admin_panel_2", "str_start_map", 16),
			(position_set_x, 1, 825),
			(position_set_y, 1, 90),
			(overlay_set_position, "$g_presentation_obj_admin_panel_2", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_presentation_obj_admin_panel_2", 1),
			(presentation_set_duration, 999999),
			(try_begin),
				(eq, ":value_4", 0),
				(assign, "$g_multiplayer_selected_map", ":multiplayer_data_relations_begin"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_1"),
				(store_add, ":value", ":trigger_param_2", 0),
				(troop_get_slot, "$g_multiplayer_selected_map", "trp_multiplayer_data", ":value"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_2"),
				(multiplayer_send_2_int_to_server, 2, "$g_multiplayer_selected_map", "$g_multiplayer_game_type"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_3"),
				(multiplayer_send_2_int_to_server, 4, 1, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_4"),
				(multiplayer_send_2_int_to_server, 4, 2, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_5"),
				(multiplayer_send_int_to_server, 5, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_6"),
				(multiplayer_send_int_to_server, 9, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_7"),
				(multiplayer_send_int_to_server, 10, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_8"),
				(multiplayer_send_int_to_server, 12, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_9"),
				(multiplayer_send_string_to_server, 16, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_10"),
				(assign, "$g_multiplayer_game_type", ":trigger_param_2"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_11"),
				(store_add, "$g_multiplayer_next_team_1_faction", ":trigger_param_2", "fac_kingdom_1"),
				(multiplayer_send_2_int_to_server, 17, 1, "$g_multiplayer_next_team_1_faction"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_12"),
				(store_add, "$g_multiplayer_next_team_2_faction", ":trigger_param_2", "fac_kingdom_1"),
				(multiplayer_send_2_int_to_server, 17, 2, "$g_multiplayer_next_team_2_faction"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_13"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_14"),
				(multiplayer_send_int_to_server, 8, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_15"),
				(multiplayer_send_int_to_server, 7, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_16"),
				(multiplayer_send_int_to_server, 11, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_17"),
				(multiplayer_send_int_to_server, 13, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_18"),
				(multiplayer_send_int_to_server, 14, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_19"),
				(multiplayer_send_int_to_server, 6, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_20"),
				(multiplayer_send_string_to_server, 15, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_21"),
				(multiplayer_send_int_to_server, 3, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_22"),
				(multiplayer_send_int_to_server, 25, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_23"),
				(multiplayer_send_int_to_server, 26, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_24"),
				(multiplayer_send_int_to_server, 27, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_25"),
				(multiplayer_send_int_to_server, 28, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_26"),
				(multiplayer_send_int_to_server, 29, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_27"),
				(store_sub, ":value_2", 5, ":trigger_param_2"),
				(multiplayer_send_int_to_server, 30, ":value_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_28"),
				(multiplayer_send_int_to_server, 31, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_29"),
				(multiplayer_send_int_to_server, 32, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_30"),
				(multiplayer_send_int_to_server, 33, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_31"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(multiplayer_send_int_to_server, 34, 1000),
				(else_try),
					(store_sub, ":value_2", 7, ":trigger_param_2"),
					(multiplayer_send_int_to_server, 34, ":value_2"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_32"),
				(server_set_welcome_message, 0),
				(multiplayer_send_string_to_server, 35, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_33"),
				(multiplayer_send_int_to_server, 36, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_34"),
				(multiplayer_send_int_to_server, 37, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_35"),
				(multiplayer_send_int_to_server, 38, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_36"),
				(multiplayer_send_int_to_server, 39, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_37"),
				(multiplayer_send_int_to_server, 40, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_38"),
				(multiplayer_send_int_to_server, 41, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_39"),
				(multiplayer_send_int_to_server, 42, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_40"),
				(multiplayer_send_int_to_server, 43, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_41"),
				(multiplayer_send_int_to_server, 44, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_42"),
				(multiplayer_send_int_to_server, 47, ":trigger_param_2"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_welcome_message", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_welcome_message, 0),
			(try_begin),
				(neg|str_is_empty, 0),
				(eq, "$g_multiplayer_welcome_message_shown", 0),
				(create_mesh_overlay, reg0, "mesh_mp_ui_welcome_panel"),
				(position_set_x, 1, 200),
				(position_set_y, 1, 400),
				(overlay_set_position, reg0, 1),
				(create_text_overlay, reg0, 0, 8192),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 230),
				(position_set_y, 1, 425),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 540),
				(position_set_y, 1, 150),
				(overlay_set_area_size, reg0, 1),
				(presentation_set_duration, 999999),
			(else_try),
				(eq, "$g_multiplayer_show_server_rules", 1),
				(create_mesh_overlay, reg0, "mesh_mp_ui_welcome_panel"),
				(position_set_x, 1, 200),
				(position_set_y, 1, 400),
				(overlay_set_position, reg0, 1),
				(try_begin),
					(neg|str_is_empty, 0),
					(str_clear, 3),
					(str_store_string, 2, 0),
					(str_store_string, 2, "str_s2_s3"),
					(str_store_string, 2, "str_s2_s3"),
				(else_try),
					(str_clear, 2),
				(try_end),
				(str_store_string, 3, "@Game Rules:^"),
				(str_store_string, 2, "str_s2_s3"),
				(assign, ":value", 1000),
				(call_script, "script_game_multiplayer_get_game_type_mission_template", "$g_multiplayer_game_type"),
				(assign, ":var_2", reg0),
				(str_store_server_name, 0),
				(str_store_string, 3, "str_server_name_s0"),
				(str_store_string, 2, "str_s2_s3"),
				(try_begin),
					(eq, "$g_multiplayer_game_type", 0),
					(str_store_string, 0, "str_multi_game_type_1"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 1),
					(str_store_string, 0, "str_multi_game_type_2"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 2),
					(str_store_string, 0, "str_multi_game_type_3"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 3),
					(str_store_string, 0, "str_multi_game_type_4"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 4),
					(str_store_string, 0, "str_multi_game_type_5"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 5),
					(str_store_string, 0, "str_multi_game_type_6"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 6),
					(str_store_string, 0, "str_multi_game_type_7"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 7),
					(str_store_string, 0, "str_multi_game_type_8"),
				(try_end),
				(str_store_string, 3, "str_game_type_s0"),
				(str_store_string, 2, "str_s2_s3"),
				(store_current_scene, ":current_scene"),
				(val_sub, ":current_scene", "scn_multi_scene_1"),
				(val_add, ":current_scene", "str_multi_scene_1"),
				(str_store_string, 0, ":current_scene"),
				(str_store_string, 3, "str_map_name_s0"),
				(str_store_string, 2, "str_s2_s3"),
				(store_mission_timer_a, ":mission_timer_a"),
				(val_add, ":mission_timer_a", "$server_mission_timer_while_player_joined"),
				(assign, reg0, ":mission_timer_a"),
				(store_mul, "$g_multiplayer_game_max_seconds", "$g_multiplayer_game_max_minutes", 60),
				(store_sub, ":value_2", "$g_multiplayer_game_max_seconds", ":mission_timer_a"),
				(store_div, reg0, ":value_2", 60),
				(store_mod, reg1, ":value_2", 60),
				(try_begin),
					(ge, reg0, 10),
					(ge, reg1, 10),
					(str_clear, 0),
					(str_clear, 1),
				(else_try),
					(ge, reg0, 10),
					(str_clear, 0),
					(str_store_string, 1, "@0"),
				(else_try),
					(ge, reg1, 10),
					(str_store_string, 0, "@0"),
					(str_clear, 1),
				(else_try),
					(str_store_string, 0, "@0"),
					(str_store_string, 1, "@0"),
				(try_end),
				(str_store_string, 3, "str_remaining_time_s0reg0_s1reg1"),
				(str_store_string, 2, "str_s2_s3"),
				(try_for_range, ":localvariable", 0, ":value"),
					(assign, reg0, -12345),
					(call_script, "script_game_get_multiplayer_server_option_for_mission_template", ":var_2", ":localvariable"),
					(try_begin),
						(eq, reg0, -12345),
						(assign, ":value", 0),
					(else_try),
						(call_script, "script_game_multiplayer_server_option_for_mission_template_to_string", ":var_2", ":localvariable", reg0),
						(str_store_string, 3, 0),
						(str_store_string, 2, "str_s2_s3"),
					(try_end),
				(try_end),
				(create_text_overlay, reg0, 2, 8192),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 230),
				(position_set_y, 1, 425),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 540),
				(position_set_y, 1, 150),
				(overlay_set_area_size, reg0, 1),
				(presentation_set_duration, 999999),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(str_store_welcome_message, 0),
			(try_begin),
				(neq, "$g_multiplayer_show_server_rules", 1),
				(this_or_next|str_is_empty, 0),
				(eq, "$g_multiplayer_welcome_message_shown", 1),
				(presentation_set_duration, 0),
				(neg|is_presentation_active, "prsnt_multiplayer_escape_menu"),
				(neg|is_presentation_active, "prsnt_multiplayer_team_select"),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(else_try),
				(store_mission_timer_a, ":mission_timer_a"),
				(gt, ":mission_timer_a", 1),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 224),
				(this_or_next|key_clicked, 225),
				(this_or_next|key_clicked, 252),
				(key_clicked, 253),
				(assign, "$g_multiplayer_welcome_message_shown", 1),
				(presentation_set_duration, 0),
				(neg|is_presentation_active, "prsnt_multiplayer_escape_menu"),
				(neg|is_presentation_active, "prsnt_multiplayer_team_select"),
				(try_begin),
					(eq, "$g_multiplayer_show_server_rules", 1),
					(assign, "$g_multiplayer_show_server_rules", 0),
					(start_presentation, "prsnt_multiplayer_escape_menu"),
				(else_try),
					(start_presentation, "prsnt_multiplayer_team_select"),
				(try_end),
			(try_end)
		])
	]),

	("multiplayer_team_select", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_team_select_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_team_select_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_team_select_container", 1),
			(set_container_overlay, "$g_presentation_obj_team_select_container"),
			(assign, ":var_1", 450),
			(create_text_overlay, reg0, "str_choose_a_faction", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(position_set_x, 1, 100),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(team_get_faction, ":faction_0", 0),
			(str_store_faction_name, 0, ":faction_0"),
			(create_button_overlay, "$g_presentation_obj_team_select_1", 0, 0),
			(try_begin),
				(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 0),
				(overlay_set_color, "$g_presentation_obj_team_select_1", 16777215),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_1", 5635920),
				(assign, "$g_multiplayer_team_select_1_available", 1),
			(else_try),
				(overlay_set_color, "$g_presentation_obj_team_select_1", 8947848),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_1", 8947848),
				(assign, "$g_multiplayer_team_select_1_available", 0),
			(try_end),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_team_select_1", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(team_get_faction, ":faction_0", 1),
			(str_store_faction_name, 0, ":faction_0"),
			(create_button_overlay, "$g_presentation_obj_team_select_2", 0, 0),
			(try_begin),
				(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 1),
				(overlay_set_color, "$g_presentation_obj_team_select_2", 16777215),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_2", 5635920),
				(assign, "$g_multiplayer_team_select_2_available", 1),
			(else_try),
				(overlay_set_color, "$g_presentation_obj_team_select_2", 8947848),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_2", 8947848),
				(assign, "$g_multiplayer_team_select_2_available", 0),
			(try_end),
			(overlay_set_position, "$g_presentation_obj_team_select_2", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(create_button_overlay, "$g_presentation_obj_team_select_3", "str_spectator", 0),
			(overlay_set_color, "$g_presentation_obj_team_select_3", 16777215),
			(overlay_set_position, "$g_presentation_obj_team_select_3", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(eq, "$g_waiting_for_confirmation_to_terminate", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_team_select_1"),
					(try_begin),
						(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 0),
						(try_begin),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(neq, ":team_no_multiplayer_my_player", 0),
							(assign, "$g_confirmation_result", 0),
							(assign, "$g_waiting_for_confirmation_to_terminate", 1),
							(player_get_troop_id, "$g_confirmation_troop_backup", ":multiplayer_my_player"),
							(player_get_team_no, "$g_confirmation_team_backup", ":multiplayer_my_player"),
							(player_set_troop_id, ":multiplayer_my_player", -1),
							(multiplayer_send_int_to_server, 19, 0),
							(player_set_team_no, ":multiplayer_my_player", 0),
						(else_try),
							(presentation_set_duration, 0),
							(start_presentation, "prsnt_multiplayer_troop_select"),
						(try_end),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_team_select_2"),
					(try_begin),
						(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 1),
						(try_begin),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(neq, ":team_no_multiplayer_my_player", 1),
							(assign, "$g_confirmation_result", 0),
							(assign, "$g_waiting_for_confirmation_to_terminate", 1),
							(player_get_troop_id, "$g_confirmation_troop_backup", ":multiplayer_my_player"),
							(player_get_team_no, "$g_confirmation_team_backup", ":multiplayer_my_player"),
							(player_set_troop_id, ":multiplayer_my_player", -1),
							(multiplayer_send_int_to_server, 19, 1),
							(player_set_team_no, ":multiplayer_my_player", 1),
						(else_try),
							(presentation_set_duration, 0),
							(start_presentation, "prsnt_multiplayer_troop_select"),
						(try_end),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_team_select_3"),
					(player_set_troop_id, ":multiplayer_my_player", -1),
					(multiplayer_send_int_to_server, 19, 2),
					(player_set_team_no, ":multiplayer_my_player", 2),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(eq, "$g_waiting_for_confirmation_to_terminate", 0),
				(multiplayer_get_my_team, ":multiplayer_my_team"),
				(try_begin),
					(eq, ":multiplayer_my_team", 3),
					(player_set_troop_id, ":multiplayer_my_player", -1),
					(multiplayer_send_int_to_server, 19, 2),
					(player_set_team_no, ":multiplayer_my_player", 2),
				(try_end),
				(presentation_set_duration, 0),
			(else_try),
				(eq, "$g_waiting_for_confirmation_to_terminate", 1),
				(eq, "$g_confirmation_result", 1),
				(assign, "$g_waiting_for_confirmation_to_terminate", 0),
				(assign, "$g_confirmation_result", 0),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_troop_select"),
			(else_try),
				(eq, "$g_waiting_for_confirmation_to_terminate", 1),
				(eq, "$g_confirmation_result", -1),
				(player_set_troop_id, ":multiplayer_my_player", "$g_confirmation_troop_backup"),
				(player_set_team_no, ":multiplayer_my_player", "$g_confirmation_team_backup"),
				(assign, "$g_waiting_for_confirmation_to_terminate", 0),
				(assign, "$g_confirmation_result", 0),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(else_try),
				(assign, ":value", 0),
				(try_begin),
					(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 0),
					(try_begin),
						(eq, "$g_multiplayer_team_select_1_available", 0),
						(assign, ":value", 1),
					(try_end),
				(else_try),
					(try_begin),
						(eq, "$g_multiplayer_team_select_1_available", 1),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(try_begin),
					(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 1),
					(try_begin),
						(eq, "$g_multiplayer_team_select_2_available", 0),
						(assign, ":value", 1),
					(try_end),
				(else_try),
					(try_begin),
						(eq, "$g_multiplayer_team_select_2_available", 1),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(eq, ":value", 1),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(try_end)
		])
	]),

	("multiplayer_troop_select", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_troop_select_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_troop_select_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_troop_select_container", 1),
			(set_container_overlay, "$g_presentation_obj_troop_select_container"),
			(assign, ":var_1", 450),
			(create_text_overlay, reg0, "str_choose_a_troop", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(position_set_x, 1, 100),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
			(team_get_faction, ":faction_team_no_multiplayer_my_player", ":team_no_multiplayer_my_player"),
			(try_for_range, ":number", 30, 46),
				(troop_set_slot, "trp_multiplayer_data", ":number", -1),
			(try_end),
			(assign, ":var_6", 0),
			(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer", "trp_multiplayer_end"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
				(str_store_troop_name, 1, ":troop"),
				(create_button_overlay, reg0, 1, 0),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value", ":var_6", 30),
				(troop_set_slot, "trp_multiplayer_data", ":value", reg0),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(val_add, ":var_6", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
			(team_get_faction, ":faction_team_no_multiplayer_my_player", ":team_no_multiplayer_my_player"),
			(assign, ":value", -1),
			(assign, ":value_2", 46),
			(try_for_range, ":localvariable", 30, ":value_2"),
				(troop_slot_eq, "trp_multiplayer_data", ":localvariable", ":trigger_param_1"),
				(store_sub, ":value_3", ":localvariable", 30),
				(assign, ":value_4", "trp_multiplayer_end"),
				(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer", ":value_4"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
					(val_sub, ":value_3", 1),
					(lt, ":value_3", 0),
					(assign, ":value", ":troop"),
					(assign, ":value_4", 0),
				(try_end),
				(try_begin),
					(multiplayer_get_my_troop, ":troop"),
					(neq, ":troop", ":value"),
					(player_set_troop_id, ":multiplayer_my_player", ":value"),
					(multiplayer_send_int_to_server, 20, ":value"),
					(call_script, "script_multiplayer_set_default_item_selections_for_troop", ":value"),
					(call_script, "script_multiplayer_send_item_selections"),
				(try_end),
				(presentation_set_duration, 0),
				(assign, "$g_presentation_state", 0),
				(start_presentation, "prsnt_multiplayer_item_select"),
				(assign, ":value_2", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(is_between, ":multiplayer_my_player", 0, 1000),
				(multiplayer_get_my_troop, ":multiplayer_my_troop"),
				(try_begin),
					(neg|is_between, ":multiplayer_my_troop", "trp_swadian_crossbowman_multiplayer", "trp_multiplayer_end"),
					(player_set_troop_id, ":multiplayer_my_player", -1),
					(multiplayer_send_int_to_server, 20, -1),
					(multiplayer_send_int_to_server, 19, 2),
					(player_set_team_no, ":multiplayer_my_player", 2),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_item_select", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(assign, "$g_presentation_obj_item_select_1", -1),
			(assign, "$g_presentation_obj_item_select_2", -1),
			(assign, "$g_presentation_obj_item_select_3", -1),
			(assign, "$g_presentation_obj_item_select_4", -1),
			(assign, "$g_presentation_obj_item_select_5", -1),
			(assign, "$g_presentation_obj_item_select_6", -1),
			(assign, "$g_presentation_obj_item_select_7", -1),
			(assign, "$g_presentation_obj_item_select_8", -1),
			(assign, "$g_presentation_obj_item_select_9", -1),
			(assign, "$g_presentation_obj_item_select_10", -1),
			(assign, "$g_presentation_obj_item_select_11", -1),
			(assign, "$g_presentation_obj_item_select_12", -1),
			(assign, "$g_presentation_obj_item_select_13", -1),
			(assign, "$g_presentation_obj_item_select_14", -1),
			(assign, "$g_presentation_obj_item_select_15", -1),
			(assign, "$g_presentation_obj_item_select_16", -1),
			(try_begin),
				(neq, "$g_current_opened_item_details", -1),
				(close_item_details),
				(assign, "$g_current_opened_item_details", -1),
			(try_end),
			(store_add, ":value", 2, 0),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_1", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 526),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_1", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_1", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_1", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 475),
			(overlay_set_position, "$g_presentation_obj_item_select_1", 1),
			(store_add, ":value", 2, 1),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_2", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 426),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_2", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_2", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_2", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 375),
			(overlay_set_position, "$g_presentation_obj_item_select_2", 1),
			(store_add, ":value", 2, 2),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_3", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 326),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_3", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_3", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_3", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 275),
			(overlay_set_position, "$g_presentation_obj_item_select_3", 1),
			(store_add, ":value", 2, 3),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_4", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 226),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_4", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_4", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_4", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 175),
			(overlay_set_position, "$g_presentation_obj_item_select_4", 1),
			(store_add, ":value", 2, 4),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_5", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 576),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_5", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_5", "mesh_mp_inventory_slot_helmet", "mesh_mp_inventory_slot_helmet"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_5", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 525),
			(overlay_set_position, "$g_presentation_obj_item_select_5", 1),
			(store_add, ":value", 2, 5),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_6", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 476),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_6", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_6", "mesh_mp_inventory_slot_armor", "mesh_mp_inventory_slot_armor"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_6", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 425),
			(overlay_set_position, "$g_presentation_obj_item_select_6", 1),
			(store_add, ":value", 2, 6),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_7", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 376),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_7", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_7", "mesh_mp_inventory_slot_boot", "mesh_mp_inventory_slot_boot"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_7", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 325),
			(overlay_set_position, "$g_presentation_obj_item_select_7", 1),
			(store_add, ":value", 2, 7),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_8", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 276),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_8", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_8", "mesh_mp_inventory_slot_glove", "mesh_mp_inventory_slot_glove"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_8", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 225),
			(overlay_set_position, "$g_presentation_obj_item_select_8", 1),
			(store_add, ":value", 2, 8),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(eq, "$g_horses_are_avaliable", 1),
				(create_image_button_overlay, "$g_presentation_obj_item_select_9", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 176),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_9", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_9", "mesh_mp_inventory_slot_horse", "mesh_mp_inventory_slot_horse"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_9", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_item_select_9", 1),
			(create_mesh_overlay, reg0, "mesh_mp_inventory_left"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 0),
			(position_set_y, 1, 14),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_mp_inventory_right"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 894),
			(position_set_y, 1, 65),
			(overlay_set_position, reg0, 1),
			(create_in_game_button_overlay, "$g_presentation_obj_item_select_10", "str_reset_to_default", 0),
			(overlay_set_color, "$g_presentation_obj_item_select_10", 16777215),
			(position_set_x, 1, 605),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_item_select_10", 1),
			(create_in_game_button_overlay, "$g_presentation_obj_item_select_11", "str_done", 0),
			(overlay_set_color, "$g_presentation_obj_item_select_11", 16777215),
			(position_set_x, 1, 395),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_item_select_11", 1),
			(assign, ":var_4", 725),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, ":team_no_multiplayer_my_player", 0),
				(try_begin),
					(gt, "$g_multiplayer_num_bots_team_1", 0),
					(assign, ":value_2", 1),
				(try_end),
			(else_try),
				(try_begin),
					(gt, "$g_multiplayer_num_bots_team_2", 0),
					(assign, ":value_2", 1),
				(try_end),
			(try_end),
			(team_get_faction, ":faction_team_no_multiplayer_my_player", ":team_no_multiplayer_my_player"),
			(try_begin),
				(eq, ":value_2", 1),
				(neq, "$g_multiplayer_game_type", 0),
				(neq, "$g_multiplayer_game_type", 7),
				(assign, ":var_8", 0),
				(try_begin),
					(eq, ":value_2", 1),
					(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer_ai", "trp_swadian_crossbowman_multiplayer"),
						(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
						(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
						(val_add, ":var_8", 1),
					(try_end),
				(try_end),
				(store_mul, ":value_3", ":var_8", 20),
				(val_add, ":value_3", 40),
				(create_mesh_overlay, reg0, "mesh_mp_ui_command_border_r"),
				(position_set_x, 1, 280),
				(position_set_y, 1, 680),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 2500),
				(position_set_y, 1, 2500),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_mp_ui_command_border_l"),
				(position_set_x, 1, 650),
				(position_set_y, 1, 680),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 2500),
				(position_set_y, 1, 2500),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_mp_ui_command_panel"),
				(position_set_x, 1, 350),
				(store_sub, ":value_4", 750, ":value_3"),
				(position_set_y, 1, ":value_4"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 3000),
				(position_set_y, 1, 3000),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_command", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 370),
				(position_set_y, 1, ":var_4"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":var_4", 20),
				(assign, ":var_13", 0),
				(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer_ai", "trp_swadian_crossbowman_multiplayer"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
					(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 377),
					(store_add, ":value_5", ":var_4", 2),
					(position_set_y, 1, ":value_5"),
					(overlay_set_position, reg0, 1),
					(try_begin),
						(eq, ":var_13", 0),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_1_wanted"),
						(assign, "$g_presentation_obj_item_select_13", reg0),
					(else_try),
						(eq, ":var_13", 1),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_2_wanted"),
						(assign, "$g_presentation_obj_item_select_14", reg0),
					(else_try),
						(eq, ":var_13", 2),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_3_wanted"),
						(assign, "$g_presentation_obj_item_select_15", reg0),
					(else_try),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_4_wanted"),
						(assign, "$g_presentation_obj_item_select_16", reg0),
					(try_end),
					(str_store_troop_name, 0, ":troop"),
					(create_text_overlay, reg0, "str_s0", 0),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 397),
					(position_set_y, 1, ":var_4"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_4", 20),
					(val_add, ":var_13", 1),
				(try_end),
				(val_sub, ":var_4", 20),
			(try_end),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_gold, ":gold_multiplayer_my_player", ":multiplayer_my_player"),
			(call_script, "script_multiplayer_calculate_cur_selected_items_cost", ":multiplayer_my_player", 1),
			(create_text_overlay, "$g_presentation_obj_item_select_12", "str_total_item_cost_reg0", 98308),
			(try_begin),
				(ge, ":gold_multiplayer_my_player", reg0),
				(overlay_set_color, "$g_presentation_obj_item_select_12", 16777215),
			(else_try),
				(overlay_set_color, "$g_presentation_obj_item_select_12", 16711680),
			(try_end),
			(position_set_x, 1, 680),
			(position_set_y, 1, 652),
			(overlay_set_position, "$g_presentation_obj_item_select_12", 1),
			(store_add, "$g_presentation_obj_item_select_next", "$g_presentation_obj_item_select_12", 1),
			(player_get_troop_id, ":troop_id_multiplayer_my_player", ":multiplayer_my_player"),
			(try_begin),
				(eq, "$g_presentation_state", 1),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 474),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 515),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 2),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 374),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 415),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 3),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 274),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 315),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 4),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 174),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 215),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 5),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 22, 24, 117, 524),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 565),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 6),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 19, 22, 117, 424),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 465),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 7),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 24, 26, 117, 324),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 365),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 8),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 26, 27, 117, 224),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 265),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 9),
				(eq, "$g_horses_are_avaliable", 1),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 18, 19, 117, 124),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 165),
				(overlay_set_position, reg0, 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, ":value", -1),
					(try_begin),
						(ge, ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(store_sub, ":value_2", ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(store_mod, ":value_3", ":value_2", 2),
						(store_sub, ":value_3", 1, ":value_3"),
						(val_div, ":value_2", 2),
						(store_add, ":value_4", 46, ":value_2"),
						(troop_get_slot, ":value", "trp_multiplayer_data", ":value_4"),
						(assign, ":value_5", ":trigger_param_1"),
						(val_add, ":value_5", ":value_3"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
						(store_add, ":value_6", 2, 1),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_1"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
						(store_add, ":value_6", 2, 2),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_2"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
						(store_add, ":value_6", 2, 3),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_3"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
						(store_add, ":value_6", 2, 4),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_4"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
						(store_add, ":value_6", 2, 5),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_5"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
						(store_add, ":value_6", 2, 6),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_6"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
						(store_add, ":value_6", 2, 7),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_7"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
						(store_add, ":value_6", 2, 8),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_8"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
						(eq, "$g_horses_are_avaliable", 1),
						(store_add, ":value_6", 2, 9),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_9"),
					(try_end),
					(try_begin),
						(ge, ":value", 0),
						(overlay_get_position, 0, ":value_5"),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_troop_id, ":troop_id_multiplayer_my_player", ":multiplayer_my_player"),
						(try_begin),
							(call_script, "script_cf_multiplayer_is_item_default_for_troop", ":value", ":troop_id_multiplayer_my_player"),
							(show_item_details, ":value", 0, 0),
						(else_try),
							(store_faction_of_troop, ":faction_of_troop_troop_id_multiplayer_my_player", ":troop_id_multiplayer_my_player"),
							(store_sub, ":value_7", ":faction_of_troop_troop_id_multiplayer_my_player", "fac_kingdom_1"),
							(val_add, ":value_7", 30),
							(item_get_slot, ":value_value_7", ":value", ":value_7"),
							(show_item_details, ":value", 0, ":value_value_7"),
						(try_end),
						(assign, "$g_current_opened_item_details", ":value"),
					(try_end),
				(else_try),
					(assign, ":value", -1),
					(try_begin),
						(ge, ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(store_sub, ":value_2", ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(val_div, ":value_2", 2),
						(store_add, ":value_4", 46, ":value_2"),
						(troop_get_slot, ":value", "trp_multiplayer_data", ":value_4"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
						(store_add, ":value_6", 2, 1),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_1"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
						(store_add, ":value_6", 2, 2),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_2"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
						(store_add, ":value_6", 2, 3),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_3"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
						(store_add, ":value_6", 2, 4),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_4"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
						(store_add, ":value_6", 2, 5),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_5"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
						(store_add, ":value_6", 2, 6),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_6"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
						(store_add, ":value_6", 2, 7),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_7"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
						(store_add, ":value_6", 2, 8),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_8"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
						(eq, "$g_horses_are_avaliable", 1),
						(store_add, ":value_6", 2, 9),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_9"),
					(try_end),
					(try_begin),
						(eq, "$g_current_opened_item_details", ":value"),
						(close_item_details),
						(assign, "$g_current_opened_item_details", -1),
					(try_end),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_troop_id, ":troop_id_multiplayer_my_player", ":multiplayer_my_player"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(eq, "$g_presentation_state", 0),
					(try_begin),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
						(assign, "$g_presentation_state", 1),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
						(assign, "$g_presentation_state", 2),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
						(assign, "$g_presentation_state", 3),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
						(assign, "$g_presentation_state", 4),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
						(assign, "$g_presentation_state", 5),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
						(assign, "$g_presentation_state", 6),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
						(assign, "$g_presentation_state", 7),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
						(assign, "$g_presentation_state", 8),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
						(eq, "$g_horses_are_avaliable", 1),
						(assign, "$g_presentation_state", 9),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(try_end),
				(else_try),
					(gt, "$g_presentation_state", 0),
					(store_sub, ":value", ":trigger_param_1", "$g_presentation_obj_item_select_next"),
					(val_div, ":value", 2),
					(assign, ":value_2", 146),
					(try_for_range, ":localvariable", 46, ":value_2"),
						(neg|troop_slot_eq, "trp_multiplayer_data", ":localvariable", -1),
						(store_sub, ":value_3", ":localvariable", 46),
						(eq, ":value", ":value_3"),
						(troop_get_slot, ":multiplayer_data_localvariable", "trp_multiplayer_data", ":localvariable"),
						(store_add, ":value_4", 2, "$g_presentation_state"),
						(val_sub, ":value_4", 1),
						(player_set_slot, ":multiplayer_my_player", ":value_4", ":multiplayer_data_localvariable"),
						(player_get_gold, ":gold_multiplayer_my_player", ":multiplayer_my_player"),
						(call_script, "script_multiplayer_calculate_cur_selected_items_cost", ":multiplayer_my_player", 1),
						(overlay_set_text, "$g_presentation_obj_item_select_12", "str_total_item_cost_reg0"),
						(try_begin),
							(ge, ":gold_multiplayer_my_player", reg0),
							(overlay_set_color, "$g_presentation_obj_item_select_12", 16777215),
						(else_try),
							(overlay_set_color, "$g_presentation_obj_item_select_12", 16711680),
						(try_end),
						(assign, ":value_2", 0),
					(try_end),
					(presentation_set_duration, 0),
					(assign, "$g_presentation_state", 0),
					(start_presentation, "prsnt_multiplayer_item_select"),
				(try_end),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_10"),
					(call_script, "script_multiplayer_set_default_item_selections_for_troop", ":troop_id_multiplayer_my_player"),
					(presentation_set_duration, 0),
					(assign, "$g_presentation_state", 0),
					(start_presentation, "prsnt_multiplayer_item_select"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_11"),
					(call_script, "script_multiplayer_send_item_selections"),
					(presentation_set_duration, 0),
					(try_begin),
						(try_begin),
							(eq, "$g_multiplayer_game_type", 6),
							(gt, "$g_multiplayer_number_of_respawn_count", 0),
							(ge, "$g_my_spawn_count", "$g_multiplayer_number_of_respawn_count"),
							(multiplayer_get_my_player, ":multiplayer_my_player"),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(this_or_next|eq, ":team_no_multiplayer_my_player", 0),
							(ge, "$g_my_spawn_count", 999),
							(assign, "$g_show_no_more_respawns_remained", 1),
						(else_try),
							(assign, "$g_show_no_more_respawns_remained", 0),
						(try_end),
						(eq, "$g_show_no_more_respawns_remained", 1),
						(store_mission_timer_a, "$g_multiplayer_respawn_start_time"),
						(start_presentation, "prsnt_multiplayer_respawn_time_counter"),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_13"),
					(assign, "$g_multiplayer_bot_type_1_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 35, ":trigger_param_2"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_14"),
					(assign, "$g_multiplayer_bot_type_2_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 36, ":trigger_param_2"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_15"),
					(assign, "$g_multiplayer_bot_type_3_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 37, ":trigger_param_2"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_16"),
					(assign, "$g_multiplayer_bot_type_4_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 38, ":trigger_param_2"),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(try_begin),
						(eq, "$g_presentation_state", 0),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(try_begin),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
							(store_add, ":value", 2, 0),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
							(store_add, ":value", 2, 1),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
							(store_add, ":value", 2, 2),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
							(store_add, ":value", 2, 3),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
							(store_add, ":value", 2, 4),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
							(store_add, ":value", 2, 5),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
							(store_add, ":value", 2, 6),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
							(store_add, ":value", 2, 7),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
							(eq, "$g_horses_are_avaliable", 1),
							(store_add, ":value", 2, 8),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(try_end),
					(else_try),
						(gt, "$g_presentation_state", 0),
						(presentation_set_duration, 0),
						(assign, "$g_presentation_state", 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(try_end),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(this_or_next|key_clicked, 1),
					(key_clicked, 248),
					(try_begin),
						(neq, "$g_current_opened_item_details", -1),
						(close_item_details),
						(assign, "$g_current_opened_item_details", -1),
					(try_end),
					(gt, ":trigger_param_1", 200),
					(presentation_set_duration, 0),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_message_1", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 12),
				(assign, ":value", "$g_multiplayer_message_value_1"),
				(try_begin),
					(eq, ":value", -1),
					(assign, ":value_2", 4294967295),
					(str_store_string, 0, "str_round_draw_no_one_remained"),
				(else_try),
					(try_begin),
						(eq, ":value", 0),
						(assign, ":value_2", 4281589009),
					(else_try),
						(assign, ":value_2", 4294919202),
					(try_end),
					(try_begin),
						(lt, "$my_team_at_start_of_round", 2),
						(try_begin),
							(eq, "$my_team_at_start_of_round", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
					(team_get_faction, ":faction_value", ":value"),
					(str_store_faction_name, 1, ":faction_value"),
					(str_store_string, 0, "str_s1_won_round"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(try_begin),
					(neq, ":value", -1),
					(position_set_x, 1, 375),
				(else_try),
					(position_set_x, 1, 400),
				(try_end),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 300),
			(else_try),
				(eq, "$g_multiplayer_message_type", 4),
				(agent_get_team, ":value", "$g_multiplayer_message_value_1"),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
							(play_sound, "snd_team_scored_a_point"),
						(else_try),
							(assign, ":value_2", 4294919202),
							(play_sound, "snd_enemy_scored_a_point"),
						(try_end),
					(try_end),
				(try_end),
				(str_store_string, 0, "str_s1_captured_flag"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 5),
				(try_begin),
					(ge, "$g_multiplayer_message_value_1", 0),
					(agent_get_team, ":team_l_g_multiplayer_message_value_1", "$g_multiplayer_message_value_1"),
					(team_get_faction, ":faction_team_l_g_multiplayer_message_value_1", ":team_l_g_multiplayer_message_value_1"),
					(str_store_faction_name, 1, ":faction_team_l_g_multiplayer_message_value_1"),
					(str_store_string, 0, "str_s1_returned_flag"),
				(else_try),
					(val_add, "$g_multiplayer_message_value_1", 1),
					(val_mul, "$g_multiplayer_message_value_1", -1),
					(assign, ":team_l_g_multiplayer_message_value_1", "$g_multiplayer_message_value_1"),
					(team_get_faction, ":faction_team_l_g_multiplayer_message_value_1", ":team_l_g_multiplayer_message_value_1"),
					(str_store_faction_name, 1, ":faction_team_l_g_multiplayer_message_value_1"),
					(str_store_string, 0, "str_s1_auto_returned_flag"),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(play_sound, "snd_flag_returned"),
					(try_end),
				(try_end),
				(assign, ":value_2", 4294967295),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 325),
				(position_set_y, 1, 400),
				(position_set_x, 1, 500),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 6),
				(agent_get_team, ":team_l_g_multiplayer_message_value_1_2", "$g_multiplayer_message_value_1"),
				(team_get_faction, ":faction_team_l_g_multiplayer_message_value_1_2", ":team_l_g_multiplayer_message_value_1_2"),
				(str_store_faction_name, 1, ":faction_team_l_g_multiplayer_message_value_1_2"),
				(assign, ":value_2", 4294967295),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":team_l_g_multiplayer_message_value_1_2"),
							(play_sound, "snd_enemy_flag_taken"),
						(else_try),
							(play_sound, "snd_your_flag_taken"),
						(try_end),
					(try_end),
				(try_end),
				(str_store_string, 0, "str_s1_taken_flag"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 365),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 9),
				(store_div, ":value", "$g_multiplayer_message_value_1", 100),
				(store_mod, reg0, "$g_multiplayer_message_value_1", 100),
				(val_sub, ":value", 1),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
							(play_sound, "snd_team_scored_a_point"),
						(else_try),
							(assign, ":value_2", 4294919202),
							(play_sound, "snd_enemy_scored_a_point"),
						(try_end),
					(try_end),
				(try_end),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(str_store_string, 0, "str_s1_captured_flag_reg0"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 345),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 10),
				(store_div, ":value", "$g_multiplayer_message_value_1", 100),
				(store_mod, reg0, "$g_multiplayer_message_value_1", 100),
				(val_sub, ":value", 1),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(play_sound, "snd_enemy_flag_taken"),
						(else_try),
							(play_sound, "snd_your_flag_taken"),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":value_2", 4294967295),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(str_store_string, 0, "str_s1_pulling_flag_reg0"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 345),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 8),
				(store_div, ":value", "$g_multiplayer_message_value_1", 100),
				(store_mod, reg0, "$g_multiplayer_message_value_1", 100),
				(val_sub, ":value", 1),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(play_sound, "snd_flag_returned"),
					(try_end),
				(try_end),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(str_store_string, 0, "str_s1_neutralized_flag_reg0"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 345),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 13),
				(assign, ":value", "$g_multiplayer_message_value_1"),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_multiplayer_message_value_1", 0),
					(str_store_string, 0, "str_s1_defended_castle"),
				(else_try),
					(eq, "$g_multiplayer_message_value_1", 1),
					(str_store_string, 0, "str_s1_captured_castle"),
				(else_try),
					(str_store_string, 0, "str_round_draw"),
					(assign, ":value_2", 4294967295),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(try_begin),
					(neq, "$g_multiplayer_message_value_1", -1),
					(position_set_x, 1, 325),
				(else_try),
					(position_set_x, 1, 400),
				(try_end),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 14),
				(assign, ":value_2", 4294967295),
				(str_store_string, 0, "str_round_draw"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 375),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 18),
				(assign, ":value_2", 4294967295),
				(str_store_string, 0, "str_death_mode_started"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 15),
				(try_begin),
					(lt, "$g_multiplayer_message_value_1", 0),
					(val_mul, "$g_multiplayer_message_value_1", -1),
					(assign, ":value_3", 0),
					(team_get_faction, ":faction_value", 1),
					(str_store_faction_name, 1, ":faction_value"),
				(else_try),
					(assign, ":value_3", 1),
					(team_get_faction, ":faction_value", 0),
					(str_store_faction_name, 1, ":faction_value"),
				(try_end),
				(try_begin),
					(eq, "$g_multiplayer_message_value_1", 1),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
						(neq, ":value_3", ":team_no_multiplayer_my_player"),
						(assign, ":value_2", 4281589009),
					(else_try),
						(assign, ":value_2", 4294919202),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_multiplayer_message_value_1", 9),
					(str_store_string, 0, "str_s1_destroyed_all_targets"),
				(else_try),
					(eq, "$g_multiplayer_message_value_1", 1),
					(str_store_string, 0, "str_s1_destroyed_catapult"),
				(else_try),
					(eq, "$g_multiplayer_message_value_1", 2),
					(str_store_string, 0, "str_s1_destroyed_trebuchet"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 16),
				(try_begin),
					(eq, "$g_defender_team", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", "$g_defender_team"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":var_14", "$g_multiplayer_message_value_1"),
				(team_get_faction, ":faction_value", "$g_defender_team"),
				(str_store_faction_name, 1, ":faction_value"),
				(try_begin),
					(eq, ":var_14", 1),
					(str_store_string, 0, "str_s1_saved_1_target"),
				(else_try),
					(eq, ":var_14", 2),
					(str_store_string, 0, "str_s1_saved_2_targets"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 17),
				(assign, ":value", "$g_multiplayer_message_value_1"),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_defender_team", 0),
					(team_get_faction, ":faction_value", 1),
				(else_try),
					(team_get_faction, ":faction_value", 0),
				(try_end),
				(str_store_faction_name, 1, ":faction_value"),
				(str_store_string, 0, "str_s1_won_round"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_2", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 2),
				(assign, ":value", 4294967295),
				(str_store_string, 0, "str_auto_team_balance_done"),
				(create_text_overlay, "$g_multiplayer_message_2", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_2", ":value"),
				(position_set_x, 1, 375),
				(position_set_x, 1, 500),
				(position_set_y, 1, 550),
				(overlay_set_position, "$g_multiplayer_message_2", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_2", 1),
				(presentation_set_duration, 300),
			(else_try),
				(eq, "$g_multiplayer_message_type", 3),
				(assign, ":value", 4294967295),
				(try_begin),
					(neq, "$g_multiplayer_game_type", 2),
					(neq, "$g_multiplayer_game_type", 3),
					(neq, "$g_multiplayer_game_type", 6),
					(str_store_string, 0, "str_auto_team_balance_in_20_seconds"),
					(position_set_x, 1, 375),
				(else_try),
					(str_store_string, 0, "str_auto_team_balance_next_round"),
					(position_set_x, 1, 375),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_2", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_2", ":value"),
				(position_set_y, 1, 550),
				(position_set_x, 1, 500),
				(overlay_set_position, "$g_multiplayer_message_2", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_2", 1),
				(presentation_set_duration, 300),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_3", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 7),
				(assign, ":var_1", 4294967295),
				(try_begin),
					(eq, "$g_multiplayer_message_value_3", 1),
					(str_store_string, 0, "str_poll_result_yes"),
				(else_try),
					(str_store_string, 0, "str_poll_result_no"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_3", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_3", ":var_1"),
				(position_set_x, 1, 380),
				(position_set_x, 1, 500),
				(position_set_y, 1, 475),
				(overlay_set_position, "$g_multiplayer_message_3", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_3", 1),
				(presentation_set_duration, 400),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_round_time_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_last_round_time_counter_value", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_round_time_counter_overlay", 0, 98308),
			(overlay_set_color, "$g_multiplayer_round_time_counter_overlay", 16777215),
			(position_set_x, 1, 900),
			(position_set_y, 1, 690),
			(overlay_set_position, "$g_multiplayer_round_time_counter_overlay", 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, "$g_multiplayer_round_time_counter_overlay", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, ":value", ":mission_timer_a", "$g_round_start_time"),
			(store_sub, ":value_2", "$g_multiplayer_round_max_seconds", ":value"),
			(val_max, ":value_2", 0),
			(try_begin),
				(neq, "$g_multiplayer_last_round_time_counter_value", ":value_2"),
				(assign, "$g_multiplayer_last_round_time_counter_value", ":value_2"),
				(store_div, reg0, ":value_2", 60),
				(store_div, reg1, ":value_2", 10),
				(val_mod, reg1, 6),
				(assign, reg2, ":value_2"),
				(val_mod, reg2, 10),
				(str_store_string, 0, "str_reg0_dd_reg1reg2"),
				(overlay_set_text, "$g_multiplayer_round_time_counter_overlay", 0),
			(try_end)
		])
	]),

	("multiplayer_team_score_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_team_1_last_displayed_score", -1),
			(assign, "$g_multiplayer_team_2_last_displayed_score", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_team_1_score_display_overlay", 0, 98308),
			(overlay_set_color, "$g_multiplayer_team_1_score_display_overlay", 16777215),
			(position_set_x, 1, 40),
			(position_set_y, 1, 700),
			(overlay_set_position, "$g_multiplayer_team_1_score_display_overlay", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_multiplayer_team_1_score_display_overlay", 1),
			(create_text_overlay, "$g_multiplayer_team_2_score_display_overlay", 0, 98308),
			(overlay_set_color, "$g_multiplayer_team_2_score_display_overlay", 16777215),
			(position_set_x, 1, 40),
			(position_set_y, 1, 645),
			(overlay_set_position, "$g_multiplayer_team_2_score_display_overlay", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_multiplayer_team_2_score_display_overlay", 1),
			(try_begin),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_4"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_1"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_2"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_2"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_3"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_3"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_5"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_4"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_6"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_5"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_6"),
			(try_end),
			(position_set_x, 3, 25),
			(position_set_y, 3, 715),
			(overlay_set_position, reg0, 3),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$g_multiplayer_team_1_faction", "$g_multiplayer_team_2_faction"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_7"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_4"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_1"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_2"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_2"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_3"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_3"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_5"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_4"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_6"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_5"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_6"),
			(try_end),
			(position_set_x, 3, 25),
			(position_set_y, 3, 660),
			(overlay_set_position, reg0, 3),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(team_get_score, ":score_0", 0),
			(team_get_score, ":score_1", 1),
			(try_begin),
				(this_or_next|neq, ":score_0", "$g_multiplayer_team_1_last_displayed_score"),
				(neq, ":score_1", "$g_multiplayer_team_2_last_displayed_score"),
				(assign, "$g_multiplayer_team_1_last_displayed_score", ":score_0"),
				(assign, "$g_multiplayer_team_2_last_displayed_score", ":score_1"),
				(str_store_faction_name, 0, "$g_multiplayer_team_1_faction"),
				(assign, reg0, ":score_0"),
				(overlay_set_text, "$g_multiplayer_team_1_score_display_overlay", "str_reg0"),
				(str_store_faction_name, 0, "$g_multiplayer_team_2_faction"),
				(assign, reg0, ":score_1"),
				(overlay_set_text, "$g_multiplayer_team_2_score_display_overlay", "str_reg0"),
			(try_end)
		])
	]),

	("multiplayer_flag_projection_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(store_sub, ":value", "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
			(val_add, ":value", "mesh_flag_project_sw"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_1", ":value"),
			(val_sub, ":value", "mesh_flag_project_sw"),
			(val_add, ":value", "mesh_flag_project_sw_miss"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_2", ":value"),
			(try_begin),
				(neq, "$g_multiplayer_team_1_faction", "$g_multiplayer_team_2_faction"),
				(store_sub, ":value", "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
				(val_add, ":value", "mesh_flag_project_sw"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_3", ":value"),
				(val_sub, ":value", "mesh_flag_project_sw"),
				(val_add, ":value", "mesh_flag_project_sw_miss"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_4", ":value"),
			(else_try),
				(assign, ":value", "mesh_flag_project_rb"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_3", ":value"),
				(assign, ":value", "mesh_flag_project_rb_miss"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_4", ":value"),
			(try_end),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_1", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_2", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_3", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_4", 1),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(set_fixed_point_multiplier, 1000),
			(scene_prop_get_instance, ":scene_prop_instance_team_1_flag_scene_prop_0", "$team_1_flag_scene_prop", 0),
			(team_get_slot, ":0_flag_situation", 0, slot_team_flag_situation),
			(try_begin),
				(neq, ":0_flag_situation", 1),
				(prop_instance_get_position, 1, ":scene_prop_instance_team_1_flag_scene_prop_0"),
			(else_try),
				(entry_point_get_position, 1, 64),
			(try_end),
			(position_move_z, 1, 200, 1),
			(scene_prop_get_instance, ":scene_prop_instance_team_2_flag_scene_prop_0", "$team_2_flag_scene_prop", 0),
			(team_get_slot, ":1_flag_situation", 1, slot_team_flag_situation),
			(try_begin),
				(neq, ":1_flag_situation", 1),
				(prop_instance_get_position, 2, ":scene_prop_instance_team_2_flag_scene_prop_0"),
			(else_try),
				(entry_point_get_position, 2, 65),
			(try_end),
			(position_move_z, 2, 200, 1),
			(position_get_screen_projection, 3, 1),
			(position_get_x, ":position_x_3", 3),
			(position_get_y, ":position_y_3", 3),
			(position_set_y, 3, ":position_y_3"),
			(try_begin),
				(is_between, ":position_x_3", -100, 1100),
				(is_between, ":position_y_3", -100, 850),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
				(else_try),
					(assign, ":team_no_multiplayer_my_player", 2),
				(try_end),
				(try_begin),
					(neq, ":team_no_multiplayer_my_player", 1),
					(try_begin),
						(neq, ":0_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
					(else_try),
						(try_begin),
							(eq, ":team_no_multiplayer_my_player", 0),
							(assign, ":value", 64),
						(else_try),
							(assign, ":value", 65),
						(try_end),
						(entry_point_get_position, 5, ":value"),
						(position_get_screen_projection, 3, 5),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_2", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
					(try_end),
				(else_try),
					(try_begin),
						(neq, ":0_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
					(try_end),
				(try_end),
			(else_try),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
			(try_end),
			(position_get_screen_projection, 3, 2),
			(position_get_x, ":position_x_3", 3),
			(position_get_y, ":position_y_3", 3),
			(position_set_y, 3, ":position_y_3"),
			(try_begin),
				(is_between, ":position_x_3", -100, 1100),
				(is_between, ":position_y_3", -100, 850),
				(team_get_slot, ":1_flag_situation", 1, slot_team_flag_situation),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
				(else_try),
					(assign, ":team_no_multiplayer_my_player", 2),
				(try_end),
				(try_begin),
					(neq, ":team_no_multiplayer_my_player", 0),
					(try_begin),
						(neq, ":1_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_3", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
					(else_try),
						(try_begin),
							(eq, ":team_no_multiplayer_my_player", 0),
							(assign, ":value", 64),
						(else_try),
							(assign, ":value", 65),
						(try_end),
						(entry_point_get_position, 5, ":value"),
						(position_get_screen_projection, 3, 5),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_4", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
					(try_end),
				(else_try),
					(try_begin),
						(neq, ":1_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_3", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
					(try_end),
				(try_end),
			(else_try),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
			(try_end)
		])
	]),

	("multiplayer_flag_projection_display_bt", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(store_sub, ":value", "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
			(val_add, ":value", "mesh_flag_project_sw"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_1", ":value"),
			(try_begin),
				(neq, "$g_multiplayer_team_1_faction", "$g_multiplayer_team_2_faction"),
				(store_sub, ":value", "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
				(val_add, ":value", "mesh_flag_project_sw"),
			(else_try),
				(assign, ":value", "mesh_flag_project_rb"),
			(try_end),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_3", ":value"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_1", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_3", 1),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(eq, "$g_round_ended", 0),
				(set_fixed_point_multiplier, 1000),
				(scene_prop_get_instance, ":scene_prop_instance_team_1_flag_scene_prop_0", "$team_1_flag_scene_prop", 0),
				(prop_instance_get_position, 1, ":scene_prop_instance_team_1_flag_scene_prop_0"),
				(position_move_z, 1, 250, 1),
				(scene_prop_get_instance, ":scene_prop_instance_team_2_flag_scene_prop_0", "$team_2_flag_scene_prop", 0),
				(prop_instance_get_position, 2, ":scene_prop_instance_team_2_flag_scene_prop_0"),
				(position_move_z, 2, 250, 1),
				(position_get_screen_projection, 3, 1),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
				(try_end),
				(position_get_screen_projection, 3, 2),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_3", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
				(try_end),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_destructible_targets_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_defender_team", 0),
				(store_sub, ":value", "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
			(else_try),
				(store_sub, ":value", "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
			(try_end),
			(val_add, ":value", "mesh_flag_project_sw"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_1", ":value"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_2", ":value"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_1", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_2", 1),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(eq, "$g_round_ended", 0),
				(set_fixed_point_multiplier, 1000),
				(scene_prop_get_instance, ":scene_prop_instance_g_destructible_target_1_0", "$g_destructible_target_1", 0),
				(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_1_0"),
				(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_1_0"),
				(position_move_z, 1, 250, 1),
				(scene_prop_get_instance, ":scene_prop_instance_g_destructible_target_2_0", "$g_destructible_target_2", 0),
				(prop_instance_get_position, 2, ":scene_prop_instance_g_destructible_target_2_0"),
				(prop_instance_get_position, 2, ":scene_prop_instance_g_destructible_target_2_0"),
				(position_move_z, 2, 250, 1),
				(position_get_screen_projection, 3, 1),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(prop_instance_get_starting_position, 0, ":scene_prop_instance_g_destructible_target_1_0"),
					(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_1_0"),
					(get_sq_distance_between_positions_in_meters, ":sq_distance_between_positions_in_meters_0_1", 0, 1),
					(le, ":sq_distance_between_positions_in_meters_0_1", 2),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
				(try_end),
				(position_get_screen_projection, 3, 2),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(prop_instance_get_starting_position, 0, ":scene_prop_instance_g_destructible_target_2_0"),
					(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_2_0"),
					(get_sq_distance_between_positions_in_meters, ":sq_distance_between_positions_in_meters_0_1", 0, 1),
					(le, ":sq_distance_between_positions_in_meters_0_1", 2),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_2", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
				(try_end),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_respawn_time_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_respawn_counter_overlay", -1),
			(assign, "$g_multiplayer_respawn_remained_overlay", -1),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 13),
				(this_or_next|eq, "$g_round_ended", 1),
				(eq, "$g_flag_is_not_ready", 1),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 0),
			(assign, "$g_multiplayer_last_respawn_counter_value", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_respawn_counter_overlay", 0, 65552),
			(overlay_set_color, "$g_multiplayer_respawn_counter_overlay", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_multiplayer_respawn_counter_overlay", 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, "$g_multiplayer_respawn_counter_overlay", 1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_respawn_remained_overlay", 0, 65552),
			(overlay_set_color, "$g_multiplayer_respawn_remained_overlay", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 570),
			(overlay_set_position, "$g_multiplayer_respawn_remained_overlay", 1),
			(position_set_x, 1, 1400),
			(position_set_y, 1, 1400),
			(overlay_set_size, "$g_multiplayer_respawn_remained_overlay", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(ge, "$g_multiplayer_respawn_counter_overlay", 0),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(ge, ":multiplayer_my_player", 0),
				(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
				(try_begin),
					(eq, ":team_no_multiplayer_my_player", 2),
					(presentation_set_duration, 0),
				(else_try),
					(store_mission_timer_a, ":mission_timer_a"),
					(store_sub, ":value", ":mission_timer_a", "$g_multiplayer_respawn_start_time"),
					(try_begin),
						(eq, "$g_show_no_more_respawns_remained", 0),
						(assign, ":value_2", "$g_multiplayer_respawn_period"),
						(try_begin),
							(eq, "$g_multiplayer_game_type", 6),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(eq, ":team_no_multiplayer_my_player", 0),
							(val_add, ":value_2", 27),
						(try_end),
					(else_try),
						(assign, ":value_2", 6),
					(try_end),
					(store_sub, ":value_3", ":value_2", ":value"),
					(try_begin),
						(le, ":value_3", 0),
						(presentation_set_duration, 0),
					(else_try),
						(neq, "$g_multiplayer_last_respawn_counter_value", ":value_3"),
						(assign, "$g_multiplayer_last_respawn_counter_value", ":value_3"),
						(try_begin),
							(eq, "$g_show_no_more_respawns_remained", 0),
							(assign, reg0, ":value_3"),
							(str_store_string, 0, "str_respawning_in_reg0_seconds"),
							(try_begin),
								(gt, "$g_multiplayer_number_of_respawn_count", 0),
								(store_sub, reg0, "$g_multiplayer_number_of_respawn_count", "$g_my_spawn_count"),
								(multiplayer_get_my_player, ":multiplayer_my_player"),
								(player_get_team_no, ":team_no_multiplayer_my_player_2", ":multiplayer_my_player"),
								(eq, ":team_no_multiplayer_my_player_2", 0),
								(try_begin),
									(gt, reg0, 1),
									(str_store_string, 1, "str_reg0_respawns_remained"),
								(else_try),
									(str_store_string, 1, "str_this_is_your_last_respawn"),
								(try_end),
							(else_try),
								(str_clear, 1),
							(try_end),
						(else_try),
							(eq, "$g_show_no_more_respawns_remained", 1),
							(str_store_string, 0, "str_no_more_respawns_remained_this_round"),
							(str_clear, 1),
							(str_store_string, 1, "str_wait_next_round"),
						(try_end),
						(overlay_set_text, "$g_multiplayer_respawn_counter_overlay", 0),
						(overlay_set_text, "$g_multiplayer_respawn_remained_overlay", 1),
					(try_end),
				(try_end),
			(else_try),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 13),
				(this_or_next|eq, "$g_round_ended", 1),
				(eq, "$g_flag_is_not_ready", 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_stats_chart", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_score_b"),
			(position_set_x, 1, 100),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(assign, ":var_1", 0),
			(assign, ":var_2", 0),
			(assign, ":var_3", 0),
			(get_max_players, ":max_players"),
			(try_for_range, ":localvariable", 0, ":max_players"),
				(store_add, ":value", ":localvariable", 186),
				(try_begin),
					(player_is_active, ":localvariable"),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_localvariable", ":localvariable"),
					(try_begin),
						(eq, ":team_no_localvariable", 0),
						(val_add, ":var_1", 1),
					(else_try),
						(eq, ":team_no_localvariable", 1),
						(val_add, ":var_2", 1),
					(else_try),
						(eq, ":team_no_localvariable", 2),
						(val_add, ":var_3", 1),
					(try_end),
				(else_try),
					(troop_set_slot, "trp_multiplayer_data", ":value", 0),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$g_multiplayer_num_bots_team_1", 0),
				(val_add, ":var_1", 1),
			(try_end),
			(try_begin),
				(gt, "$g_multiplayer_num_bots_team_2", 0),
				(val_add, ":var_2", 1),
			(try_end),
			(assign, ":var_8", ":var_1"),
			(val_max, ":var_8", ":var_2"),
			(val_add, ":var_8", ":var_3"),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_stats_chart_container", 0, 131072),
			(position_set_x, 1, 100),
			(position_set_y, 1, 120),
			(overlay_set_position, "$g_presentation_obj_stats_chart_container", 1),
			(position_set_x, 1, 746),
			(position_set_y, 1, 530),
			(overlay_set_area_size, "$g_presentation_obj_stats_chart_container", 1),
			(set_container_overlay, "$g_presentation_obj_stats_chart_container"),
			(store_mul, ":value_2", ":var_8", 20),
			(val_add, ":value_2", 100),
			(try_begin),
				(gt, ":var_3", 0),
				(val_add, ":value_2", 70),
			(try_end),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(gt, ":value_2", 490),
				(assign, "$g_stats_chart_update_period", 8),
			(else_try),
				(assign, "$g_stats_chart_update_period", 1),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 5),
				(call_script, "script_get_headquarters_scores"),
				(assign, ":var_11", reg0),
				(assign, ":var_12", reg1),
			(try_end),
			(try_for_range, ":number", 0, 2),
				(assign, ":var_14", 0),
				(get_max_players, ":max_players"),
				(try_for_range, ":localvariable", 0, ":max_players"),
					(player_is_active, ":localvariable"),
					(player_get_team_no, ":team_no_localvariable_2", ":localvariable"),
					(eq, ":team_no_localvariable_2", ":number"),
					(val_add, ":var_14", 1),
				(try_end),
				(assign, reg0, ":var_14"),
				(try_begin),
					(neq, ":var_14", 1),
					(create_text_overlay, reg1, "str_reg0_players", 0),
				(else_try),
					(create_text_overlay, reg1, "str_reg0_player", 0),
				(try_end),
				(assign, ":value_3", ":value_2"),
				(team_get_faction, ":faction_number", ":number"),
				(str_store_faction_name, 1, ":faction_number"),
				(create_text_overlay, reg0, 1, 0),
				(try_begin),
					(eq, ":number", 0),
					(overlay_set_color, reg0, 16711680),
					(overlay_set_color, reg1, 16711680),
				(else_try),
					(overlay_set_color, reg0, 39423),
					(overlay_set_color, reg1, 39423),
				(try_end),
				(assign, ":var_18", 373),
				(store_mul, ":value_4", ":var_18", ":number"),
				(val_add, ":value_4", 42),
				(store_add, ":value_5", ":value_4", 15),
				(position_set_x, 3, ":value_5"),
				(position_set_y, 3, ":value_3"),
				(store_add, ":value_6", ":value_4", 35),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_3"),
				(copy_position, 2, 1),
				(store_sub, ":value_7", ":value_3", 10),
				(position_set_x, 2, ":value_6"),
				(position_set_y, 2, ":value_7"),
				(overlay_set_position, reg0, 1),
				(overlay_set_position, reg1, 2),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(position_set_x, 2, 600),
				(position_set_y, 2, 600),
				(overlay_set_size, reg0, 1),
				(overlay_set_size, reg1, 2),
				(team_get_faction, ":faction_0", 0),
				(team_get_faction, ":faction_1", 1),
				(try_begin),
					(eq, ":faction_0", ":faction_1"),
					(eq, ":number", 1),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_7"),
				(else_try),
					(eq, ":faction_number", "fac_kingdom_4"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_1"),
				(else_try),
					(eq, ":faction_number", "fac_kingdom_2"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_2"),
				(else_try),
					(eq, ":faction_number", "fac_kingdom_3"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_3"),
				(else_try),
					(eq, ":faction_number", "fac_kingdom_5"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_4"),
				(else_try),
					(eq, ":faction_number", "fac_kingdom_6"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_5"),
				(else_try),
					(eq, ":faction_number", "fac_kingdom_1"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_6"),
				(try_end),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_position, reg0, 3),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(team_get_score, reg0, ":number"),
				(create_text_overlay, reg0, "str_score_reg0", 8),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 325),
				(store_add, ":value_9", ":value_3", 0),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1200),
				(position_set_y, 1, 1200),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$g_multiplayer_game_type", 5),
					(try_begin),
						(eq, ":number", 0),
						(assign, reg0, ":var_11"),
					(else_try),
						(eq, ":number", 1),
						(assign, reg0, ":var_12"),
					(try_end),
					(create_text_overlay, reg0, "str_flags_reg0", 0),
					(overlay_set_color, reg0, 16777215),
					(store_add, ":value_8", ":value_4", 258),
					(store_add, ":value_9", ":value_3", -10),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_9"),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 600),
					(position_set_y, 1, 600),
					(overlay_set_size, reg0, 1),
				(try_end),
				(val_sub, ":value_3", 60),
				(create_text_overlay, reg0, "str_player_name", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(this_or_next|eq, "$g_multiplayer_game_type", 4),
					(eq, "$g_multiplayer_game_type", 5),
					(create_text_overlay, reg0, "str_score", 0),
					(overlay_set_color, reg0, 16777215),
					(store_add, ":value_8", ":value_4", 138),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_3"),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
				(try_end),
				(create_text_overlay, reg0, "str_kills", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 206),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_deaths", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 260),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_ping", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 308),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_alpha, reg0, 208),
				(store_add, ":value_8", ":value_4", 0),
				(position_set_x, 1, ":value_8"),
				(store_add, ":value_9", ":value_3", -10),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 16500),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", 35),
				(store_add, ":value_10", ":max_players", 1),
				(try_for_range, ":unused", 0, ":value_10"),
					(assign, ":value_11", -30030),
					(assign, ":value_12", -1),
					(try_for_range, ":localvariable", 0, ":max_players"),
						(store_add, ":value", ":localvariable", 186),
						(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
						(player_get_team_no, ":team_no_localvariable", ":localvariable"),
						(eq, ":team_no_localvariable", ":number"),
						(try_begin),
							(this_or_next|eq, "$g_multiplayer_game_type", 4),
							(eq, "$g_multiplayer_game_type", 5),
							(player_get_score, ":score_localvariable", ":localvariable"),
						(else_try),
							(player_get_kill_count, ":score_localvariable", ":localvariable"),
						(try_end),
						(player_get_death_count, ":death_count_localvariable", ":localvariable"),
						(store_mul, ":value_13", ":score_localvariable", 1000),
						(val_sub, ":value_13", ":death_count_localvariable"),
						(this_or_next|gt, ":value_13", ":value_11"),
						(eq, ":value_13", -30030),
						(assign, ":value_11", ":value_13"),
						(assign, ":value_12", ":localvariable"),
					(try_end),
					(try_begin),
						(ge, ":value_12", 0),
						(store_add, ":value", ":value_12", 186),
						(troop_set_slot, "trp_multiplayer_data", ":value", 0),
						(try_begin),
							(eq, ":multiplayer_my_player", ":value_12"),
							(create_mesh_overlay, reg0, "mesh_white_plane"),
							(overlay_set_color, reg0, 16777215),
							(overlay_set_alpha, reg0, 53),
							(store_add, ":value_8", ":value_4", 0),
							(position_set_x, 1, ":value_8"),
							(store_add, ":value_9", ":value_3", 0),
							(position_set_y, 1, ":value_9"),
							(overlay_set_position, reg0, 1),
							(position_set_x, 1, 16500),
							(position_set_y, 1, 1000),
							(overlay_set_size, reg0, 1),
						(try_end),
						(try_begin),
							(this_or_next|eq, "$g_multiplayer_game_type", 4),
							(eq, "$g_multiplayer_game_type", 5),
							(assign, ":value_14", 16777215),
							(player_get_agent_id, ":agent_id_value_12", ":value_12"),
							(try_begin),
								(this_or_next|lt, ":agent_id_value_12", 0),
								(neg|agent_is_alive, ":agent_id_value_12"),
								(assign, ":value_14", 16711680),
							(try_end),
							(player_get_score, reg0, ":value_12"),
							(create_text_overlay, reg0, "str_reg0", 8),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(store_add, ":value_8", ":value_4", 165),
							(position_set_x, 1, ":value_8"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
						(else_try),
							(assign, ":value_14", 16777215),
							(player_get_agent_id, ":agent_id_value_12", ":value_12"),
							(try_begin),
								(this_or_next|lt, ":agent_id_value_12", 0),
								(neg|agent_is_alive, ":agent_id_value_12"),
								(assign, ":value_14", 16711680),
								(create_text_overlay, reg0, "str_dead", 0),
								(overlay_set_color, reg0, ":value_14"),
								(position_set_x, 1, 750),
								(position_set_y, 1, 750),
								(overlay_set_size, reg0, 1),
								(store_add, ":value_8", ":value_4", 130),
								(position_set_x, 1, ":value_8"),
								(position_set_y, 1, ":value_3"),
								(overlay_set_position, reg0, 1),
							(try_end),
						(try_end),
						(str_store_player_username, 1, ":value_12"),
						(create_text_overlay, reg0, 1, 0),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, ":value_4"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(player_get_kill_count, reg0, ":value_12"),
						(create_text_overlay, reg0, "str_reg0", 8),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(store_add, ":value_8", ":value_4", 215),
						(position_set_x, 1, ":value_8"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(player_get_death_count, reg0, ":value_12"),
						(create_text_overlay, reg0, "str_reg0", 8),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(store_add, ":value_8", ":value_4", 265),
						(position_set_x, 1, ":value_8"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(player_get_ping, reg0, ":value_12"),
						(create_text_overlay, reg0, "str_reg0", 8),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(store_add, ":value_8", ":value_4", 315),
						(position_set_x, 1, ":value_8"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(val_sub, ":value_3", 20),
					(else_try),
						(try_begin),
							(try_begin),
								(eq, ":number", 0),
								(assign, ":value_15", "$g_multiplayer_num_bots_team_1"),
							(else_try),
								(assign, ":value_15", "$g_multiplayer_num_bots_team_2"),
							(try_end),
							(team_get_bot_kill_count, reg0, ":number"),
							(team_get_bot_death_count, reg1, ":number"),
							(try_begin),
								(this_or_next|neq, reg0, 0),
								(this_or_next|neq, reg1, 0),
								(neq, ":value_15", 0),
								(assign, ":value_16", 1),
							(else_try),
								(assign, ":value_16", 0),
							(try_end),
							(eq, ":value_16", 1),
							(assign, ":var_38", 0),
							(try_for_agents, ":var_39"),
								(agent_is_non_player, ":var_39"),
								(agent_is_alive, ":var_39"),
								(agent_get_team, ":team_var_39", ":var_39"),
								(eq, ":team_var_39", ":number"),
								(val_add, ":var_38", 1),
							(try_end),
							(store_sub, ":value_17", ":value_15", ":var_38"),
							(try_begin),
								(eq, ":var_38", 0),
								(assign, ":value_14", 16711680),
							(else_try),
								(assign, ":value_14", 13684944),
							(try_end),
							(try_begin),
								(gt, ":value_17", 0),
								(try_begin),
									(eq, ":value_15", 1),
									(create_text_overlay, reg0, "str_dead", 0),
									(store_add, ":value_8", ":value_4", 130),
								(else_try),
									(assign, reg0, ":value_17"),
									(create_text_overlay, reg0, "str_reg0_dead", 0),
									(store_add, ":value_8", ":value_4", 123),
								(try_end),
								(overlay_set_color, reg0, ":value_14"),
								(position_set_x, 1, 750),
								(position_set_y, 1, 750),
								(overlay_set_size, reg0, 1),
								(position_set_x, 1, ":value_8"),
								(position_set_y, 1, ":value_3"),
								(overlay_set_position, reg0, 1),
							(try_end),
							(try_begin),
								(gt, ":value_15", 1),
								(assign, reg0, ":value_15"),
								(create_text_overlay, reg0, "str_bots_reg0_agents", 0),
							(else_try),
								(create_text_overlay, reg0, "str_bot_1_agent", 0),
							(try_end),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(position_set_x, 1, ":value_4"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
							(team_get_bot_kill_count, reg0, ":number"),
							(create_text_overlay, reg0, "str_reg0", 8),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(store_add, ":value_8", ":value_4", 215),
							(position_set_x, 1, ":value_8"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
							(team_get_bot_death_count, reg0, ":number"),
							(create_text_overlay, reg0, "str_reg0", 8),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(store_add, ":value_8", ":value_4", 265),
							(position_set_x, 1, ":value_8"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
							(val_sub, ":value_3", 20),
						(try_end),
						(assign, ":value_10", 0),
					(try_end),
				(try_end),
				(try_begin),
					(eq, ":number", 0),
					(assign, ":var_42", ":value_3"),
				(try_end),
			(try_end),
			(try_begin),
				(le, ":var_42", ":value_3"),
				(assign, ":value_3", ":var_42"),
			(try_end),
			(assign, ":value_4", 42),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 208),
			(store_add, ":value_8", ":value_4", 0),
			(position_set_x, 1, ":value_8"),
			(store_add, ":value_9", ":value_3", 10),
			(position_set_y, 1, ":value_9"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 36000),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(gt, ":var_3", 0),
				(assign, ":value_4", 280),
				(val_sub, ":value_3", 50),
				(create_text_overlay, reg0, "str_spectators", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_ping", 8),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 215),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_alpha, reg0, 208),
				(store_add, ":value_8", ":value_4", 0),
				(position_set_x, 1, ":value_8"),
				(store_add, ":value_9", ":value_3", -10),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 12000),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", 30),
				(assign, ":value_14", 12632256),
				(store_add, ":value_10", ":max_players", 1),
				(try_for_range, ":localvariable", 0, ":value_10"),
					(store_add, ":value", ":localvariable", 186),
					(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_localvariable", ":localvariable"),
					(eq, ":team_no_localvariable", 2),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(try_begin),
						(eq, ":multiplayer_my_player", ":localvariable"),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 53),
						(store_add, ":value_8", ":value_4", 0),
						(position_set_x, 1, ":value_8"),
						(store_add, ":value_9", ":value_3", 0),
						(position_set_y, 1, ":value_9"),
						(overlay_set_position, reg0, 1),
						(position_set_x, 1, 12000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
					(try_end),
					(str_store_player_username, 1, ":localvariable"),
					(create_text_overlay, reg0, 1, 0),
					(overlay_set_color, reg0, ":value_14"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":value_3"),
					(overlay_set_position, reg0, 1),
					(player_get_ping, reg0, ":localvariable"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, ":value_14"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_8", ":value_4", 215),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_3"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":value_3", 20),
				(try_end),
			(try_end),
			(omit_key_once, 238),
			(omit_key_once, 239),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 238),
				(key_clicked, 239),
				(omit_key_once, 238),
				(omit_key_once, 239),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_stats_chart_opened_manually", 1),
				(neg|game_key_is_down, 18),
				(assign, "$g_multiplayer_stats_chart_opened_manually", 0),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(store_mul, ":value", "$g_stats_chart_update_period", 1000),
				(gt, ":trigger_param_1", ":value"),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_stats_chart"),
			(try_end)
		])
	]),

	("multiplayer_stats_chart_deathmatch", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_score_a"),
			(position_set_x, 1, 295),
			(position_set_y, 1, 115),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(assign, ":var_1", 0),
			(assign, ":var_2", 0),
			(get_max_players, ":max_players"),
			(try_for_range, ":localvariable", 0, ":max_players"),
				(store_add, ":value", ":localvariable", 186),
				(try_begin),
					(player_is_active, ":localvariable"),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_localvariable", ":localvariable"),
					(try_begin),
						(this_or_next|eq, ":team_no_localvariable", 0),
						(eq, ":team_no_localvariable", 1),
						(val_add, ":var_1", 1),
					(else_try),
						(eq, ":team_no_localvariable", 2),
						(val_add, ":var_2", 1),
					(try_end),
				(else_try),
					(troop_set_slot, "trp_multiplayer_data", ":value", 0),
				(try_end),
			(try_end),
			(try_begin),
				(this_or_next|gt, "$g_multiplayer_num_bots_team_1", 0),
				(gt, "$g_multiplayer_num_bots_team_2", 0),
				(val_add, ":var_1", 1),
			(try_end),
			(store_add, ":value_2", ":var_1", ":var_2"),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_stats_chart_deathmatch_container", 0, 131072),
			(position_set_x, 1, 300),
			(position_set_y, 1, 140),
			(overlay_set_position, "$g_presentation_obj_stats_chart_deathmatch_container", 1),
			(position_set_x, 1, 346),
			(position_set_y, 1, 530),
			(overlay_set_area_size, "$g_presentation_obj_stats_chart_deathmatch_container", 1),
			(set_container_overlay, "$g_presentation_obj_stats_chart_deathmatch_container"),
			(store_mul, ":value_3", ":value_2", 20),
			(val_add, ":value_3", 80),
			(try_begin),
				(gt, ":var_2", 0),
				(val_add, ":value_3", 70),
			(try_end),
			(try_begin),
				(ge, ":value_2", 17),
				(assign, "$g_stats_chart_update_period", 10),
			(else_try),
				(assign, "$g_stats_chart_update_period", 1),
			(try_end),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(assign, ":var_10", ":value_3"),
			(assign, ":value_4", 42),
			(create_text_overlay, reg0, "str_player_name", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_kills", 16),
			(overlay_set_color, reg0, 16777215),
			(store_add, ":value_5", ":value_4", 179),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_deaths", 16),
			(overlay_set_color, reg0, 16777215),
			(store_add, ":value_5", ":value_4", 233),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_ping", 16),
			(overlay_set_color, reg0, 16777215),
			(store_add, ":value_5", ":value_4", 282),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 208),
			(store_add, ":value_5", ":value_4", 0),
			(position_set_x, 1, ":value_5"),
			(store_add, ":value_6", ":var_10", -10),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 15250),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(val_sub, ":var_10", 35),
			(store_add, ":value_7", ":max_players", 1),
			(try_for_range, ":unused", 0, ":value_7"),
				(assign, ":value_8", -30030),
				(assign, ":value_9", -1),
				(try_for_range, ":localvariable", 0, ":max_players"),
					(store_add, ":value", ":localvariable", 186),
					(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_localvariable", ":localvariable"),
					(this_or_next|eq, ":team_no_localvariable", 0),
					(eq, ":team_no_localvariable", 1),
					(player_get_kill_count, ":kill_count_localvariable", ":localvariable"),
					(player_get_death_count, ":death_count_localvariable", ":localvariable"),
					(store_mul, ":value_10", ":kill_count_localvariable", 1000),
					(val_sub, ":value_10", ":death_count_localvariable"),
					(this_or_next|gt, ":value_10", ":value_8"),
					(eq, ":value_10", -30030),
					(assign, ":value_8", ":value_10"),
					(assign, ":value_9", ":localvariable"),
				(try_end),
				(try_begin),
					(ge, ":value_9", 0),
					(store_add, ":value", ":value_9", 186),
					(troop_set_slot, "trp_multiplayer_data", ":value", 0),
					(str_store_player_username, 1, ":value_9"),
					(try_begin),
						(eq, ":multiplayer_my_player", ":value_9"),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 53),
						(store_add, ":value_5", ":value_4", 0),
						(position_set_x, 1, ":value_5"),
						(store_add, ":value_6", ":var_10", 0),
						(position_set_y, 1, ":value_6"),
						(overlay_set_position, reg0, 1),
						(position_set_x, 1, 16000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
					(try_end),
					(create_text_overlay, reg0, 1, 0),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_kill_count, reg0, ":value_9"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 188),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_death_count, reg0, ":value_9"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 238),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_ping, reg0, ":value_9"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 288),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_10", 20),
				(else_try),
					(store_add, ":value_11", "$g_multiplayer_num_bots_team_1", "$g_multiplayer_num_bots_team_2"),
					(ge, ":value_11", 1),
					(try_begin),
						(gt, ":value_11", 1),
						(assign, reg0, ":value_11"),
						(create_text_overlay, reg0, "str_bots_reg0_agents", 0),
					(else_try),
						(create_text_overlay, reg0, "str_bot_1_agent", 0),
					(try_end),
					(overlay_set_color, reg0, 13684944),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(team_get_bot_kill_count, reg0, 0),
					(assign, ":var_22", reg0),
					(team_get_bot_kill_count, reg0, 1),
					(val_add, ":var_22", reg0),
					(assign, reg0, ":var_22"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 13684944),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 188),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(team_get_bot_death_count, reg0, 0),
					(assign, ":var_23", reg0),
					(team_get_bot_death_count, reg0, 1),
					(val_add, ":var_23", reg0),
					(assign, reg0, ":var_23"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 13684944),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 238),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_10", 20),
					(assign, ":value_7", 0),
				(else_try),
					(assign, ":value_7", 0),
				(try_end),
			(try_end),
			(assign, ":value_4", 42),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 208),
			(store_add, ":value_5", ":value_4", 0),
			(position_set_x, 1, ":value_5"),
			(store_add, ":value_6", ":var_10", 10),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 15250),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(gt, ":var_2", 0),
				(assign, ":value_4", 75),
				(val_sub, ":var_10", 50),
				(create_text_overlay, reg0, "str_spectators", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_ping", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_5", ":value_4", 218),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_alpha, reg0, 208),
				(store_add, ":value_5", ":value_4", 0),
				(position_set_x, 1, ":value_5"),
				(store_add, ":value_6", ":var_10", -10),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 12000),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(val_sub, ":var_10", 30),
				(assign, ":var_24", 12632256),
				(store_add, ":value_7", ":max_players", 1),
				(try_for_range, ":localvariable", 0, ":value_7"),
					(store_add, ":value", ":localvariable", 186),
					(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_localvariable", ":localvariable"),
					(eq, ":team_no_localvariable", 2),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(try_begin),
						(eq, ":multiplayer_my_player", ":localvariable"),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 53),
						(store_add, ":value_5", ":value_4", 0),
						(position_set_x, 1, ":value_5"),
						(store_add, ":value_6", ":var_10", 0),
						(position_set_y, 1, ":value_6"),
						(overlay_set_position, reg0, 1),
						(position_set_x, 1, 12000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
					(try_end),
					(str_store_player_username, 1, ":localvariable"),
					(create_text_overlay, reg0, 1, 0),
					(overlay_set_color, reg0, ":var_24"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_ping, reg0, ":localvariable"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, ":var_24"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 215),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_10", 20),
				(try_end),
			(try_end),
			(omit_key_once, 238),
			(omit_key_once, 239),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 238),
				(key_clicked, 239),
				(omit_key_once, 238),
				(omit_key_once, 239),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_stats_chart_opened_manually", 1),
				(neg|game_key_is_down, 18),
				(assign, "$g_multiplayer_stats_chart_opened_manually", 0),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(store_mul, ":value", "$g_stats_chart_update_period", 1000),
				(gt, ":trigger_param_1", ":value"),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_stats_chart_deathmatch"),
			(try_end)
		])
	]),

	("multiplayer_escape_menu", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_escape_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_escape_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 550),
			(overlay_set_area_size, "$g_presentation_obj_escape_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_escape_menu_container"),
			(assign, ":var_1", 500),
			(create_text_overlay, reg0, "str_choose_an_option", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(create_button_overlay, "$g_presentation_obj_escape_menu_1", "str_choose_faction", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_1", 16777215),
			(multiplayer_get_my_team, ":multiplayer_my_team"),
			(assign, "$g_presentation_obj_escape_menu_2", -1),
			(assign, "$g_presentation_obj_escape_menu_3", -1),
			(assign, "$g_presentation_obj_escape_menu_6", -1),
			(assign, "$g_presentation_obj_escape_menu_7", -1),
			(assign, "$g_presentation_obj_escape_menu_8", -1),
			(assign, "$g_presentation_obj_escape_menu_9", -1),
			(assign, "$g_presentation_obj_escape_menu_10", -1),
			(assign, "$g_presentation_obj_escape_menu_11", -1),
			(assign, "$g_presentation_obj_escape_menu_12", -1),
			(assign, "$g_presentation_obj_escape_menu_13", -1),
			(try_begin),
				(lt, ":multiplayer_my_team", 2),
				(create_button_overlay, "$g_presentation_obj_escape_menu_2", "str_choose_troop", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_2", 16777215),
				(multiplayer_get_my_troop, ":multiplayer_my_troop"),
				(try_begin),
					(ge, ":multiplayer_my_troop", 0),
					(create_button_overlay, "$g_presentation_obj_escape_menu_3", "str_choose_items", 0),
					(overlay_set_color, "$g_presentation_obj_escape_menu_3", 16777215),
				(try_end),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_escape_menu_4", "str_options", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_4", 16777215),
			(create_button_overlay, "$g_presentation_obj_escape_menu_5", "str_redefine_keys", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_5", 16777215),
			(create_button_overlay, "$g_presentation_obj_escape_menu_13", "@Show game rules", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_13", 16777215),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_maps_voteable", 1),
				(this_or_next|eq, "$g_multiplayer_factions_voteable", 1),
				(this_or_next|gt, "$g_multiplayer_num_bots_voteable", 0),
				(this_or_next|eq, "$g_multiplayer_kick_voteable", 1),
				(eq, "$g_multiplayer_ban_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_escape_menu_6", "str_submit_a_poll", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_6", 16777215),
				(assign, "$g_presentation_obj_escape_menu_6_available", 1),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_slot, ":multiplayer_my_player_poll_disabled_until_time", ":multiplayer_my_player", slot_player_poll_disabled_until_time),
					(store_mission_timer_a, ":mission_timer_a"),
					(lt, ":mission_timer_a", ":multiplayer_my_player_poll_disabled_until_time"),
					(overlay_set_color, "$g_presentation_obj_escape_menu_6", 8947848),
					(overlay_set_hilight_color, "$g_presentation_obj_escape_menu_6", 8947848),
					(assign, "$g_presentation_obj_escape_menu_6_available", 0),
				(try_end),
			(try_end),
			(try_begin),
				(ge, ":multiplayer_my_player", 0),
				(player_is_admin, ":multiplayer_my_player"),
				(create_button_overlay, "$g_presentation_obj_escape_menu_7", "str_administrator_panel", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_7", 16777215),
				(create_button_overlay, "$g_presentation_obj_escape_menu_8", "str_kick_player", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_8", 16777215),
				(create_button_overlay, "$g_presentation_obj_escape_menu_9", "str_ban_player", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_9", 16777215),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_escape_menu_11", "str_mute_player", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_11", 16777215),
			(try_begin),
				(assign, "$g_presentation_obj_escape_menu_12", -1),
				(assign, ":value", 0),
				(get_max_players, ":max_players"),
				(try_for_range, ":localvariable", 0, ":max_players"),
					(player_is_active, ":localvariable"),
					(player_get_is_muted, ":is_muted_localvariable", ":localvariable"),
					(eq, ":is_muted_localvariable", 1),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(create_button_overlay, "$g_presentation_obj_escape_menu_12", "str_unmute_player", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_12", 16777215),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_escape_menu_10", "str_quit", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_10", 16777215),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_1", 1),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_2", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_2", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_3", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_3", 1),
			(try_end),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_4", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_5", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_13", 1),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_6", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_6", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_7", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_7", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_8", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_8", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_9", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_9", 1),
			(try_end),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_11", 1),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_12", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_12", 1),
			(try_end),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_10", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_1"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_2"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_troop_select"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_3"),
				(presentation_set_duration, 0),
				(assign, "$g_presentation_state", 0),
				(start_presentation, "prsnt_multiplayer_item_select"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_4"),
				(presentation_set_duration, 0),
				(change_screen_options),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_5"),
				(presentation_set_duration, 0),
				(change_screen_controls),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_6"),
				(eq, "$g_presentation_obj_escape_menu_6_available", 1),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_poll_menu"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_7"),
				(presentation_set_duration, 0),
				(multiplayer_send_message_to_server, 18),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_8"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 3),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_9"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 4),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_10"),
				(presentation_set_duration, 0),
				(finish_mission, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_11"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 5),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_12"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 6),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_13"),
				(presentation_set_duration, 0),
				(multiplayer_send_message_to_server, 45),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_doghotel_multiplayer_brainy_bots_installed_on_server", 1),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(player_is_active, ":multiplayer_my_player"),
				(player_is_admin, ":multiplayer_my_player"),
				(create_button_overlay, "$g_presentation_obj_doghotel_45", "str_doghotel_brainy_bots", 65540),
				(position_set_x, 1, 285),
				(position_set_y, 1, 0),
				(overlay_set_position, "$g_presentation_obj_doghotel_45", 1),
				(overlay_set_color, "$g_presentation_obj_doghotel_45", 11133370),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_presentation_obj_doghotel_45", ":trigger_param_1"),
				(presentation_set_duration, 0),
				(neg|is_presentation_active, "prsnt_doghotel_configure"),
				(start_presentation, "prsnt_doghotel_configure"),
			(try_end)
		])
	]),

	("multiplayer_poll_menu", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_poll_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_poll_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_poll_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_poll_menu_container"),
			(assign, "$g_presentation_obj_poll_menu_1", -1),
			(assign, "$g_presentation_obj_poll_menu_4", -1),
			(assign, "$g_presentation_obj_poll_menu_5", -1),
			(assign, ":var_1", 450),
			(create_text_overlay, reg0, "str_choose_a_poll_type", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(position_set_x, 1, 60),
			(try_begin),
				(eq, "$g_multiplayer_maps_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_1", "str_poll_for_changing_the_map", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_1", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_1", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_factions_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_4", "str_poll_for_changing_the_map_and_factions", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_4", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_4", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(gt, "$g_multiplayer_num_bots_voteable", 0),
				(create_button_overlay, "$g_presentation_obj_poll_menu_5", "str_poll_for_changing_number_of_bots", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_5", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_5", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_kick_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_2", "str_poll_for_kicking_a_player", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_2", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_2", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_ban_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_3", "str_poll_for_banning_a_player", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_3", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_3", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_1"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_maps_list_action_type", 1),
				(start_presentation, "prsnt_multiplayer_show_maps_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_2"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 1),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_3"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 2),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_4"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_maps_list_action_type", 2),
				(start_presentation, "prsnt_multiplayer_show_maps_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_5"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_number_of_bots_list_action_type", 1),
				(start_presentation, "prsnt_multiplayer_show_number_of_bots_list"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_players_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_players_1", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_players_1", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_players_1", 1),
			(set_container_overlay, "$g_presentation_obj_show_players_1"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(assign, ":var_2", 10),
			(get_max_players, ":max_players"),
			(try_for_range, ":localvariable", 1, ":max_players"),
				(player_is_active, ":localvariable"),
				(assign, ":value", 0),
				(try_begin),
					(neq, "$g_multiplayer_players_list_action_type", 5),
					(neq, "$g_multiplayer_players_list_action_type", 6),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 5),
					(neq, ":localvariable", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_localvariable", ":localvariable"),
					(eq, ":is_muted_localvariable", 0),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 6),
					(neq, ":localvariable", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_localvariable", ":localvariable"),
					(eq, ":is_muted_localvariable", 1),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(val_add, ":var_2", 40),
			(try_end),
			(create_text_overlay, reg0, "str_choose_a_player", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_2", 40),
			(get_max_players, ":max_players"),
			(try_for_range, ":localvariable", 1, ":max_players"),
				(player_is_active, ":localvariable"),
				(player_set_slot, ":localvariable", slot_player_button_index, -1),
				(assign, ":value", 0),
				(try_begin),
					(neq, "$g_multiplayer_players_list_action_type", 5),
					(neq, "$g_multiplayer_players_list_action_type", 6),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 5),
					(neq, ":localvariable", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_localvariable", ":localvariable"),
					(eq, ":is_muted_localvariable", 0),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 6),
					(neq, ":localvariable", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_localvariable", ":localvariable"),
					(eq, ":is_muted_localvariable", 1),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(str_store_player_username, 0, ":localvariable"),
				(create_button_overlay, ":var_7", 0, 0),
				(overlay_set_color, ":var_7", 16777215),
				(position_set_x, 1, 130),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, ":var_7", 1),
				(val_sub, ":var_2", 40),
				(player_set_slot, ":localvariable", slot_player_button_index, ":var_7"),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(get_max_players, ":max_players"),
			(try_for_range, ":localvariable", 1, ":max_players"),
				(player_is_active, ":localvariable"),
				(player_slot_eq, ":localvariable", slot_player_button_index, ":trigger_param_1"),
				(try_begin),
					(is_between, "$g_multiplayer_players_list_action_type", 1, 3),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_2_int_to_server, 21, "$g_multiplayer_players_list_action_type", ":localvariable"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 3),
					(multiplayer_send_int_to_server, 23, ":localvariable"),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 4),
					(multiplayer_send_int_to_server, 24, ":localvariable"),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 5),
					(player_set_is_muted, ":localvariable", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 6),
					(player_set_is_muted, ":localvariable", 0),
				(try_end),
				(assign, ":max_players", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_maps_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_maps_list_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_maps_list_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_maps_list_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_show_maps_list_menu_container"),
			(call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
			(assign, ":var_1", reg0),
			(store_mul, ":value", ":var_1", 40),
			(val_add, ":value", 10),
			(create_text_overlay, reg0, "str_choose_a_map", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":value"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value", 40),
			(assign, ":value_2", -1),
			(try_for_range, ":localvariable", 0, ":var_1"),
				(store_add, ":value_3", ":localvariable", 0),
				(troop_get_slot, ":multiplayer_data_value_3", "trp_multiplayer_data", ":value_3"),
				(store_sub, ":value_4", ":multiplayer_data_value_3", "scn_multi_scene_1"),
				(val_add, ":value_4", "str_multi_scene_1"),
				(str_store_string, 0, ":value_4"),
				(create_button_overlay, ":value_2", 0, 0),
				(overlay_set_color, ":value_2", 16777215),
				(position_set_x, 1, 100),
				(position_set_y, 1, ":value"),
				(overlay_set_position, ":value_2", 1),
				(val_sub, ":value", 40),
			(try_end),
			(store_add, "$g_show_maps_list_button_list_end_index", ":value_2", 1),
			(store_sub, "$g_show_maps_list_button_list_first_index", "$g_show_maps_list_button_list_end_index", ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_for_range, ":var_2", "$g_show_maps_list_button_list_first_index", "$g_show_maps_list_button_list_end_index"),
				(eq, ":trigger_param_1", ":var_2"),
				(call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
				(store_sub, ":value", ":trigger_param_1", "$g_show_maps_list_button_list_first_index"),
				(val_add, ":value", 0),
				(troop_get_slot, ":multiplayer_data_value", "trp_multiplayer_data", ":value"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$g_multiplayer_maps_list_action_type", 1),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_2_int_to_server, 21, 0, ":multiplayer_data_value"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(assign, "$g_multiplayer_factions_list_action_type", 1),
					(assign, "$g_multiplayer_poll_for_map_and_faction_data_map", ":multiplayer_data_value"),
					(start_presentation, "prsnt_multiplayer_show_factions_list"),
				(try_end),
				(assign, "$g_show_maps_list_button_list_end_index", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_factions_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_factions_list_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_factions_list_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_factions_list_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_show_factions_list_menu_container"),
			(store_sub, ":value", "fac_kingdoms_end", "fac_kingdom_1"),
			(try_begin),
				(eq, "$g_multiplayer_factions_list_action_type", 2),
				(val_sub, ":value", 1),
			(try_end),
			(store_mul, ":value_2", ":value", 40),
			(val_add, ":value_2", 10),
			(assign, reg0, "$g_multiplayer_factions_list_action_type"),
			(create_text_overlay, reg0, "str_choose_a_faction_for_team_reg0", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 40),
			(assign, ":value_3", -1),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(this_or_next|eq, "$g_multiplayer_factions_list_action_type", 1),
				(neq, "$g_multiplayer_poll_for_map_and_faction_data_faction_1", ":faction"),
				(str_store_faction_name, 0, ":faction"),
				(create_button_overlay, ":value_3", 0, 0),
				(overlay_set_color, ":value_3", 16777215),
				(position_set_x, 1, 100),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_3", 1),
				(val_sub, ":value_2", 40),
			(try_end),
			(store_add, "$g_show_factions_list_button_list_end_index", ":value_3", 1),
			(store_sub, "$g_show_factions_list_button_list_first_index", "$g_show_factions_list_button_list_end_index", ":value"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_for_range, ":var_2", "$g_show_factions_list_button_list_first_index", "$g_show_factions_list_button_list_end_index"),
				(eq, ":trigger_param_1", ":var_2"),
				(store_sub, ":value", ":trigger_param_1", "$g_show_factions_list_button_list_first_index"),
				(val_add, ":value", "fac_kingdom_1"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$g_multiplayer_factions_list_action_type", 2),
					(try_begin),
						(ge, ":value", "$g_multiplayer_poll_for_map_and_faction_data_faction_1"),
						(val_add, ":value", 1),
					(try_end),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_4_int_to_server, 21, 3, "$g_multiplayer_poll_for_map_and_faction_data_map", "$g_multiplayer_poll_for_map_and_faction_data_faction_1", ":value"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(assign, "$g_multiplayer_factions_list_action_type", 2),
					(assign, "$g_multiplayer_poll_for_map_and_faction_data_faction_1", ":value"),
					(start_presentation, "prsnt_multiplayer_show_factions_list"),
				(try_end),
				(assign, "$g_show_factions_list_button_list_end_index", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_number_of_bots_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_number_of_bots_list_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_number_of_bots_list_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_number_of_bots_list_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_show_number_of_bots_list_menu_container"),
			(assign, ":var_1", 0),
			(store_add, ":value", "$g_multiplayer_num_bots_voteable", 1),
			(try_for_range, ":localvariable", 0, ":value"),
				(assign, ":value_2", ":localvariable"),
				(val_mod, ":value_2", 5),
				(this_or_next|lt, ":localvariable", 10),
				(eq, ":value_2", 0),
				(val_add, ":var_1", 1),
			(try_end),
			(store_mul, ":value_3", ":var_1", 40),
			(val_add, ":value_3", 10),
			(assign, reg0, "$g_multiplayer_number_of_bots_list_action_type"),
			(create_text_overlay, reg0, "str_choose_number_of_bots_for_team_reg0", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", 40),
			(assign, ":value_4", -1),
			(try_for_range, ":localvariable", 0, ":value"),
				(assign, ":value_2", ":localvariable"),
				(val_mod, ":value_2", 5),
				(this_or_next|lt, ":localvariable", 10),
				(eq, ":value_2", 0),
				(assign, reg0, ":localvariable"),
				(str_store_string, 0, "str_reg0"),
				(create_button_overlay, ":value_4", 0, 0),
				(overlay_set_color, ":value_4", 16777215),
				(position_set_x, 1, 100),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, ":value_4", 1),
				(val_sub, ":value_3", 40),
			(try_end),
			(store_add, "$g_show_number_of_bots_list_button_list_end_index", ":value_4", 1),
			(store_sub, "$g_show_number_of_bots_list_button_list_first_index", "$g_show_number_of_bots_list_button_list_end_index", ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_for_range, ":var_2", "$g_show_number_of_bots_list_button_list_first_index", "$g_show_number_of_bots_list_button_list_end_index"),
				(eq, ":trigger_param_1", ":var_2"),
				(store_sub, ":value", ":trigger_param_1", "$g_show_number_of_bots_list_button_list_first_index"),
				(try_begin),
					(lt, ":value", 10),
					(assign, ":value_2", ":value"),
				(else_try),
					(store_sub, ":value_2", ":value", 8),
					(val_mul, ":value_2", 5),
				(try_end),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$g_multiplayer_number_of_bots_list_action_type", 2),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_3_int_to_server, 21, 4, "$g_multiplayer_poll_number_of_bots_team_1", ":value_2"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(assign, "$g_multiplayer_number_of_bots_list_action_type", 2),
					(assign, "$g_multiplayer_poll_number_of_bots_team_1", ":value_2"),
					(start_presentation, "prsnt_multiplayer_show_number_of_bots_list"),
				(try_end),
				(assign, "$g_show_number_of_bots_list_button_list_end_index", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_poll", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 68),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 37500),
			(position_set_y, 1, 4500),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$g_multiplayer_poll_to_show", 0),
				(store_sub, ":value", "$g_multiplayer_poll_value_to_show", "scn_multi_scene_1"),
				(val_add, ":value", "str_multi_scene_1"),
				(str_store_string, 0, ":value"),
				(create_text_overlay, reg0, "str_poll_change_map", 16),
			(else_try),
				(eq, "$g_multiplayer_poll_to_show", 1),
				(str_store_player_username, 0, "$g_multiplayer_poll_value_to_show"),
				(create_text_overlay, reg0, "str_poll_kick_player", 16),
			(else_try),
				(eq, "$g_multiplayer_poll_to_show", 2),
				(str_store_player_username, 0, "$g_multiplayer_poll_value_to_show"),
				(create_text_overlay, reg0, "str_poll_ban_player", 16),
			(else_try),
				(eq, "$g_multiplayer_poll_to_show", 3),
				(store_sub, ":value", "$g_multiplayer_poll_value_to_show", "scn_multi_scene_1"),
				(val_add, ":value", "str_multi_scene_1"),
				(str_store_string, 0, ":value"),
				(str_store_faction_name, 1, "$g_multiplayer_poll_value_2_to_show"),
				(str_store_faction_name, 2, "$g_multiplayer_poll_value_3_to_show"),
				(create_text_overlay, reg0, "str_poll_change_map_with_faction", 131088),
			(else_try),
				(assign, reg0, "$g_multiplayer_poll_value_to_show"),
				(assign, reg1, "$g_multiplayer_poll_value_2_to_show"),
				(str_store_faction_name, 0, "$g_multiplayer_team_1_faction"),
				(str_store_faction_name, 1, "$g_multiplayer_team_2_faction"),
				(create_text_overlay, reg0, "str_poll_change_number_of_bots", 131088),
			(try_end),
			(overlay_set_color, reg0, 16777215),
			(try_begin),
				(neq, "$g_multiplayer_poll_to_show", 3),
				(neq, "$g_multiplayer_poll_to_show", 4),
				(position_set_x, 1, 400),
				(position_set_y, 1, 100),
				(overlay_set_position, reg0, 1),
			(else_try),
				(position_set_x, 1, 50),
				(position_set_y, 1, 70),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 60),
				(overlay_set_area_size, reg0, 1),
			(try_end),
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, "$g_multiplayer_poll_last_written_seconds_left", "$g_multiplayer_poll_client_end_time", ":mission_timer_a"),
			(assign, reg0, "$g_multiplayer_poll_last_written_seconds_left"),
			(create_text_overlay, "$g_presentation_obj_poll_1", "str_poll_time_left", 32776),
			(overlay_set_color, "$g_presentation_obj_poll_1", 16777215),
			(position_set_x, 1, 790),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_poll_1", 1),
			(omit_key_once, 2),
			(omit_key_once, 3),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 248),
				(key_clicked, 3),
				(gt, ":trigger_param_1", 500),
				(multiplayer_send_int_to_server, 22, 0),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(else_try),
				(key_clicked, 2),
				(gt, ":trigger_param_1", 500),
				(multiplayer_send_int_to_server, 22, 1),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(try_end),
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, ":value", "$g_multiplayer_poll_client_end_time", ":mission_timer_a"),
			(try_begin),
				(neq, ":value", "$g_multiplayer_poll_last_written_seconds_left"),
				(try_begin),
					(lt, ":value", 0),
					(clear_omitted_keys),
					(presentation_set_duration, 0),
				(else_try),
					(assign, "$g_multiplayer_poll_last_written_seconds_left", ":value"),
					(assign, reg0, "$g_multiplayer_poll_last_written_seconds_left"),
					(overlay_set_text, "$g_presentation_obj_poll_1", "str_poll_time_left"),
				(try_end),
			(try_end)
		])
	]),

	("tutorial_show_mouse_movement", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(try_begin),
				(this_or_next|eq, "$g_tutorial_mouse_dir", -1),
				(eq, "$g_tutorial_mouse_click", -1),
				(presentation_set_duration, 0),
			(else_try),
				(set_fixed_point_multiplier, 1000),
				(assign, "$g_tutorial_displayed_mouse_dir", "$g_tutorial_mouse_dir"),
				(assign, "$g_tutorial_displayed_mouse_click", "$g_tutorial_mouse_click"),
				(store_add, ":value", "$g_tutorial_mouse_dir", "mesh_mouse_arrow_down"),
				(create_mesh_overlay, reg0, ":value"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 380),
				(position_set_y, 1, 500),
				(overlay_set_position, reg0, 1),
				(try_begin),
					(eq, "$g_tutorial_mouse_click", 0),
					(create_mesh_overlay, reg0, "mesh_mouse_left_click"),
				(else_try),
					(create_mesh_overlay, reg0, "mesh_mouse_right_click"),
				(try_end),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 540),
				(position_set_y, 1, 500),
				(overlay_set_position, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_mouse_arrow_plus"),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 470),
				(position_set_y, 1, 510),
				(overlay_set_position, reg0, 1),
				(presentation_set_duration, 999999),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|neq, "$g_tutorial_displayed_mouse_dir", "$g_tutorial_mouse_dir"),
				(neq, "$g_tutorial_displayed_mouse_click", "$g_tutorial_mouse_click"),
				(presentation_set_duration, 0),
				(try_begin),
					(ge, "$g_tutorial_mouse_dir", 0),
					(ge, "$g_tutorial_mouse_click", 0),
					(start_presentation, "prsnt_tutorial_show_mouse_movement"),
				(try_end),
			(try_end)
		])
	]),

	("name_kingdom", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_name_kingdom_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_name_kingdom_1"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(try_begin),
				(eq, "$players_kingdom_name_set", 1),
				(str_store_faction_name, 7, "fac_player_supporters_faction"),
				(overlay_set_text, "$g_presentation_obj_name_kingdom_1", 7),
			(else_try),
				(str_store_troop_name, 0, "trp_player"),
				(overlay_set_text, "$g_presentation_obj_name_kingdom_1", "str_default_kingdom_name"),
				(str_store_string, 7, "str_default_kingdom_name"),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_name_kingdom_2", "@Continue...", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(str_store_string, 7, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_2"),
				(faction_set_name, "fac_player_supporters_faction", 7),
				(assign, "$players_kingdom_name_set", 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_banner_selection_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_button_overlay, "$g_presentation_obj_banner_selection_1", "@Next Page", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_banner_selection_1", 1),
			(assign, ":value", 150),
			(assign, ":var_2", 575),
			(assign, ":var_3", "mesh_banner_x21"),
			(store_mul, ":value_2", 16, "$g_presentation_page_no"),
			(val_add, ":value_2", "mesh_banner_a01"),
			(store_add, ":value_3", ":value_2", 16),
			(val_min, ":var_3", ":value_3"),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_banner_selection_1", 1),
			(try_for_range, ":var_6", ":value_2", ":var_3"),
				(create_image_button_overlay, reg1, ":var_6", ":var_6"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(val_add, ":value", 100),
				(ge, ":value", 900),
				(assign, ":value", 150),
				(val_sub, ":var_2", 250),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_banner_selection_1"),
				(val_add, "$g_presentation_page_no", 1),
				(val_mod, "$g_presentation_page_no", 30),
				(start_presentation, "prsnt_banner_selection"),
			(else_try),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_banner_start"),
				(store_mul, ":value_2", 16, "$g_presentation_page_no"),
				(val_add, ":value", ":value_2"),
				(store_add, ":value_3", ":value", "icon_banner_01"),
				(party_set_banner_icon, "p_main_party", ":value_3"),
				(store_add, ":value_4", ":value", "spr_banner_a"),
				(troop_set_slot, "trp_player", slot_troop_banner_scene_prop, ":value_4"),
				(presentation_set_duration, 0),
				(try_for_range, ":party", "p_town_1_1", "p_village_1_1"),
					(try_begin),
						(party_slot_eq, ":party", slot_town_lord, "trp_player"),
						(party_set_banner_icon, ":party", ":value_3"),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 252),
				(key_clicked, 253),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("custom_banner", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(troop_get_slot, ":player_custom_banner_flag_type", "trp_player", slot_troop_custom_banner_flag_type),
			(val_max, ":player_custom_banner_flag_type", 0),
			(val_add, ":player_custom_banner_flag_type", "mesh_custom_banner_01"),
			(troop_get_slot, ":player_custom_banner_map_flag_type", "trp_player", slot_troop_custom_banner_map_flag_type),
			(val_max, ":player_custom_banner_map_flag_type", 0),
			(val_add, ":player_custom_banner_map_flag_type", "mesh_custom_map_banner_01"),
			(troop_get_slot, ":player_custom_banner_bg_color_1", "trp_player", slot_troop_custom_banner_bg_color_1),
			(troop_get_slot, ":player_custom_banner_bg_color_2", "trp_player", slot_troop_custom_banner_bg_color_2),
			(create_text_overlay, reg1, "str_color_no_1", 0),
			(position_set_x, 1, 40),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_color_no_2", 0),
			(position_set_x, 1, 40),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_22", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_bg_color_1"),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_23", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_bg_color_2"),
			(position_set_x, 1, 200),
			(position_set_y, 1, 565),
			(overlay_set_position, "$g_presentation_obj_custom_banner_22", 1),
			(position_set_y, 1, 515),
			(overlay_set_position, "$g_presentation_obj_custom_banner_23", 1),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_custom_banner_22", 1),
			(overlay_set_size, "$g_presentation_obj_custom_banner_23", 1),
			(create_button_overlay, "$g_presentation_obj_custom_banner_2", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_3", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_4", "str_change_background", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_5", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_19", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_20", "str_accept", 16),
			(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
			(create_button_overlay, "$g_presentation_obj_custom_banner_16", "str_randomize", 16),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_17", ":player_custom_banner_flag_type", "tableau_custom_banner_default", "trp_player"),
			(try_begin),
				(eq, ":player_custom_banner_map_flag_type", "mesh_custom_map_banner_01"),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_18", ":player_custom_banner_map_flag_type", "tableau_custom_banner_square", "trp_player"),
			(else_try),
				(eq, ":player_custom_banner_map_flag_type", "mesh_custom_map_banner_02"),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_18", ":player_custom_banner_map_flag_type", "tableau_custom_banner_short", "trp_player"),
			(else_try),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_18", ":player_custom_banner_map_flag_type", "tableau_custom_banner_tall", "trp_player"),
			(try_end),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_1", -1, "tableau_custom_banner_square_no_mesh", "trp_player"),
			(create_text_overlay, reg1, "str_sample_banner", 16),
			(position_set_x, 1, 825),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_sample_map_banner", 16),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 640),
			(overlay_set_position, "$g_presentation_obj_custom_banner_17", 1),
			(position_set_x, 1, 780),
			(position_set_y, 1, 315),
			(overlay_set_position, "$g_presentation_obj_custom_banner_18", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, "$g_presentation_obj_custom_banner_17", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, "$g_presentation_obj_custom_banner_18", 1),
			(create_text_overlay, reg1, "str_number_of_charges", 0),
			(position_set_x, 1, 40),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(assign, reg1, ":player_custom_banner_num_charges"),
			(create_text_overlay, reg2, "str_reg1", 16),
			(position_set_x, 1, 350),
			(position_set_y, 1, 350),
			(overlay_set_position, reg2, 1),
			(try_begin),
				(lt, ":player_custom_banner_num_charges", 4),
				(create_button_overlay, "$g_presentation_obj_custom_banner_15", "str_plus", 16),
				(position_set_x, 1, 385),
				(position_set_y, 1, 350),
				(overlay_set_position, "$g_presentation_obj_custom_banner_15", 1),
			(else_try),
				(assign, "$g_presentation_obj_custom_banner_15", -1),
			(try_end),
			(try_begin),
				(gt, ":player_custom_banner_num_charges", 0),
				(create_button_overlay, "$g_presentation_obj_custom_banner_21", "str_minus", 16),
				(position_set_x, 1, 370),
				(position_set_y, 1, 350),
				(overlay_set_position, "$g_presentation_obj_custom_banner_21", 1),
			(else_try),
				(assign, "$g_presentation_obj_custom_banner_21", -1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 1),
				(create_text_overlay, reg1, "str_charge", 16),
				(position_set_x, 1, 300),
				(position_set_y, 1, 300),
				(overlay_set_position, reg1, 1),
				(create_text_overlay, reg1, "str_color", 16),
				(position_set_x, 1, 550),
				(position_set_y, 1, 300),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_14", "str_change_charge_position", 16),
				(position_set_y, 1, 350),
				(position_set_x, 1, 550),
				(overlay_set_position, "$g_presentation_obj_custom_banner_14", 1),
				(create_text_overlay, reg1, "str_charge_no_1", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 240),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_6", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_6", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_7", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_7", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_1),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_24", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 255),
				(overlay_set_position, "$g_presentation_obj_custom_banner_24", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_24", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_1),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_28", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 255),
				(overlay_set_position, "$g_presentation_obj_custom_banner_28", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_28", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_32", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 240),
				(overlay_set_position, "$g_presentation_obj_custom_banner_32", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_33", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_33", 1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 2),
				(create_text_overlay, reg1, "str_charge_no_2", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 180),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_8", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_8", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_9", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_9", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_2),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_25", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 195),
				(overlay_set_position, "$g_presentation_obj_custom_banner_25", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_25", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_2),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_29", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 195),
				(overlay_set_position, "$g_presentation_obj_custom_banner_29", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_29", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_34", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 180),
				(overlay_set_position, "$g_presentation_obj_custom_banner_34", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_35", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_35", 1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 3),
				(create_text_overlay, reg1, "str_charge_no_3", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 120),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_10", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_10", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_11", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_11", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_3),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_26", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 135),
				(overlay_set_position, "$g_presentation_obj_custom_banner_26", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_26", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_3),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_30", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 135),
				(overlay_set_position, "$g_presentation_obj_custom_banner_30", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_30", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_36", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 120),
				(overlay_set_position, "$g_presentation_obj_custom_banner_36", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_37", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_37", 1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 4),
				(create_text_overlay, reg1, "str_charge_no_4", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 60),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_12", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_12", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_13", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_13", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_4),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_27", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 75),
				(overlay_set_position, "$g_presentation_obj_custom_banner_27", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_27", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_4),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_31", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 75),
				(overlay_set_position, "$g_presentation_obj_custom_banner_31", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_31", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_38", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 60),
				(overlay_set_position, "$g_presentation_obj_custom_banner_38", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_39", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_39", 1),
			(try_end),
			(position_set_x, 1, 350),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_custom_banner_1", 1),
			(position_set_x, 1, 275),
			(position_set_y, 1, 550),
			(overlay_set_position, "$g_presentation_obj_custom_banner_2", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_custom_banner_3", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_custom_banner_4", 1),
			(position_set_x, 1, 880),
			(position_set_y, 1, 575),
			(overlay_set_position, "$g_presentation_obj_custom_banner_5", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_custom_banner_19", 1),
			(position_set_y, 1, 650),
			(position_set_x, 1, 175),
			(overlay_set_position, "$g_presentation_obj_custom_banner_16", 1),
			(position_set_y, 1, 150),
			(position_set_x, 1, 850),
			(overlay_set_position, "$g_presentation_obj_custom_banner_20", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_2"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_22"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 85),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_3"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_23"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 86),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_4"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_1"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_background_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_5"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_type_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 1),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_6"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_24"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 92),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 1),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_7"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_28"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 87),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 2),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_8"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_25"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 93),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 2),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_9"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_29"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 88),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 3),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_10"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_26"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 94),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 3),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_11"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_30"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 89),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 4),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_12"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_27"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 95),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 4),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_13"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_31"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 90),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_14"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_charge_positioning"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_15"),
				(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
				(val_add, ":player_custom_banner_num_charges", 1),
				(val_clamp, ":player_custom_banner_num_charges", 0, 5),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_num_charges, ":player_custom_banner_num_charges"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_21"),
				(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
				(val_sub, ":player_custom_banner_num_charges", 1),
				(val_clamp, ":player_custom_banner_num_charges", 0, 5),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_num_charges, ":player_custom_banner_num_charges"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_16"),
				(call_script, "script_get_random_custom_banner", "trp_player"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_17"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_type_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_18"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_map_type_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_19"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_map_type_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_32"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_1),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_1, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_34"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_2),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_2, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_36"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_3),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_3, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_38"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_4),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_4, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_33"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_1),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_1, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_35"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_2),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_2, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_37"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_3),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_3, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_39"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_4),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_4, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_20"),
				(troop_get_slot, ":player_custom_banner_map_flag_type", "trp_player", slot_troop_custom_banner_map_flag_type),
				(try_begin),
					(ge, ":player_custom_banner_map_flag_type", 0),
					(val_add, ":player_custom_banner_map_flag_type", "icon_custom_banner_01"),
					(party_set_banner_icon, "p_main_party", ":player_custom_banner_map_flag_type"),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_charge_positioning", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_position", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 125),
			(assign, ":var_2", 400),
			(call_script, "script_get_troop_custom_banner_num_positionings", "trp_player"),
			(assign, ":var_3", reg0),
			(store_mul, ":value_2", ":var_3", 125),
			(val_sub, ":value_2", 25),
			(store_div, ":value", ":value_2", 2),
			(store_sub, ":value", 500, ":value"),
			(try_for_range, ":localvariable", 0, ":var_3"),
				(create_image_button_overlay_with_tableau_material, reg1, -1, "tableau_positioning_selection", ":localvariable"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 125),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":localvariable", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(call_script, "script_get_troop_custom_banner_num_positionings", "trp_player"),
			(assign, ":value", reg0),
			(try_for_range, ":localvariable", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_positioning, ":localvariable"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_charge_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_charge", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 100),
			(assign, ":var_2", 600),
			(try_for_range, ":mesh", "mesh_custom_banner_charge_01", "mesh_tableau_mesh_custom_banner"),
				(create_image_button_overlay, reg1, ":mesh", ":mesh"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 100),
				(try_begin),
					(gt, ":value", 900),
					(assign, ":value", 100),
					(val_sub, ":var_2", 100),
				(try_end),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 80),
				(position_set_y, 1, 80),
				(overlay_set_size, reg1, 1),
				(store_sub, ":value_2", ":mesh", "mesh_custom_banner_charge_01"),
				(troop_set_slot, "trp_temp_array_a", ":value_2", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_tableau_mesh_custom_banner"),
			(val_sub, ":value", "mesh_custom_banner_charge_01"),
			(try_for_range, ":localvariable", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
				(troop_set_slot, "trp_player", "$g_presentation_output_slot", ":localvariable"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_background_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_background", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 75),
			(assign, ":var_2", 450),
			(try_for_range, ":mesh", "mesh_custom_banner_bg", "mesh_custom_banner_charge_01"),
				(store_sub, ":value_2", ":mesh", "mesh_custom_banner_bg"),
				(create_image_button_overlay_with_tableau_material, reg1, -1, "tableau_background_selection", ":value_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 125),
				(try_begin),
					(gt, ":value", 900),
					(assign, ":value", 75),
					(val_sub, ":var_2", 125),
				(try_end),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":value_2", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_custom_banner_charge_01"),
			(val_sub, ":value", "mesh_custom_banner_bg"),
			(try_for_range, ":localvariable", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_bg_type, ":localvariable"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_flag_type_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_flag_type", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":var_1", 435),
			(assign, ":var_2", 450),
			(try_for_range, ":mesh", "mesh_custom_banner_01", "mesh_custom_banner_bg"),
				(store_sub, ":value", ":mesh", "mesh_custom_banner_01"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_flag_type, ":value"),
				(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_default", "trp_player"),
				(position_set_x, 1, ":var_1"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":var_1", 130),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":value", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_custom_banner_bg"),
			(val_sub, ":value", "mesh_custom_banner_01"),
			(try_for_range, ":localvariable", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_flag_type, ":localvariable"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_flag_map_type_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_map_flag_type", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(troop_get_slot, ":player_custom_banner_bg_type", "trp_player", slot_troop_custom_banner_bg_type),
			(val_add, ":player_custom_banner_bg_type", "mesh_custom_banner_bg"),
			(assign, ":var_2", 250),
			(assign, ":var_3", 150),
			(try_for_range, ":mesh", "mesh_custom_map_banner_01", "mesh_custom_banner_01"),
				(store_sub, ":value", ":mesh", "mesh_custom_map_banner_01"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_map_flag_type, ":value"),
				(try_begin),
					(eq, ":mesh", "mesh_custom_map_banner_01"),
					(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_square", "trp_player"),
				(else_try),
					(eq, ":mesh", "mesh_custom_map_banner_02"),
					(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_short", "trp_player"),
				(else_try),
					(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_tall", "trp_player"),
				(try_end),
				(position_set_x, 1, ":var_2"),
				(position_set_y, 1, ":var_3"),
				(val_add, ":var_2", 200),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":value", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_custom_banner_01"),
			(val_sub, ":value", "mesh_custom_map_banner_01"),
			(try_for_range, ":localvariable", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_map_flag_type, ":localvariable"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("color_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_color", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 125),
			(assign, ":var_2", 450),
			(try_for_range, ":number", 0, 42),
				(call_script, "script_get_custom_banner_color_from_index", ":number"),
				(assign, ":var_4", reg0),
				(create_image_button_overlay_with_tableau_material, reg1, "mesh_color_picker", "tableau_color_picker", ":var_4"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 50),
				(try_begin),
					(store_mod, ":value_2", ":number", 7),
					(eq, ":value_2", 6),
					(assign, ":value", 125),
					(val_sub, ":var_2", 50),
				(try_end),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 500),
				(overlay_set_size, reg1, 1),
				(store_mul, ":value_3", ":number", 2),
				(store_add, ":value_4", ":value_3", 1),
				(troop_set_slot, "trp_temp_array_a", ":value_3", reg1),
				(troop_set_slot, "trp_temp_array_a", ":value_4", ":var_4"),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", 64),
			(try_for_range, ":localvariable", 0, ":value"),
				(store_mul, ":value_2", ":localvariable", 2),
				(troop_slot_eq, "trp_temp_array_a", ":value_2", ":trigger_param_1"),
				(store_add, ":value_3", ":value_2", 1),
				(troop_get_slot, ":temp_array_a_value_3", "trp_temp_array_a", ":value_3"),
				(troop_set_slot, "trp_player", "$g_presentation_output_slot", ":temp_array_a_value_3"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("marshall_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(assign, "$g_presentation_obj_marshall_selection_1", -1),
			(assign, "$g_presentation_obj_marshall_selection_2", -1),
			(assign, "$g_presentation_obj_marshall_selection_3", -1),
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_presentation_next_presentation", -1),
			(store_add, ":value", "$g_presentation_marshall_selection_max_renown_1", "$g_presentation_marshall_selection_max_renown_2"),
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
			(create_text_overlay, reg1, "@Candidate #1: {s1}", 16),
			(position_set_x, 1, 200),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_2_troop"),
			(create_text_overlay, reg1, "@Candidate #2: {s1}", 16),
			(position_set_x, 1, 800),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "$g_presentation_marshall_selection_max_renown_1_troop"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 300),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "$g_presentation_marshall_selection_max_renown_2_troop"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 300),
			(overlay_set_position, reg1, 1),
			(assign, ":var_3", "$g_presentation_input"),
			(val_add, "$g_presentation_input", 1),
			(try_begin),
				(lt, ":var_3", 0),
				(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
				(str_store_troop_name, 2, "$g_presentation_marshall_selection_max_renown_2_troop"),
				(str_store_troop_name, 3, ":players_kingdom_leader"),
				(str_store_faction_name, 4, "$players_kingdom"),
				(create_text_overlay, reg1, "@{s3} of {s4} wishes to select a new marshall and invites his vassals for a counsel. {s1} and {s2} are the likely candidates.", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 200),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_marshall_selection_1", "@Continue...", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 100),
				(overlay_set_position, "$g_presentation_obj_marshall_selection_1", 1),
				(assign, "$g_presentation_next_presentation", "prsnt_marshall_selection"),
			(else_try),
				(assign, ":var_4", ":var_3"),
				(try_for_range_backwards, ":var_5", "trp_kingdom_heroes_including_player_begin", "trp_knight_1_1_wife"),
					(ge, ":var_4", 0),
					(assign, ":value_2", ":var_5"),
					(assign, ":value_3", 0),
					(try_begin),
						(eq, ":var_5", "trp_kingdom_heroes_including_player_begin"),
						(assign, ":value_2", "trp_player"),
						(try_begin),
							(eq, "$g_player_is_captive", 0),
							(assign, ":value_3", 1),
						(try_end),
					(else_try),
						(store_faction_of_troop, ":faction_of_troop_value_2", ":value_2"),
						(eq, "$players_kingdom", ":faction_of_troop_value_2"),
						(neg|troop_slot_ge, ":value_2", 8, 0),
						(troop_slot_ge, ":value_2", 10, 1),
						(troop_slot_eq, ":value_2", slot_troop_occupation, 2),
						(neg|faction_slot_eq, ":faction_of_troop_value_2", slot_faction_leader, ":value_2"),
						(assign, ":value_3", 1),
					(try_end),
					(eq, ":value_3", 1),
					(neq, "$g_presentation_marshall_selection_max_renown_1_troop", ":value_2"),
					(neq, "$g_presentation_marshall_selection_max_renown_2_troop", ":value_2"),
					(val_sub, ":var_4", 1),
					(lt, ":var_4", 0),
					(assign, "$g_presentation_next_presentation", "prsnt_marshall_selection"),
					(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", ":value_2"),
					(position_set_x, 1, 300),
					(position_set_y, 1, 300),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 440),
					(position_set_y, 1, 400),
					(overlay_set_position, reg1, 1),
					(try_begin),
						(eq, ":value_2", "trp_player"),
						(create_text_overlay, reg1, "@Who do you wish to support?", 16),
						(position_set_x, 1, 500),
						(position_set_y, 1, 200),
						(overlay_set_position, reg1, 1),
						(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
						(create_button_overlay, "$g_presentation_obj_marshall_selection_2", "@{!}{s1}", 16),
						(position_set_x, 1, 300),
						(position_set_y, 1, 100),
						(overlay_set_position, "$g_presentation_obj_marshall_selection_2", 1),
						(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_2_troop"),
						(create_button_overlay, "$g_presentation_obj_marshall_selection_3", "@{!}{s1}", 16),
						(position_set_x, 1, 700),
						(position_set_y, 1, 100),
						(overlay_set_position, "$g_presentation_obj_marshall_selection_3", 1),
					(else_try),
						(str_store_troop_name, 1, ":value_2"),
						(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
						(val_sub, ":random_in_range_0_value", "$g_presentation_marshall_selection_max_renown_1"),
						(try_begin),
							(lt, ":random_in_range_0_value", 0),
							(val_add, "$g_presentation_marshall_selection_1_vote", 1),
							(str_store_troop_name, 2, "$g_presentation_marshall_selection_max_renown_1_troop"),
						(else_try),
							(val_add, "$g_presentation_marshall_selection_2_vote", 1),
							(str_store_troop_name, 2, "$g_presentation_marshall_selection_max_renown_2_troop"),
						(try_end),
						(create_text_overlay, reg1, "@{s1} gives his support to {s2}.", 16),
						(position_set_x, 1, 500),
						(position_set_y, 1, 200),
						(overlay_set_position, reg1, 1),
						(create_button_overlay, "$g_presentation_obj_marshall_selection_1", "@Continue...", 16),
						(position_set_x, 1, 500),
						(position_set_y, 1, 100),
						(overlay_set_position, "$g_presentation_obj_marshall_selection_1", 1),
					(try_end),
				(try_end),
			(try_end),
			(assign, reg0, "$g_presentation_marshall_selection_1_vote"),
			(create_text_overlay, reg1, "@Number of Supporters: {reg0}", 16),
			(position_set_x, 1, 200),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(assign, reg0, "$g_presentation_marshall_selection_2_vote"),
			(create_text_overlay, reg1, "@Number of Supporters: {reg0}", 16),
			(position_set_x, 1, 800),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, "$g_presentation_next_presentation", 0),
				(try_begin),
					(gt, "$g_presentation_marshall_selection_2_vote", "$g_presentation_marshall_selection_1_vote"),
					(assign, ":var_10", "$g_presentation_marshall_selection_max_renown_1_troop"),
					(assign, "$g_presentation_marshall_selection_max_renown_1_troop", "$g_presentation_marshall_selection_max_renown_2_troop"),
					(assign, "$g_presentation_marshall_selection_max_renown_2_troop", ":var_10"),
				(try_end),
				(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
				(str_store_troop_name, 2, ":players_kingdom_leader"),
				(str_store_faction_name, 3, "$players_kingdom"),
				(create_text_overlay, reg1, "@{s2} has heard his vassals' counsel. He selects {s1} as the marshall of {s3}.", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 200),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_marshall_selection_1", "@Continue...", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 100),
				(overlay_set_position, "$g_presentation_obj_marshall_selection_1", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_2"),
				(val_add, "$g_presentation_marshall_selection_1_vote", 1),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_1_troop", 2),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_2_troop", -2),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_3"),
				(val_add, "$g_presentation_marshall_selection_2_vote", 1),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_1_troop", -2),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_2_troop", 2),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_1"),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_2"),
				(eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_3"),
				(try_begin),
					(ge, "$g_presentation_next_presentation", 0),
					(start_presentation, "$g_presentation_next_presentation"),
				(else_try),
					(try_begin),
						(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "$g_presentation_marshall_selection_max_renown_1_troop"),
						(call_script, "script_check_and_finish_active_army_quests_for_faction", "$players_kingdom"),
					(try_end),
					(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
					(try_begin),
						(ge, ":players_kingdom_marshall", 0),
						(party_is_active, ":players_kingdom_marshall"),
						(party_set_marshall, ":players_kingdom_marshall", 0),
					(try_end),
					(faction_set_slot, "$players_kingdom", slot_faction_marshall, "$g_presentation_marshall_selection_max_renown_1_troop"),
					(try_begin),
						(eq, "$g_presentation_marshall_selection_max_renown_1_troop", "trp_player"),
						(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_2_troop", -3),
					(try_end),
					(assign, "$g_recalculate_ais", 1),
					(assign, "$g_presentation_marshall_selection_ended", 1),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("battle", 0, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_formation_group0_selected", 0),
			(assign, "$g_formation_group1_selected", 0),
			(assign, "$g_formation_group2_selected", 0),
			(assign, "$g_formation_group3_selected", 0),
			(assign, "$g_formation_group4_selected", 0),
			(assign, "$g_formation_group5_selected", 0),
			(assign, "$g_formation_group6_selected", 0),
			(assign, "$g_formation_group7_selected", 0),
			(assign, "$g_formation_group8_selected", 0),
			(assign, "$g_presentation_obj_battle_but0", -1),
			(assign, "$g_presentation_obj_battle_but1", -1),
			(assign, "$g_presentation_obj_battle_but2", -1),
			(assign, "$g_presentation_obj_battle_but3", -1),
			(assign, "$g_presentation_obj_battle_but4", -1),
			(assign, "$g_presentation_obj_battle_but5", -1),
			(assign, "$g_presentation_obj_battle_but6", -1),
			(assign, "$g_presentation_obj_battle_but7", -1),
			(assign, "$g_presentation_obj_battle_but8", -1),
			(str_clear, 7),
			(assign, "$g_us_ready_num", 0),
			(assign, "$g_ally_ready_num", 0),
			(assign, "$g_enemy_ready_num", 0),
			(try_for_agents, ":var_1"),
				(agent_set_slot, ":var_1", slot_agent_map_overlay_id, 0),
			(try_end),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_troop_id, ":troop_id_player_agent_no", ":player_agent_no"),
			(position_set_y, 1, 700),
			(create_text_overlay, reg1, "@Action", 98320),
			(overlay_set_color, reg1, 4289374890),
			(position_set_x, 1, 270),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Mount", 98320),
			(overlay_set_color, reg1, 4289374890),
			(position_set_x, 1, 410),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Attack Type", 98320),
			(overlay_set_color, reg1, 4289374890),
			(position_set_x, 1, 550),
			(overlay_set_position, reg1, 1),
			(assign, "$group0_has_troops", 0),
			(assign, "$group1_has_troops", 0),
			(assign, "$group2_has_troops", 0),
			(assign, "$group3_has_troops", 0),
			(assign, "$group4_has_troops", 0),
			(assign, "$group5_has_troops", 0),
			(assign, "$group6_has_troops", 0),
			(assign, "$group7_has_troops", 0),
			(assign, "$group8_has_troops", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(assign, "$num_classes", 0),
			(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
				(troop_get_class, ":class_party_stack_troop_id_main_party_localvariable", ":party_stack_troop_id_main_party_localvariable"),
				(neq, ":troop_id_player_agent_no", ":party_stack_troop_id_main_party_localvariable"),
				(try_begin),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 0),
					(try_begin),
						(neq, "$group0_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group0_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 1),
					(try_begin),
						(neq, "$group1_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group1_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 2),
					(try_begin),
						(neq, "$group2_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group2_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 3),
					(try_begin),
						(neq, "$group3_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group3_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 4),
					(try_begin),
						(neq, "$group4_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group4_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 5),
					(try_begin),
						(neq, "$group5_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group5_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 6),
					(try_begin),
						(neq, "$group6_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group6_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 7),
					(try_begin),
						(neq, "$group7_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group7_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_localvariable", 8),
					(try_begin),
						(neq, "$group8_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group8_has_troops", 1),
				(try_end),
			(try_end),
			(assign, ":value", 0),
			(assign, ":value_2", 653),
			(assign, ":var_10", 20),
			(assign, ":var_11", 662),
			(assign, ":var_12", 50),
			(assign, ":var_13", 660),
			(try_begin),
				(eq, "$group0_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but0", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but0", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but0", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but0", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but0", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check0", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name0", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name0", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but0_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but0_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but0_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group1_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but1", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but1", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but1", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but1", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but1", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check1", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name1", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name1", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but1_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but1_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but1_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group2_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but2", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but2", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but2", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but2", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but2", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check2", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check2", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name2", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name2", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but2_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but2_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but2_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group3_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but3", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but3", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but3", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but3", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but3", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check3", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check3", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name3", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name3", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but3_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but3_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but3_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group4_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but4", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but4", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but4", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but4", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but4", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check4", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check4", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name4", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name4", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but4_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but4_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but4_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group5_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but5", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but5", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but5", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but5", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but5", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check5", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check5", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name5", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name5", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but5_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but5_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but5_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group6_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but6", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but6", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but6", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but6", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but6", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check6", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check6", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name6", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name6", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but6_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but6_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but6_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group7_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but7", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but7", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but7", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but7", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but7", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check7", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check7", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name7", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name7", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but7_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but7_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but7_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group8_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but8", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but8", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but8", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but8", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but8", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check8", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_10"),
				(position_set_y, 2, ":var_11"),
				(overlay_set_position, "$g_presentation_obj_battle_check8", 2),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name8", 7, 0),
				(position_set_x, 3, ":var_12"),
				(position_set_y, 3, ":var_13"),
				(overlay_set_position, "$g_presentation_obj_battle_name8", 3),
				(val_add, ":var_13", -40),
				(create_text_overlay, "$g_presentation_but8_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but8_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but8_weapon_usage", 7, 16),
			(try_end),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
			(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(assign, ":var_15", 640),
			(assign, ":var_16", "$num_classes"),
			(val_mul, ":var_16", -40),
			(val_add, ":var_15", ":var_16"),
			(create_listbox_overlay, "$g_presentation_obj_battle_10", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_11", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_12", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_13", "str_space", 0),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Stand Ground"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Charge"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Follow Me"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Hold This Position"),
			(create_button_overlay, "$g_presentation_obj_battle_14", "@Spread Out", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_14", 4294967295),
			(create_button_overlay, "$g_presentation_obj_battle_15", "@Stand Closer", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_15", 4294967295),
			(create_button_overlay, "$g_presentation_obj_battle_16", "@Fall Back", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_16", 4294967295),
			(create_button_overlay, "$g_presentation_obj_battle_17", "@Advance", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_17", 4294967295),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_10", 1),
			(val_add, ":var_15", -35),
			(position_set_x, 1, 205),
			(position_set_y, 1, ":var_15"),
			(val_add, ":var_15", 35),
			(overlay_set_position, "$g_presentation_obj_battle_10", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_10", 96),
			(overlay_set_val, "$g_presentation_obj_battle_10", "$g_latest_order_1"),
			(val_add, ":var_15", -40),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_15"),
			(val_add, ":var_15", 40),
			(overlay_set_position, "$g_presentation_obj_battle_14", 1),
			(val_add, ":var_15", -20),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_15"),
			(val_add, ":var_15", 20),
			(overlay_set_position, "$g_presentation_obj_battle_15", 1),
			(val_add, ":var_15", 0),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_15"),
			(val_add, ":var_15", 0),
			(overlay_set_position, "$g_presentation_obj_battle_16", 1),
			(val_add, ":var_15", 20),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_15"),
			(val_add, ":var_15", -20),
			(overlay_set_position, "$g_presentation_obj_battle_17", 1),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Dismount"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Mount"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_11", 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, ":var_15"),
			(overlay_set_position, "$g_presentation_obj_battle_11", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_11", 96),
			(overlay_set_val, "$g_presentation_obj_battle_11", "$g_latest_order_2"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Fire At Will"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Hold Your Fire"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_12", 1),
			(position_set_x, 1, 495),
			(position_set_y, 1, ":var_15"),
			(overlay_set_position, "$g_presentation_obj_battle_12", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_12", 96),
			(overlay_set_val, "$g_presentation_obj_battle_12", "$g_latest_order_3"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Use Blunt Weapons"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Use Any Weapon"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_13", 1),
			(val_add, ":var_15", -35),
			(position_set_x, 1, 495),
			(position_set_y, 1, ":var_15"),
			(val_add, ":var_15", 35),
			(overlay_set_position, "$g_presentation_obj_battle_13", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_13", 96),
			(overlay_set_val, "$g_presentation_obj_battle_13", "$g_latest_order_4"),
			(create_text_overlay, "$g_presentation_obj_battle_22", "str_us_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_23", "str_allies_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_24", "str_enemies_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_25", "@Ready", 16),
			(create_text_overlay, "$g_presentation_obj_battle_26", "@Wounded", 16),
			(create_text_overlay, "$g_presentation_obj_battle_28", "str_routed", 16),
			(create_text_overlay, "$g_presentation_obj_battle_27", "@Dead", 16),
			(create_text_overlay, "$g_battle_us_ready", 7, 16),
			(create_text_overlay, "$g_battle_us_wounded", 7, 16),
			(create_text_overlay, "$g_battle_us_routed", 7, 16),
			(create_text_overlay, "$g_battle_us_dead", 7, 16),
			(create_text_overlay, "$g_battle_enemies_ready", 7, 16),
			(create_text_overlay, "$g_battle_enemies_wounded", 7, 16),
			(create_text_overlay, "$g_battle_enemies_routed", 7, 16),
			(create_text_overlay, "$g_battle_enemies_dead", 7, 16),
			(create_text_overlay, "$g_battle_allies_ready", 7, 16),
			(create_text_overlay, "$g_battle_allies_wounded", 7, 16),
			(create_text_overlay, "$g_battle_allies_routed", 7, 16),
			(create_text_overlay, "$g_battle_allies_dead", 7, 16),
			(create_image_button_overlay, "$g_battle_report_plane", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_report_plane", 0),
			(position_set_x, 1, 15500),
			(position_set_y, 1, 6000),
			(overlay_set_size, "$g_battle_report_plane", 1),
			(position_set_x, 1, 672),
			(position_set_y, 1, 275),
			(overlay_set_position, "$g_battle_report_plane", 1),
			(overlay_set_alpha, "$g_battle_report_plane", 68),
			(overlay_set_color, "$g_battle_report_plane", 1140411),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, "$g_presentation_obj_battle_14", 1),
			(overlay_set_size, "$g_presentation_obj_battle_15", 1),
			(overlay_set_size, "$g_presentation_obj_battle_16", 1),
			(overlay_set_size, "$g_presentation_obj_battle_17", 1),
			(overlay_set_size, "$g_presentation_obj_battle_22", 1),
			(overlay_set_size, "$g_presentation_obj_battle_23", 1),
			(overlay_set_size, "$g_presentation_obj_battle_24", 1),
			(overlay_set_size, "$g_presentation_obj_battle_25", 1),
			(overlay_set_size, "$g_presentation_obj_battle_26", 1),
			(overlay_set_size, "$g_presentation_obj_battle_27", 1),
			(overlay_set_size, "$g_presentation_obj_battle_28", 1),
			(overlay_set_size, "$g_battle_us_ready", 1),
			(overlay_set_size, "$g_battle_us_wounded", 1),
			(overlay_set_size, "$g_battle_us_routed", 1),
			(overlay_set_size, "$g_battle_us_dead", 1),
			(overlay_set_size, "$g_battle_enemies_ready", 1),
			(overlay_set_size, "$g_battle_enemies_wounded", 1),
			(overlay_set_size, "$g_battle_enemies_routed", 1),
			(overlay_set_size, "$g_battle_enemies_dead", 1),
			(overlay_set_size, "$g_battle_allies_ready", 1),
			(overlay_set_size, "$g_battle_allies_wounded", 1),
			(overlay_set_size, "$g_battle_allies_routed", 1),
			(overlay_set_size, "$g_battle_allies_dead", 1),
			(assign, ":value", 675),
			(assign, ":value_2", 280),
			(val_add, ":value", 70),
			(val_add, ":value_2", 90),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_25", 1),
			(val_add, ":value", 70),
			(position_set_x, 1, ":value"),
			(overlay_set_position, "$g_presentation_obj_battle_26", 1),
			(val_add, ":value", 70),
			(position_set_x, 1, ":value"),
			(overlay_set_position, "$g_presentation_obj_battle_28", 1),
			(val_add, ":value", 70),
			(position_set_x, 1, ":value"),
			(overlay_set_position, "$g_presentation_obj_battle_27", 1),
			(val_add, ":value", -280),
			(val_add, ":value_2", -30),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_22", 1),
			(val_add, ":value_2", -30),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_23", 1),
			(val_add, ":value_2", -30),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_24", 1),
			(get_scene_boundaries, 2, 3),
			(position_transform_position_to_local, 4, 2, 3),
			(set_fixed_point_multiplier, 1000),
			(position_get_x, ":position_x_4", 4),
			(position_get_y, ":position_y_4", 4),
			(set_fixed_point_multiplier, 1000),
			(store_div, ":value_3", ":position_y_4", 100),
			(store_div, ":value_3", ":position_x_4", ":value_3"),
			(try_begin),
				(gt, ":value_3", 100),
				(assign, "$g_battle_map_width", 300),
				(store_div, "$g_battle_map_scale", ":position_x_4", "$g_battle_map_width"),
				(store_div, "$g_battle_map_height", ":position_y_4", "$g_battle_map_scale"),
			(else_try),
				(assign, "$g_battle_map_height", 300),
				(store_div, "$g_battle_map_scale", ":position_y_4", "$g_battle_map_height"),
				(store_div, "$g_battle_map_width", ":position_x_4", "$g_battle_map_scale"),
			(try_end),
			(create_image_button_overlay, "$g_battle_map_plane", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_map_plane", 0),
			(store_add, ":value_4", "$g_battle_map_width", 20),
			(store_add, ":value_5", "$g_battle_map_height", 20),
			(store_mul, ":value_6", ":value_4", 50),
			(store_mul, ":value_7", ":value_5", 50),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$g_battle_map_plane", 1),
			(store_sub, ":value_8", 990, ":value_4"),
			(store_sub, ":value_9", 740, ":value_5"),
			(position_set_x, 1, ":value_8"),
			(position_set_y, 1, ":value_9"),
			(overlay_set_position, "$g_battle_map_plane", 1),
			(overlay_set_alpha, "$g_battle_map_plane", 34),
			(create_mesh_overlay, "$g_battle_map_infantry_order_flag", "mesh_flag_infantry"),
			(create_mesh_overlay, "$g_battle_map_archers_order_flag", "mesh_flag_archers"),
			(create_mesh_overlay, "$g_battle_map_cavalry_order_flag", "mesh_flag_cavalry"),
			(overlay_set_alpha, "$g_battle_map_infantry_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_archers_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_cavalry_order_flag", 0),
			(call_script, "script_update_order_panel_checked_classes"),
			(call_script, "script_update_order_panel_statistics_and_map"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$group0_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, ":value", 1),
				(assign, "$g_formation_group0_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group1_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, ":value", 1),
				(assign, "$g_formation_group1_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group2_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check2"),
				(assign, ":value", 1),
				(assign, "$g_formation_group2_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group3_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check3"),
				(assign, ":value", 1),
				(assign, "$g_formation_group3_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group4_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check4"),
				(assign, ":value", 1),
				(assign, "$g_formation_group4_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group5_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check5"),
				(assign, ":value", 1),
				(assign, "$g_formation_group5_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group6_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check6"),
				(assign, ":value", 1),
				(assign, "$g_formation_group6_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group7_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check7"),
				(assign, ":value", 1),
				(assign, "$g_formation_group7_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group8_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check8"),
				(assign, ":value", 1),
				(assign, "$g_formation_group8_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(assign, ":value", 1),
				(assign, "$g_formation_group0_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(assign, ":value", 1),
				(assign, "$g_formation_group1_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check1", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(assign, ":value", 1),
				(assign, "$g_formation_group2_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check2", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(assign, ":value", 1),
				(assign, "$g_formation_group3_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check3", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(assign, ":value", 1),
				(assign, "$g_formation_group4_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check4", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(assign, ":value", 1),
				(assign, "$g_formation_group5_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check5", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(assign, ":value", 1),
				(assign, "$g_formation_group6_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check6", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(assign, ":value", 1),
				(assign, "$g_formation_group7_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check7", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(assign, ":value", 1),
				(assign, "$g_formation_group8_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check8", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_14"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 8),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_15"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 7),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_16"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 6),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_17"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 5),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_10"),
				(try_begin),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 0),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 3),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 1),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 2),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 2),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 11),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_11"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 3),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_2", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 4),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_2", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_12"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 12),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_3", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 13),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_3", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_13"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 10),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_4", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 9),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_4", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_battle_map_plane"),
				(get_scene_boundaries, 2, 3),
				(mouse_get_position, 1),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_1", 1),
				(position_get_y, ":position_y_1", 1),
				(store_sub, ":value_2", 980, "$g_battle_map_width"),
				(store_sub, ":value_3", 730, "$g_battle_map_height"),
				(val_sub, ":position_x_1", ":value_2"),
				(val_sub, ":position_y_1", ":value_3"),
				(val_clamp, ":position_x_1", 0, "$g_battle_map_width"),
				(val_clamp, ":position_y_1", 0, "$g_battle_map_height"),
				(val_mul, ":position_x_1", "$g_battle_map_scale"),
				(val_mul, ":position_y_1", "$g_battle_map_scale"),
				(set_fixed_point_multiplier, 1000),
				(position_set_x, 1, ":position_x_1"),
				(position_set_y, 1, ":position_y_1"),
				(position_transform_position_to_parent, 3, 2, 1),
				(try_begin),
					(eq, "$g_formation_group0_selected", 1),
					(team_give_order, ":team_player_agent_no", 0, 0),
					(team_set_order_position, ":team_player_agent_no", 0, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group1_selected", 1),
					(team_give_order, ":team_player_agent_no", 1, 0),
					(team_set_order_position, ":team_player_agent_no", 1, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group2_selected", 1),
					(team_give_order, ":team_player_agent_no", 2, 0),
					(team_set_order_position, ":team_player_agent_no", 2, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group3_selected", 1),
					(team_give_order, ":team_player_agent_no", 3, 0),
					(team_set_order_position, ":team_player_agent_no", 3, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group4_selected", 1),
					(team_give_order, ":team_player_agent_no", 4, 0),
					(team_set_order_position, ":team_player_agent_no", 4, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group5_selected", 1),
					(team_give_order, ":team_player_agent_no", 5, 0),
					(team_set_order_position, ":team_player_agent_no", 5, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group6_selected", 1),
					(team_give_order, ":team_player_agent_no", 6, 0),
					(team_set_order_position, ":team_player_agent_no", 6, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group7_selected", 1),
					(team_give_order, ":team_player_agent_no", 7, 0),
					(team_set_order_position, ":team_player_agent_no", 7, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group8_selected", 1),
					(team_give_order, ":team_player_agent_no", 8, 0),
					(team_set_order_position, ":team_player_agent_no", 8, 3),
				(try_end),
				(assign, ":value_4", 1),
				(convert_to_fixed_point, ":value_4"),
				(set_fixed_point_multiplier, 100),
				(call_script, "script_team_get_position_of_enemies", 60, "$fplayer_team_no", 9),
				(try_for_range, ":number", 0, 9),
					(assign, ":value_5", 0),
					(try_begin),
						(eq, ":number", 0),
						(eq, "$g_formation_group0_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 1),
						(eq, "$g_formation_group1_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 2),
						(eq, "$g_formation_group2_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 3),
						(eq, "$g_formation_group3_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 4),
						(eq, "$g_formation_group4_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 5),
						(eq, "$g_formation_group5_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 6),
						(eq, "$g_formation_group6_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 7),
						(eq, "$g_formation_group7_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 8),
						(eq, "$g_formation_group8_selected", 1),
						(assign, ":value_5", 1),
					(try_end),
					(eq, ":value_5", 1),
					(store_add, ":value_6", 93, ":number"),
					(team_get_slot, ":fplayer_team_no_value_6", "$fplayer_team_no", ":value_6"),
					(neq, ":fplayer_team_no_value_6", 0),
					(copy_position, 1, 3),
					(call_script, "script_point_y_toward_position", 1, 60),
					(call_script, "script_set_formation_position", "$fplayer_team_no", ":number", 1),
					(store_add, ":value_6", 12, ":number"),
					(team_get_slot, ":fplayer_team_no_value_6_2", "$fplayer_team_no", ":value_6"),
					(store_add, ":value_6", 102, ":number"),
					(team_get_slot, ":fplayer_team_no_value_6_3", "$fplayer_team_no", ":value_6"),
					(call_script, "script_get_centering_amount", ":fplayer_team_no_value_6", ":fplayer_team_no_value_6_2", ":fplayer_team_no_value_6_3"),
					(position_move_x, 1, reg0),
					(store_add, ":value_6", 84, ":number"),
					(try_begin),
						(team_slot_eq, "$fplayer_team_no", ":value_6", 1),
						(call_script, "script_form_archers", "$fplayer_team_no", ":number", "$fplayer_agent_no", ":fplayer_team_no_value_6_3", ":fplayer_team_no_value_6"),
					(else_try),
						(this_or_next|team_slot_eq, "$fplayer_team_no", ":value_6", 2),
						(team_slot_eq, "$fplayer_team_no", ":value_6", 5),
						(call_script, "script_form_cavalry", "$fplayer_team_no", ":number", "$fplayer_agent_no", ":fplayer_team_no_value_6_3"),
					(else_try),
						(call_script, "script_form_infantry", "$fplayer_team_no", ":number", "$fplayer_agent_no", ":fplayer_team_no_value_6_3", ":fplayer_team_no_value_6"),
					(try_end),
					(store_add, ":value_6", 111, ":number"),
					(team_set_slot, "$fplayer_team_no", ":value_6", 0),
				(try_end),
				(set_fixed_point_multiplier, ":value_4"),
				(call_script, "script_update_order_flags_on_map"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(team_set_order_listener, ":team_player_agent_no", -1),
				(try_begin),
					(this_or_next|eq, "$g_formation_group0_selected", 1),
					(eq, "$group0_has_troops", 0),
					(this_or_next|eq, "$g_formation_group1_selected", 1),
					(eq, "$group1_has_troops", 0),
					(this_or_next|eq, "$g_formation_group2_selected", 1),
					(eq, "$group2_has_troops", 0),
					(this_or_next|eq, "$g_formation_group3_selected", 1),
					(eq, "$group3_has_troops", 0),
					(this_or_next|eq, "$g_formation_group4_selected", 1),
					(eq, "$group4_has_troops", 0),
					(this_or_next|eq, "$g_formation_group5_selected", 1),
					(eq, "$group5_has_troops", 0),
					(this_or_next|eq, "$g_formation_group6_selected", 1),
					(eq, "$group6_has_troops", 0),
					(this_or_next|eq, "$g_formation_group7_selected", 1),
					(eq, "$group7_has_troops", 0),
					(this_or_next|eq, "$g_formation_group8_selected", 1),
					(eq, "$group8_has_troops", 0),
					(team_set_order_listener, ":team_player_agent_no", 9),
				(else_try),
					(eq, "$g_formation_group0_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 0, 1),
				(else_try),
					(eq, "$g_formation_group1_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 1, 1),
				(else_try),
					(eq, "$g_formation_group2_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 2, 1),
				(else_try),
					(eq, "$g_formation_group3_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 3, 1),
				(else_try),
					(eq, "$g_formation_group4_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 4, 1),
				(else_try),
					(eq, "$g_formation_group5_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 5, 1),
				(else_try),
					(eq, "$g_formation_group6_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 6, 1),
				(else_try),
					(eq, "$g_formation_group7_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 7, 1),
				(else_try),
					(eq, "$g_formation_group8_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 8, 1),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but0_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but0_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but0_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name0", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but0_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but0_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but0_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name0", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but1_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but1_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but1_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name1", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but1_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but1_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but1_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name1", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but2_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but2_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but2_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name2", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but2_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but2_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but2_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name2", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but3_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but3_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but3_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name3", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but3_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but3_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but3_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name3", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but4_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but4_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but4_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name4", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but4_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but4_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but4_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name4", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but5_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but5_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but5_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name5", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but5_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but5_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but5_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name5", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but6_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but6_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but6_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name6", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but6_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but6_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but6_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name6", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but7_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but7_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but7_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name7", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but7_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but7_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but7_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name7", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but8_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but8_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but8_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name8", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but8_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but8_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but8_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name8", 250, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|game_key_clicked, 30),
				(this_or_next|game_key_clicked, 31),
				(this_or_next|game_key_clicked, 32),
				(this_or_next|game_key_clicked, 33),
				(this_or_next|game_key_clicked, 34),
				(this_or_next|game_key_clicked, 35),
				(this_or_next|game_key_clicked, 36),
				(this_or_next|game_key_clicked, 37),
				(this_or_next|game_key_clicked, 38),
				(this_or_next|game_key_clicked, 29),
				(game_key_clicked, 39),
				(call_script, "script_update_order_panel_checked_classes"),
			(try_end),
			(try_begin),
				(this_or_next|game_key_clicked, 23),
				(this_or_next|game_key_clicked, 24),
				(this_or_next|game_key_clicked, 25),
				(this_or_next|game_key_clicked, 26),
				(this_or_next|game_key_clicked, 27),
				(game_key_clicked, 28),
				(get_player_agent_no, ":player_agent_no"),
				(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(try_end),
			(try_begin),
				(gt, ":trigger_param_1", 200),
				(game_key_clicked, 22),
				(try_for_agents, ":var_4"),
					(agent_set_slot, ":var_4", slot_agent_map_overlay_id, 0),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("sliders", 0, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", 0, 100),
			(assign, reg1, 25),
			(str_store_string, 1, "str_reg1"),
			(create_text_overlay, "$g_presentation_obj_sliders_5", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_6", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_7", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_8", 1),
			(assign, "$g_presentation_obj_sliders_1_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 25),
			(assign, "$g_presentation_obj_sliders_2_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_2", 25),
			(assign, "$g_presentation_obj_sliders_3_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_3", 25),
			(assign, "$g_presentation_obj_sliders_4_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_4", 25),
			(position_set_x, 1, 600),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_x, 1, 500),
			(overlay_set_size, "$g_presentation_obj_sliders_3", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_1_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_1_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_2_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_2_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_3_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_3_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_4_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_4_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(assign, ":var_4", 0),
				(val_add, ":var_4", "$g_presentation_obj_sliders_1_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_2_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_3_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_4_val"),
				(store_sub, ":value_2", 100, ":var_4"),
				(assign, ":var_6", "$g_presentation_obj_sliders_1_val"),
				(assign, ":var_7", "$g_presentation_obj_sliders_2_val"),
				(assign, ":var_8", "$g_presentation_obj_sliders_3_val"),
				(assign, ":var_9", "$g_presentation_obj_sliders_4_val"),
				(assign, ":value_3", 1),
				(assign, ":value_4", 0),
				(assign, ":value_5", 100),
				(try_begin),
					(lt, ":value_2", 0),
					(val_mul, ":value_2", -1),
					(assign, ":value_3", -1),
					(assign, ":value_4", 1),
					(assign, ":value_5", 101),
				(try_end),
				(store_sub, ":value_6", ":var_4", ":trigger_param_2"),
				(val_add, ":value_6", 30),
				(try_for_range, ":unused", 0, ":value_2"),
					(store_random_in_range, ":random_in_range_0_value_6", 0, ":value_6"),
					(try_begin),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_1_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_6", ":value_4", ":value_5"),
						(val_add, ":var_6", ":value_3"),
					(else_try),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_2_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_7", ":value_4", ":value_5"),
						(val_add, ":var_7", ":value_3"),
					(else_try),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_3_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_8", ":value_4", ":value_5"),
						(val_add, ":var_8", ":value_3"),
					(else_try),
						(is_between, ":var_9", ":value_4", ":value_5"),
						(val_add, ":var_9", ":value_3"),
					(else_try),
						(val_add, ":value_2", 1),
					(try_end),
				(try_end),
				(assign, "$g_presentation_obj_sliders_1_val", ":var_6"),
				(assign, "$g_presentation_obj_sliders_2_val", ":var_7"),
				(assign, "$g_presentation_obj_sliders_3_val", ":var_8"),
				(assign, "$g_presentation_obj_sliders_4_val", ":var_9"),
			(try_end),
			(overlay_set_val, "$g_presentation_obj_sliders_1", "$g_presentation_obj_sliders_1_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", "$g_presentation_obj_sliders_2_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", "$g_presentation_obj_sliders_3_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", "$g_presentation_obj_sliders_4_val"),
			(assign, reg1, "$g_presentation_obj_sliders_1_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_5", 1),
			(assign, reg1, "$g_presentation_obj_sliders_2_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_6", 1),
			(assign, reg1, "$g_presentation_obj_sliders_3_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_7", 1),
			(assign, reg1, "$g_presentation_obj_sliders_4_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_8", 1)
		])
	]),

	("arena_training", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_kill_count, reg1, ":player_agent_no", 1),
			(str_store_string, 1, "@Number of men knocked down: {reg1}"),
			(create_text_overlay, "$g_presentation_obj_arena_training_1", 1),
			(overlay_set_color, "$g_presentation_obj_arena_training_1", 16777215),
			(position_set_x, 1, 10),
			(position_set_y, 1, 700),
			(overlay_set_position, "$g_presentation_obj_arena_training_1", 1),
			(assign, reg1, 0),
			(str_store_string, 1, "@Number of men left: {reg1}"),
			(create_text_overlay, "$g_presentation_obj_arena_training_2", 1),
			(overlay_set_color, "$g_presentation_obj_arena_training_2", 16777215),
			(position_set_x, 1, 10),
			(position_set_y, 1, 670),
			(overlay_set_position, "$g_presentation_obj_arena_training_2", 1)
		]),

		(ti_on_presentation_run,
		[
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_kill_count, reg1, ":player_agent_no", 1),
			(str_store_string, 1, "@Opponents Beaten: {reg1}"),
			(overlay_set_text, "$g_presentation_obj_arena_training_1", 1),
			(assign, ":var_2", "$g_arena_training_max_opponents"),
			(try_for_agents, ":var_3"),
				(agent_is_human, ":var_3"),
				(neg|agent_is_alive, ":var_3"),
				(neq, ":var_3", ":player_agent_no"),
				(val_sub, ":var_2", 1),
			(try_end),
			(assign, reg1, ":var_2"),
			(str_store_string, 1, "@Opponents Remaining: {reg1}"),
			(overlay_set_text, "$g_presentation_obj_arena_training_2", 1)
		])
	]),

	("retirement", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_button_overlay, "$g_presentation_obj_retirement_1", "@Remain in retirement.", 16),
			(create_button_overlay, "$g_presentation_obj_retirement_2", "@Go back to adventuring.", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 80),
			(overlay_set_position, "$g_presentation_obj_retirement_1", 1),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_presentation_obj_retirement_2", 1),
			(assign, ":var_1", 0),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(store_div, ":value", ":troop_gold_player", 200),
			(val_add, ":var_1", ":value"),
			(assign, ":var_4", 0),
			(assign, ":var_5", 0),
			(assign, ":var_6", 0),
			(assign, ":var_7", 0),
			(assign, ":var_8", 0),
			(assign, ":var_9", 0),
			(assign, ":var_10", 0),
			(try_for_range, ":party", "p_town_1_1", "p_salt_mine"),
				(party_get_slot, ":party_type", ":party", slot_party_type),
				(try_begin),
					(party_slot_eq, ":party", slot_town_lord, "trp_player"),
					(try_begin),
						(eq, ":party_type", 3),
						(val_add, ":var_4", 1),
					(else_try),
						(eq, ":party_type", 2),
						(val_add, ":var_5", 1),
					(else_try),
						(val_add, ":var_6", 1),
					(try_end),
				(try_end),
				(party_get_slot, ":party_center_player_relation", ":party", slot_center_player_relation),
				(try_begin),
					(ge, ":party_center_player_relation", 40),
					(try_begin),
						(eq, ":party_type", 3),
						(val_add, ":var_7", 1),
					(else_try),
						(eq, ":party_type", 4),
						(val_add, ":var_8", 1),
					(try_end),
				(else_try),
					(le, ":party_center_player_relation", -40),
					(try_begin),
						(eq, ":party_type", 3),
						(val_add, ":var_9", 1),
					(else_try),
						(eq, ":party_type", 4),
						(val_add, ":var_10", 1),
					(try_end),
				(try_end),
			(try_end),
			(store_mul, ":value_2", ":var_4", 100),
			(store_mul, ":value_3", ":var_5", 50),
			(store_mul, ":value_4", ":var_6", 20),
			(store_add, ":value_5", ":var_4", ":var_5"),
			(val_add, ":value_5", ":var_6"),
			(store_add, ":value_6", ":value_2", ":value_3"),
			(val_add, ":value_6", ":value_4"),
			(val_add, ":var_1", ":value_6"),
			(store_mul, ":value_7", ":var_7", 20),
			(store_mul, ":value_8", ":var_8", 4),
			(store_add, ":value_9", ":var_7", ":var_8"),
			(store_add, ":value_10", ":value_7", ":value_8"),
			(val_add, ":var_1", ":value_10"),
			(store_mul, ":value_11", ":var_9", -40),
			(store_mul, ":value_12", ":var_10", -8),
			(store_add, ":value_13", ":var_9", ":var_10"),
			(store_add, ":value_14", ":value_11", ":value_12"),
			(val_add, ":var_1", ":value_14"),
			(assign, ":var_27", 0),
			(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
			(try_for_range, ":localvariable", 0, ":inventory_capacity_player"),
				(troop_get_inventory_slot, ":inventory_slot_player_localvariable", "trp_player", ":localvariable"),
				(ge, ":inventory_slot_player_localvariable", 0),
				(store_item_value, ":item_value_inventory_slot_player_localvariable", ":inventory_slot_player_localvariable"),
				(val_add, ":var_27", ":item_value_inventory_slot_player_localvariable"),
			(try_end),
			(store_div, ":value_15", ":var_27", 200),
			(val_add, ":var_1", ":value_15"),
			(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
			(store_div, ":value_16", ":player_renown", 1),
			(val_add, ":var_1", ":value_16"),
			(assign, ":var_35", 0),
			(assign, ":var_36", 0),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(this_or_next|troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(troop_slot_eq, ":troop", slot_troop_occupation, 6),
				(call_script, "script_troop_get_player_relation", ":troop"),
				(assign, ":party_center_player_relation", reg0),
				(try_begin),
					(ge, ":party_center_player_relation", 40),
					(val_add, ":var_36", 1),
				(else_try),
					(le, ":party_center_player_relation", -40),
					(val_add, ":var_35", 1),
				(try_end),
			(try_end),
			(store_mul, ":value_17", ":var_36", 10),
			(val_add, ":var_1", ":value_17"),
			(store_mul, ":value_18", ":var_35", -10),
			(val_add, ":var_1", ":value_18"),
			(store_current_day, ":current_day"),
			(store_div, ":value_19", ":current_day", -1),
			(val_add, ":var_1", ":value_19"),
			(store_mul, ":value_20", "$g_total_victories", 2),
			(val_add, ":var_1", ":value_20"),
			(store_mul, ":value_21", "$g_total_defeats", -3),
			(val_add, ":var_1", ":value_21"),
			(store_mul, ":value_22", "$g_total_quests_completed", 4),
			(val_add, ":var_1", ":value_22"),
			(troop_get_xp, ":xp_player", "trp_player"),
			(store_div, ":value_23", ":xp_player", 5000),
			(val_add, ":var_1", ":value_23"),
			(assign, ":var_47", 0),
			(assign, ":var_48", 0),
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(try_begin),
					(troop_slot_eq, ":troop", slot_troop_occupation, 5),
					(val_add, ":var_47", 1),
				(else_try),
					(troop_slot_ge, ":troop", 82, 1),
					(val_add, ":var_48", 1),
				(try_end),
			(try_end),
			(store_div, ":value_24", ":var_47", 2),
			(val_add, ":var_1", ":value_24"),
			(store_div, ":value_25", ":var_48", -4),
			(val_add, ":var_1", ":value_25"),
			(get_average_game_difficulty, ":average_game_difficulty"),
			(assign, ":value_26", ":var_1"),
			(val_mul, ":var_1", ":average_game_difficulty"),
			(val_div, ":var_1", 75),
			(val_mul, ":var_1", ":average_game_difficulty"),
			(val_div, ":var_1", 75),
			(store_sub, ":value_26", ":var_1", ":value_26"),
			(assign, reg5, ":current_day"),
			(store_character_level, reg4, "trp_player"),
			(create_text_overlay, reg1, "@You have retired at level {reg4} after {reg5} days of adventuring.", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 950),
			(position_set_y, 1, 950),
			(overlay_set_size, reg1, 1),
			(create_text_overlay, reg2, "@Effect on Score", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg2, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 670),
			(overlay_set_position, reg2, 1),
			(assign, reg0, ":value_5"),
			(create_text_overlay, reg1, "@Settlements owned by you: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_6"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":value_9"),
			(create_text_overlay, reg1, "@Friendly Settlements: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 630),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_10"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 630),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":value_13"),
			(create_text_overlay, reg1, "@Hostile Settlements: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 610),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_14"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 610),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":var_36"),
			(create_text_overlay, reg1, "@Friendly Lords: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 590),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_17"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 590),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_35"),
			(create_text_overlay, reg1, "@Enemy Lords: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 570),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_18"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 570),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, "$g_total_victories"),
			(create_text_overlay, reg1, "@Victories: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_20"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, "$g_total_defeats"),
			(create_text_overlay, reg1, "@Defeats: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 530),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_21"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 530),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, "$g_total_quests_completed"),
			(create_text_overlay, reg1, "@Quests Completed: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 510),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_22"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 510),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_47"),
			(create_text_overlay, reg1, "@Companions Found: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 490),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_24"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 490),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_48"),
			(create_text_overlay, reg1, "@Companions Lost/Departed: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 470),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_25"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 470),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":troop_gold_player"),
			(create_text_overlay, reg1, "@Wealth: {reg0} florins", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 450),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 450),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_27"),
			(create_text_overlay, reg1, "@Inventory: {reg0} florins", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 430),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_15"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 430),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":player_renown"),
			(create_text_overlay, reg1, "@Renown: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 410),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_16"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 410),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":xp_player"),
			(create_text_overlay, reg1, "@Experience: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 390),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_23"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 390),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":current_day"),
			(create_text_overlay, reg1, "@Days Passed: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 370),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_19"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 370),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":average_game_difficulty"),
			(create_text_overlay, reg1, "@Difficulty: {reg0}%", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_26"),
			(assign, reg3, reg0),
			(val_max, reg3, 0),
			(create_text_overlay, reg1, "@{!}{reg3?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(else_try),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":var_1"),
			(create_text_overlay, reg1, "@TOTAL SCORE: {reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 320),
			(overlay_set_position, reg1, 1),
			(assign, ":var_53", 0),
			(assign, ":var_54", 0),
			(assign, ":var_55", 0),
			(assign, ":var_56", 0),
			(assign, ":var_57", 0),
			(assign, ":var_58", 0),
			(try_for_range, ":party_2", "p_town_1_1", "p_salt_mine"),
				(try_begin),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(try_begin),
						(party_slot_eq, ":party_2", slot_party_type, 3),
						(val_add, ":var_55", 1),
					(else_try),
						(party_slot_eq, ":party_2", slot_party_type, 2),
						(val_add, ":var_54", 1),
					(else_try),
						(val_add, ":var_53", 1),
					(try_end),
				(else_try),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(try_begin),
						(party_slot_eq, ":party_2", slot_party_type, 3),
						(val_add, ":var_58", ":party_2_center_player_relation"),
					(else_try),
						(party_slot_eq, ":party_2", slot_party_type, 2),
						(val_add, ":var_57", ":party_2_center_player_relation"),
					(else_try),
						(val_add, ":var_56", ":party_2_center_player_relation"),
					(try_end),
				(try_end),
			(try_end),
			(try_begin),
				(gt, ":var_55", 0),
				(store_random_in_range, ":random_in_range_0_var_55", 0, ":var_55"),
				(try_for_range, ":party_2", "p_town_1_1", "p_castle_1_1"),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(val_sub, ":random_in_range_0_var_55", 1),
					(lt, ":random_in_range_0_var_55", 0),
					(str_store_party_name, 9, ":party_2"),
				(try_end),
			(else_try),
				(gt, ":var_58", 0),
				(store_random_in_range, ":random_in_range_0_var_58", 0, ":var_58"),
				(try_for_range, ":party_2", "p_town_1_1", "p_castle_1_1"),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(val_sub, ":random_in_range_0_var_58", ":party_2_center_player_relation"),
					(lt, ":random_in_range_0_var_58", 0),
					(str_store_party_name, 9, ":party_2"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_0_var_55", "p_town_1_1", "p_castle_1_1"),
				(str_store_party_name, 9, ":random_in_range_0_var_55"),
			(try_end),
			(try_begin),
				(gt, ":var_54", 0),
				(store_random_in_range, ":random_in_range_0_var_54", 0, ":var_54"),
				(try_for_range, ":party_2", "p_castle_1_1", "p_village_1_1"),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(val_sub, ":random_in_range_0_var_54", 1),
					(lt, ":random_in_range_0_var_54", 0),
					(str_store_party_name, 8, ":party_2"),
				(try_end),
			(else_try),
				(gt, ":var_57", 0),
				(store_random_in_range, ":random_in_range_0_var_57", 0, ":var_57"),
				(try_for_range, ":party_2", "p_castle_1_1", "p_village_1_1"),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(val_sub, ":random_in_range_0_var_57", ":party_2_center_player_relation"),
					(lt, ":random_in_range_0_var_57", 0),
					(str_store_party_name, 8, ":party_2"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_0_var_54", "p_castle_1_1", "p_village_1_1"),
				(str_store_party_name, 8, ":random_in_range_0_var_54"),
			(try_end),
			(try_begin),
				(gt, ":var_53", 0),
				(store_random_in_range, ":random_in_range_0_var_53", 0, ":var_53"),
				(try_for_range, ":party_2", "p_village_1_1", "p_salt_mine"),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(val_sub, ":random_in_range_0_var_53", 1),
					(lt, ":random_in_range_0_var_53", 0),
					(str_store_party_name, 7, ":party_2"),
				(try_end),
			(else_try),
				(gt, ":var_56", 0),
				(store_random_in_range, ":random_in_range_0_var_56", 0, ":var_56"),
				(try_for_range, ":party_2", "p_village_1_1", "p_salt_mine"),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(val_sub, ":random_in_range_0_var_56", ":party_2_center_player_relation"),
					(lt, ":random_in_range_0_var_56", 0),
					(str_store_party_name, 7, ":party_2"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_0_var_53", "p_village_1_1", "p_salt_mine"),
				(str_store_party_name, 7, ":random_in_range_0_var_53"),
			(try_end),
			(try_begin),
				(lt, ":var_1", 100),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 0),
				(str_store_string, 0, "str_retirement_text_1"),
			(else_try),
				(lt, ":var_1", 200),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 1),
				(str_store_string, 0, "str_retirement_text_2"),
			(else_try),
				(lt, ":var_1", 400),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 2),
				(str_store_string, 0, "str_retirement_text_3"),
			(else_try),
				(lt, ":var_1", 700),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 3),
				(str_store_string, 0, "str_retirement_text_4"),
			(else_try),
				(lt, ":var_1", 1200),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 4),
				(str_store_string, 0, "str_retirement_text_5"),
			(else_try),
				(lt, ":var_1", 1850),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 5),
				(str_store_string, 0, "str_retirement_text_6"),
			(else_try),
				(lt, ":var_1", 2500),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 6),
				(str_store_string, 0, "str_retirement_text_7"),
			(else_try),
				(lt, ":var_1", 3500),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 7),
				(str_store_string, 0, "str_retirement_text_8"),
			(else_try),
				(lt, ":var_1", 5000),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 8),
				(str_store_string, 0, "str_retirement_text_9"),
			(else_try),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 9),
				(str_store_string, 0, "str_retirement_text_10"),
			(try_end),
			(position_set_x, 1, 0),
			(position_set_y, 1, 120),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, 0, 10240),
			(position_set_x, 1, 600),
			(position_set_y, 1, 120),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 360),
			(position_set_y, 1, 190),
			(overlay_set_area_size, reg1, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg1, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_retirement_1"),
				(jump_to_menu, "mnu_end_game"),
				(start_presentation, "prsnt_game_credits"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_retirement_2"),
				(presentation_set_duration, 0),
				(change_screen_return),
			(try_end)
		])
	]),

	("budget_report", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg1, "mesh_pic_payment"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 170),
			(position_set_y, 1, 0),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_weekly_budget", 16),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 260),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 0),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 505),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
			(try_begin),
				(eq, "$tom_difficulty_fief", 0),
				(assign, ":value", 2),
				(assign, ":value_2", 5),
			(else_try),
				(eq, "$tom_difficulty_fief", 1),
				(assign, ":value", 4),
				(assign, ":value_2", 4),
			(else_try),
				(eq, "$tom_difficulty_fief", 2),
				(assign, ":value", 6),
				(assign, ":value_2", 3),
			(try_end),
			(assign, ":var_4", 0),
			(assign, ":var_5", 0),
			(assign, ":var_6", 0),
			(assign, ":var_7", 0),
			(try_for_range, ":party", "p_town_1_1", "p_salt_mine"),
				(try_begin),
					(party_slot_ge, ":party", 137, 1),
					(val_add, ":var_4", 1),
				(try_end),
				(party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(val_add, ":var_4", 1),
				(val_add, ":var_5", 1),
				(try_begin),
					(is_between, ":party", "p_town_1_1", "p_castle_1_1"),
					(val_add, ":var_4", 1),
					(val_add, ":var_5", 1),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$players_kingdom", 0),
				(neq, "$players_kingdom", "fac_player_supporters_faction"),
				(neq, "$players_kingdom", "fac_player_faction"),
				(eq, "$player_has_homage", 0),
				(val_add, ":var_4", 1),
			(try_end),
			(try_begin),
				(gt, ":var_5", ":value"),
				(val_add, ":var_4", 1),
			(try_end),
			(try_for_parties, ":value_3"),
				(assign, ":value_4", 0),
				(try_begin),
					(this_or_next|party_slot_eq, ":value_3", slot_party_type, 3),
					(party_slot_eq, ":value_3", slot_party_type, 2),
					(party_slot_eq, ":value_3", slot_town_lord, "trp_player"),
					(assign, ":value_4", 1),
				(else_try),
					(this_or_next|party_slot_eq, ":value_3", slot_party_type, 3),
					(party_slot_eq, ":value_3", slot_party_type, 2),
					(neg|party_slot_ge, ":value_3", 7, 1),
					(store_faction_of_party, ":faction_of_party_value_3", ":value_3"),
					(eq, ":faction_of_party_value_3", "fac_player_supporters_faction"),
					(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
					(assign, ":value_4", 1),
				(try_end),
				(this_or_next|eq, ":value_3", "p_main_party"),
				(assign, ":var_12", 0),
				(this_or_next|eq, ":var_12", 1),
				(eq, ":value_4", 1),
				(val_add, ":var_4", 1),
			(try_end),
			(try_begin),
				(gt, "$g_player_debt_to_party_members", 0),
				(val_add, ":var_4", 2),
			(try_end),
			(val_add, ":var_4", 1),
			(try_begin),
				(this_or_next|gt, "$g_player_minister", 0),
				(this_or_next|troop_slot_ge, "trp_player", 30, 0),
				(this_or_next|gt, "$g_player_chamberlain", 0),
				(gt, "$g_player_constable", 0),
				(val_add, ":var_4", 1),
			(try_end),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(val_add, ":var_4", 2),
			(try_end),
			(val_add, ":var_4", 3),
			(store_mul, ":value_5", 27, ":var_4"),
			(assign, ":var_14", 0),
			(try_for_range, ":party", "p_town_1_1", "p_salt_mine"),
				(try_begin),
					(party_get_slot, ":party_center_player_enterprise", ":party", slot_center_player_enterprise),
					(gt, ":party_center_player_enterprise", 1),
					(neg|party_slot_ge, ":party", 139, 1),
					(str_store_party_name, 0, ":party"),
					(call_script, "script_tom_process_player_enterprise", ":party_center_player_enterprise", ":party", 0),
					(assign, ":value_6", reg0),
					(assign, ":var_17", reg4),
					(assign, ":var_18", reg5),
					(assign, ":var_19", reg10),
					(store_sub, ":value_7", ":party", "p_town_1_1"),
					(store_add, ":value_8", ":value_7", "trp_town_1_master_craftsman"),
					(item_get_slot, ":party_center_player_enterprise_output_per_run", ":party_center_player_enterprise", slot_item_output_per_run),
					(assign, ":value_9", 0),
					(try_begin),
						(party_slot_eq, ":party", slot_center_player_enterprise_production_order, 1),
						(assign, ":var_24", 0),
						(troop_get_inventory_capacity, ":inventory_capacity_value_8", ":value_8"),
						(try_for_range, ":localvariable", 0, ":inventory_capacity_value_8"),
							(troop_get_inventory_slot, ":inventory_slot_value_8_localvariable", ":value_8", ":localvariable"),
							(lt, ":inventory_slot_value_8_localvariable", 1),
							(val_add, ":var_24", 1),
						(try_end),
						(assign, ":value_9", ":party_center_player_enterprise_output_per_run"),
						(val_min, ":value_9", ":var_24"),
						(gt, ":value_9", 0),
						(store_mul, ":value_10", ":var_17", ":value_9"),
						(val_sub, ":value_6", ":value_10"),
						(val_sub, ":party_center_player_enterprise_output_per_run", ":value_9"),
					(try_end),
					(try_begin),
						(eq, "$g_apply_budget_report_to_gold", 1),
						(troop_add_items, ":value_8", ":party_center_player_enterprise", ":value_9"),
						(store_sub, ":value_11", ":party_center_player_enterprise", "itm_spice"),
						(val_add, ":value_11", 250),
						(party_get_slot, ":party_value_11", ":party", ":value_11"),
						(store_mul, ":value_12", ":party_center_player_enterprise_output_per_run", 15),
						(val_sub, ":party_value_11", ":value_12"),
						(party_set_slot, ":party", ":value_11", ":party_value_11"),
						(gt, "$cheat_mode", 0),
						(str_store_troop_name, 3, ":value_8"),
						(assign, reg3, ":value_9"),
						(display_message, "@{!}DEBUG -- Adding {reg3} items to {s3}"),
					(try_end),
					(item_get_slot, ":party_center_player_enterprise_input_number", ":party_center_player_enterprise", slot_item_input_number),
					(try_begin),
						(item_slot_ge, ":party_center_player_enterprise", 57, 1),
						(assign, ":value_13", ":party_center_player_enterprise_input_number"),
					(else_try),
						(assign, ":value_13", 0),
					(try_end),
					(assign, ":var_34", 0),
					(assign, ":var_35", 0),
					(try_begin),
						(troop_get_inventory_capacity, ":inventory_capacity_value_8", ":value_8"),
						(try_for_range, ":localvariable", 0, ":inventory_capacity_value_8"),
							(troop_get_inventory_slot, ":inventory_slot_value_8_localvariable_2", ":value_8", ":localvariable"),
							(lt, ":var_34", ":party_center_player_enterprise_input_number"),
							(item_slot_eq, ":party_center_player_enterprise", slot_item_primary_raw_material, ":inventory_slot_value_8_localvariable_2"),
							(val_add, ":var_34", 1),
						(else_try),
							(lt, ":var_35", ":value_13"),
							(item_slot_eq, ":party_center_player_enterprise", slot_item_secondary_raw_material, ":inventory_slot_value_8_localvariable_2"),
							(val_add, ":var_35", 1),
						(try_end),
						(try_begin),
							(gt, ":var_34", 0),
							(val_sub, ":party_center_player_enterprise_input_number", ":var_34"),
							(store_mul, ":value_14", ":var_18", ":var_34"),
							(val_add, ":value_6", ":value_14"),
						(try_end),
						(try_begin),
							(gt, ":var_35", 0),
							(val_sub, ":value_13", ":var_35"),
							(assign, ":value_14", ":var_19"),
							(val_add, ":value_6", ":value_14"),
						(try_end),
					(try_end),
					(try_begin),
						(eq, "$g_apply_budget_report_to_gold", 1),
						(item_get_slot, ":party_center_player_enterprise_primary_raw_material", ":party_center_player_enterprise", slot_item_primary_raw_material),
						(troop_remove_items, ":value_8", ":party_center_player_enterprise_primary_raw_material", ":var_34"),
						(item_get_slot, ":party_center_player_enterprise_secondary_raw_material", ":party_center_player_enterprise", slot_item_secondary_raw_material),
						(troop_remove_items, ":value_8", ":party_center_player_enterprise_secondary_raw_material", ":var_35"),
						(store_sub, ":value_11", ":party_center_player_enterprise_primary_raw_material", "itm_spice"),
						(val_add, ":value_11", 250),
						(party_get_slot, ":party_value_11", ":party", ":value_11"),
						(store_mul, ":value_12", ":party_center_player_enterprise_output_per_run", 15),
						(val_add, ":party_value_11", ":value_12"),
						(party_set_slot, ":party", ":value_11", ":party_value_11"),
						(try_begin),
							(gt, ":value_13", 0),
							(store_sub, ":value_11", ":party_center_player_enterprise_secondary_raw_material", "itm_spice"),
							(val_add, ":value_11", 250),
							(party_get_slot, ":party_value_11", ":party", ":value_11"),
							(val_add, ":party_value_11", 15),
							(party_set_slot, ":party", ":value_11", ":party_value_11"),
						(try_end),
					(try_end),
					(call_script, "script_get_enterprise_name", ":party_center_player_enterprise"),
					(str_store_string, 5, reg0),
					(create_text_overlay, reg1, "str_enterprise_s5_at_s0", 0),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 25),
					(position_set_y, 1, ":value_5"),
					(overlay_set_position, reg1, 1),
					(assign, reg0, ":value_6"),
					(try_begin),
						(store_faction_of_party, ":faction_of_party_party", ":party"),
						(store_relation, ":relation_faction_of_party_party_players_kingdom", ":faction_of_party_party", "$players_kingdom"),
						(lt, ":relation_faction_of_party_party_players_kingdom", 0),
						(assign, reg0, 0),
						(assign, ":value_6", 0),
						(create_text_overlay, reg1, "str_under_sequestration", 32776),
						(overlay_set_color, reg1, 16711680),
					(else_try),
						(ge, reg0, 0),
						(create_text_overlay, reg1, "@{!}{reg0}", 32776),
						(overlay_set_color, reg1, 43520),
					(else_try),
						(create_text_overlay, reg1, "@{!}{reg0}", 32776),
						(overlay_set_color, reg1, 16711680),
					(try_end),
					(val_add, ":var_6", ":value_6"),
					(val_add, ":var_14", ":value_6"),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 500),
					(position_set_y, 1, ":value_5"),
					(overlay_set_position, reg1, 1),
					(val_sub, ":value_5", 27),
				(try_end),
				(party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(party_get_slot, ":party_center_accumulated_rents", ":party", slot_center_accumulated_rents),
				(party_get_slot, ":party_center_accumulated_tariffs", ":party", slot_center_accumulated_tariffs),
				(store_add, ":value_15", ":party_center_accumulated_rents", ":party_center_accumulated_tariffs"),
				(val_add, ":var_6", ":value_15"),
				(val_add, ":var_7", ":value_15"),
				(val_add, ":var_14", ":value_15"),
				(str_store_party_name, 0, ":party"),
				(try_begin),
					(neg|is_between, ":party", "p_castle_1_1", "p_village_1_1"),
					(party_get_slot, ":party_400", ":party", 400),
					(neq, ":party_400", 0),
					(call_script, "script_dplmc_describe_tax_rate_to_s50", ":party_400"),
					(str_store_string, 0, "@{s0} ({s50})"),
				(try_end),
				(create_text_overlay, reg1, "str_rents_from_s0", 0),
				(str_store_party_name, 0, ":party"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(try_begin),
					(gt, ":party_center_accumulated_rents", 0),
					(assign, reg0, ":party_center_accumulated_rents"),
					(create_text_overlay, reg1, "@{!}{reg0}", 32776),
					(overlay_set_color, reg1, 43520),
				(else_try),
					(create_text_overlay, reg1, "@None", 32776),
				(try_end),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
				(try_begin),
					(is_between, ":party", "p_town_1_1", "p_castle_1_1"),
					(create_text_overlay, reg1, "str_tariffs_from_s0", 0),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 25),
					(position_set_y, 1, ":value_5"),
					(overlay_set_position, reg1, 1),
					(try_begin),
						(gt, ":party_center_accumulated_tariffs", 0),
						(assign, reg0, ":party_center_accumulated_tariffs"),
						(create_text_overlay, reg1, "@{!}{reg0}", 32776),
						(overlay_set_color, reg1, 43520),
					(else_try),
						(create_text_overlay, reg1, "@None", 32776),
					(try_end),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 500),
					(position_set_y, 1, ":value_5"),
					(overlay_set_position, reg1, 1),
					(val_sub, ":value_5", 27),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$players_kingdom", 0),
				(neq, "$players_kingdom", "fac_player_supporters_faction"),
				(neq, "$players_kingdom", "fac_player_faction"),
				(eq, "$player_has_homage", 0),
				(str_store_faction_name, 0, "$players_kingdom"),
				(store_current_day, ":current_day"),
				(store_sub, reg25, "$mercenary_service_next_renew_day", ":current_day"),
				(str_store_string, 25, "str_mercenary_payment_from_s0"),
				(str_store_string, 26, "@{s25} ({reg25} day(s) left):"),
				(create_text_overlay, reg1, 26, 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(call_script, "script_game_get_total_wage"),
				(assign, ":var_47", reg0),
				(val_add, ":var_47", 750),
				(val_min, ":var_47", 3000),
				(call_script, "script_round_value", ":var_47"),
				(val_add, ":var_14", reg0),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 43520),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
			(try_end),
			(try_begin),
				(gt, ":var_5", ":value"),
				(gt, ":var_6", 0),
				(store_sub, ":value_16", ":var_5", ":value"),
				(val_mul, ":value_16", ":value_2"),
				(val_min, ":value_16", 65),
				(store_mul, ":value_17", ":var_7", ":value_16"),
				(val_div, ":value_17", 100),
				(assign, ":value_18", 0),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(val_add, ":value_18", 10),
				(try_end),
				(store_mul, ":value_19", ":value_17", ":value_18"),
				(val_div, ":value_19", 100),
				(store_mul, ":value_18", ":value_19", 100),
				(val_div, ":value_18", ":value_17"),
				(val_sub, ":value_17", ":value_19"),
				(val_sub, ":var_14", ":value_17"),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(str_store_string, 55, "str_loss_due_to_tax_inefficiency"),
					(assign, reg0, ":value_18"),
					(str_store_string, 55, "@{s55} (-{reg0}%)"),
					(create_text_overlay, reg1, "@{s55}", 0),
				(else_try),
					(create_text_overlay, reg1, "str_loss_due_to_tax_inefficiency", 0),
				(try_end),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(store_mul, reg0, ":value_17", -1),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16711680),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
			(try_end),
			(try_for_parties, ":value_3"),
				(assign, ":value_4", 0),
				(try_begin),
					(this_or_next|party_slot_eq, ":value_3", slot_party_type, 3),
					(party_slot_eq, ":value_3", slot_party_type, 2),
					(party_slot_eq, ":value_3", slot_town_lord, "trp_player"),
					(assign, ":value_4", 1),
				(else_try),
					(this_or_next|party_slot_eq, ":value_3", slot_party_type, 3),
					(party_slot_eq, ":value_3", slot_party_type, 2),
					(neg|party_slot_ge, ":value_3", 7, 1),
					(store_faction_of_party, ":faction_of_party_value_3", ":value_3"),
					(eq, ":faction_of_party_value_3", "fac_player_supporters_faction"),
					(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
					(party_slot_eq, ":value_3", 700, 1),
					(assign, ":value_4", 1),
				(try_end),
				(this_or_next|eq, ":value_3", "p_main_party"),
				(eq, ":value_4", 1),
				(assign, ":var_52", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_value_3", ":value_3"),
				(try_for_range, ":localvariable_2", 0, ":num_companion_stacks_value_3"),
					(party_stack_get_troop_id, ":party_stack_troop_id_value_3_localvariable_2", ":value_3", ":localvariable_2"),
					(party_stack_get_size, ":party_stack_size_value_3_localvariable_2", ":value_3", ":localvariable_2"),
					(call_script, "script_game_get_troop_wage", ":party_stack_troop_id_value_3_localvariable_2", ":value_3"),
					(assign, ":var_57", reg0),
					(val_mul, ":var_57", ":party_stack_size_value_3_localvariable_2"),
					(val_add, ":var_52", ":var_57"),
				(try_end),
				(try_begin),
					(eq, ":value_4", 1),
					(party_slot_eq, ":value_3", 700, 0),
					(val_min, ":var_52", 3000),
				(else_try),
					(eq, ":value_4", 1),
					(val_div, ":var_52", 3),
				(else_try),
					(eq, ":value_3", "p_main_party"),
					(store_sub, ":value_20", 14, "$g_cur_week_half_daily_wage_payments"),
					(val_mul, ":var_52", ":value_20"),
					(val_div, ":var_52", 14),
				(try_end),
				(val_mul, ":var_52", -1),
				(val_add, ":var_14", ":var_52"),
				(str_store_party_name, 0, ":value_3"),
				(try_begin),
					(eq, ":value_3", "p_main_party"),
					(str_store_string, 0, "str_s0s_party"),
				(try_end),
				(create_text_overlay, reg1, "str_wages_for_s0", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(try_begin),
					(lt, ":var_52", 0),
					(assign, reg0, ":var_52"),
					(create_text_overlay, reg1, "@{!}{reg0}", 32776),
					(overlay_set_color, reg1, 16711680),
				(else_try),
					(create_text_overlay, reg1, "@None", 32776),
				(try_end),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
			(try_end),
			(try_begin),
				(gt, "$g_player_debt_to_party_members", 0),
				(val_sub, ":var_14", "$g_player_debt_to_party_members"),
				(create_text_overlay, reg1, "str_earlier_debts", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(store_mul, reg0, "$g_player_debt_to_party_members", -1),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16711680),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
			(try_end),
			(assign, ":var_59", 0),
			(try_begin),
				(gt, "$g_player_minister", 0),
				(val_add, ":var_59", 15),
			(try_end),
			(try_begin),
				(troop_slot_ge, "trp_player", 30, 0),
				(val_add, ":var_59", 10),
			(try_end),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(val_add, ":var_59", 15),
			(try_end),
			(try_begin),
				(gt, "$g_player_constable", 0),
				(val_add, ":var_59", 15),
			(try_end),
			(try_begin),
				(gt, "$g_player_chancellor", 0),
				(val_add, ":var_59", 20),
			(try_end),
			(try_begin),
				(gt, ":var_59", 0),
				(val_sub, ":var_14", ":var_59"),
				(create_text_overlay, reg1, "@Staff:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(store_mul, reg0, ":var_59", -1),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16711680),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
			(try_end),
			(create_mesh_overlay, reg1, "mesh_white_plane"),
			(overlay_set_color, reg1, 0),
			(position_set_x, 1, 24000),
			(position_set_y, 1, 50),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(store_add, ":value_21", ":value_5", 25),
			(position_set_y, 1, ":value_21"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_net_change", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":var_14"),
			(create_text_overlay, reg1, "@{!}{reg0}", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(else_try),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_5", 27),
			(create_text_overlay, reg1, "str_earlier_wealth", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(else_try),
				(store_troop_gold, ":troop_gold_household_possessions", "trp_player"),
			(try_end),
			(assign, reg0, ":troop_gold_household_possessions"),
			(create_text_overlay, reg1, "@{!}{reg0}", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_5", 27),
			(val_mul, ":var_14", -1),
			(assign, ":value_22", 0),
			(try_begin),
				(ge, ":troop_gold_household_possessions", ":var_14"),
				(assign, ":value_23", ":var_14"),
				(assign, ":value_24", 0),
			(else_try),
				(assign, ":value_23", ":troop_gold_household_possessions"),
				(store_sub, ":value_24", ":var_14", ":troop_gold_household_possessions"),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(store_troop_gold, ":troop_gold_player", "trp_player"),
					(try_begin),
						(ge, ":troop_gold_player", ":value_24"),
						(assign, ":value_22", ":value_24"),
						(assign, ":value_24", 0),
					(else_try),
						(assign, ":value_22", ":troop_gold_player"),
						(val_sub, ":value_24", ":troop_gold_player"),
					(try_end),
					(try_begin),
						(eq, "$g_apply_budget_report_to_gold", 1),
						(troop_remove_gold, "trp_player", ":value_22"),
						(assign, reg0, ":value_22"),
						(display_message, "@You paid {reg0} cash to liquidate a debt"),
					(try_end),
				(try_end),
			(try_end),
			(create_text_overlay, reg1, "str_new_wealth", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(store_sub, reg0, ":troop_gold_household_possessions", ":value_23"),
			(create_text_overlay, reg1, "@{!}{reg0}", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_5", 27),
			(store_current_hours, ":current_hours"),
			(store_add, ":value_25", "$g_last_payday", 168),
			(store_sub, ":value_26", ":value_25", ":current_hours"),
			(store_div, reg25, ":value_26", 24),
			(store_mul, ":value_27", reg25, 24),
			(store_sub, reg24, ":value_26", ":value_27"),
			(create_text_overlay, reg1, "@Next Payday", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@{!}{reg25} days(s) {reg24} hour(s)", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_5", 27),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(gt, ":value_22", 0),
				(create_text_overlay, reg1, "@Earlier cash:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(assign, reg0, ":troop_gold_player"),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
				(create_text_overlay, reg1, "@New cash:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(store_sub, reg0, ":troop_gold_player", ":value_22"),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
			(try_end),
			(try_begin),
				(gt, ":value_24", 0),
				(create_text_overlay, reg1, "str_new_debts", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(assign, reg0, ":value_24"),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_5", 27),
				(neq, "$g_apply_budget_report_to_gold", 0),
				(call_script, "script_objectionable_action", 2, "str_men_unpaid"),
			(try_end),
			(set_container_overlay, -1),
			(create_button_overlay, "$g_presentation_obj_budget_report_1", "@Continue..."),
			(position_set_x, 1, 225),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_budget_report_1", 1),
			(try_begin),
				(eq, "$g_apply_budget_report_to_gold", 1),
				(assign, "$g_player_debt_to_party_members", ":value_24"),
				(try_begin),
					(gt, ":value_23", 0),
					(try_begin),
						(gt, "$g_player_chamberlain", 0),
						(call_script, "script_dplmc_withdraw_from_treasury", ":value_23"),
					(else_try),
						(troop_remove_gold, "trp_player", ":value_23"),
					(try_end),
				(else_try),
					(val_mul, ":value_23", -1),
					(try_begin),
						(gt, "$g_player_chamberlain", 0),
						(call_script, "script_dplmc_pay_into_treasury", ":value_23"),
					(else_try),
						(troop_add_gold, "trp_player", ":value_23"),
					(try_end),
				(try_end),
				(try_for_range, ":party", "p_town_1_1", "p_salt_mine"),
					(party_slot_eq, ":party", slot_town_lord, "trp_player"),
					(party_set_slot, ":party", slot_center_accumulated_rents, 0),
					(party_set_slot, ":party", slot_center_accumulated_tariffs, 0),
				(try_end),
				(assign, "$g_cur_week_half_daily_wage_payments", 0),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_budget_report_1"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_before_quit", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(try_begin),
				(is_trial_version),
				(set_fixed_point_multiplier, 1000),
				(create_mesh_overlay, reg0, "mesh_quit_adv"),
				(position_set_x, 1, -1),
				(position_set_y, 1, -1),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1002),
				(position_set_y, 1, 1002),
				(overlay_set_size, reg0, 1),
				(assign, "$g_game_before_quit_state", 0),
				(presentation_set_duration, 999999),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(gt, ":trigger_param_1", 500),
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 224),
				(this_or_next|key_clicked, 225),
				(this_or_next|key_clicked, 252),
				(key_clicked, 253),
				(try_begin),
					(eq, "$g_game_before_quit_state", 0),
					(val_add, "$g_game_before_quit_state", 1),
					(create_mesh_overlay, reg0, "mesh_quit_adv_b"),
					(position_set_x, 1, -1),
					(position_set_y, 1, -1),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 1002),
					(position_set_y, 1, 1002),
					(overlay_set_size, reg0, 1),
				(else_try),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("multiplayer_duel_start_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_duel_start_counter_overlay", -1),
			(assign, "$g_multiplayer_last_duel_start_counter_value", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_duel_start_counter_overlay", 0, 65552),
			(overlay_set_color, "$g_multiplayer_duel_start_counter_overlay", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_multiplayer_duel_start_counter_overlay", 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, "$g_multiplayer_duel_start_counter_overlay", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(ge, "$g_multiplayer_duel_start_counter_overlay", 0),
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, ":value", ":mission_timer_a", "$g_multiplayer_duel_start_time"),
			(store_sub, ":value_2", 3, ":value"),
			(try_begin),
				(le, ":value_2", 0),
				(presentation_set_duration, 0),
			(else_try),
				(neq, "$g_multiplayer_last_duel_start_counter_value", ":value_2"),
				(assign, "$g_multiplayer_last_duel_start_counter_value", ":value_2"),
				(assign, reg0, ":value_2"),
				(str_store_string, 0, "str_duel_starts_in_reg0_seconds"),
				(overlay_set_text, "$g_multiplayer_duel_start_counter_overlay", 0),
			(try_end)
		])
	]),

	("faction_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(try_begin),
				(lt, "$g_start_faction", 0),
				(assign, "$g_start_faction", "fac_kingdom_1"),
			(else_try),
				(lt, "$g_start_faction", "fac_kingdom_1"),
				(store_sub, ":value", "fac_kingdoms_end", 1),
				(assign, "$g_start_faction", ":value"),
			(else_try),
				(ge, "$g_start_faction", "fac_kingdoms_end"),
				(assign, "$g_start_faction", "fac_kingdom_1"),
			(try_end),
			(store_sub, ":value_2", "$g_start_faction", "fac_kingdom_1"),
			(set_fixed_point_multiplier, 1000),
			(str_store_faction_name, 1, "$g_start_faction"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 625),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_game_button_overlay, "$g_presentation_obj_faction_selection_2", "@Next"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_faction_selection_2", 1),
			(create_game_button_overlay, "$g_presentation_obj_faction_selection_3", "@Previous"),
			(position_set_x, 1, 100),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_faction_selection_3", 1),
			(create_game_button_overlay, "$g_presentation_obj_faction_selection_4", "@Accept"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_faction_selection_4", 1),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_banner_selection_1", 1),
			(store_add, ":value_3", "mesh_pic_arms_teutonic", ":value_2"),
			(create_mesh_overlay, reg1, ":value_3"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_faction_selection_2"),
				(val_add, "$g_start_faction", 1),
				(start_presentation, "prsnt_faction_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_faction_selection_3"),
				(val_sub, "$g_start_faction", 1),
				(start_presentation, "prsnt_faction_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_faction_selection_4"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_choose_skill"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("autoloot_upgrade_management", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", "$temp"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 200),
			(position_set_y, 1, 560),
			(overlay_set_position, reg0, 1),
			(str_store_troop_name, 1, "$temp"),
			(store_character_level, ":character_level_temp", "$temp"),
			(assign, reg1, ":character_level_temp"),
			(str_store_string, 1, "@Name: {s1}^Level: {reg1}"),
			(store_troop_health, ":troop_health_temp_1", "$temp", 1),
			(call_script, "script_get_troop_max_hp", "$temp"),
			(assign, reg1, ":troop_health_temp_1"),
			(assign, reg2, reg0),
			(str_store_string, 1, "@{s1}^HP: {reg1}/{reg2}"),
			(create_text_overlay, reg1, "@{s1}", 2048),
			(position_set_x, 1, 380),
			(position_set_y, 1, 560),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Weapon upgrade settings:", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 530),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 0),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(troop_set_slot, "trp_temp_array_c", ":value", ":value_2"),
				(val_add, ":value", 1),
			(try_end),
			(troop_get_slot, ":temp_2506", "$temp", 2506),
			(store_sub, ":value_3", 1, ":temp_2506"),
			(create_text_overlay, reg1, "@Plan <1> ", 4112),
			(position_set_x, 1, 270),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 270),
			(position_set_y, 1, 450),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":temp_2506", 0),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_1", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2502, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_1", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 420),
			(create_combo_button_overlay, "$g_presentation_obj_2"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":temp_2506", 1),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_2", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2503, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_2", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 390),
			(create_combo_button_overlay, "$g_presentation_obj_3"),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":temp_2506", 2),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_3", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2504, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_3", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 360),
			(create_combo_button_overlay, "$g_presentation_obj_4"),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":temp_2506", 3),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_4", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2505, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_4", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_1", 1),
			(overlay_set_size, "$g_presentation_obj_2", 1),
			(overlay_set_size, "$g_presentation_obj_3", 1),
			(overlay_set_size, "$g_presentation_obj_4", 1),
			(position_set_x, 1, 128),
			(position_set_y, 1, 310),
			(create_image_button_overlay, "$g_presentation_obj_11", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(position_set_x, 1, 270),
			(position_set_y, 1, 325),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Plan <2> ", 4112),
			(position_set_x, 1, 620),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 620),
			(position_set_y, 1, 450),
			(create_combo_button_overlay, "$g_presentation_obj_5"),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":value_3", 0),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_5", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2507, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_5", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 420),
			(create_combo_button_overlay, "$g_presentation_obj_6"),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":value_3", 1),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_6", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2508, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_6", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 390),
			(create_combo_button_overlay, "$g_presentation_obj_7"),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":value_3", 2),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_7", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2509, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_7", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 360),
			(create_combo_button_overlay, "$g_presentation_obj_8"),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", ":value_3", 3),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_4", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_4"),
				(overlay_add_item, "$g_presentation_obj_8", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2510, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_8", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_5", 1),
			(overlay_set_size, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_8", 1),
			(position_set_x, 1, 478),
			(position_set_y, 1, 310),
			(create_image_button_overlay, "$g_presentation_obj_12", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(position_set_x, 1, 620),
			(position_set_y, 1, 325),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 265),
			(create_text_overlay, reg1, "@Use plan <1> ", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 215),
			(create_text_overlay, reg1, "@Use plan <2> ", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 180),
			(position_set_y, 1, 258),
			(create_check_box_overlay, "$g_presentation_obj_17", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_17", 1),
			(position_set_y, 1, 208),
			(create_check_box_overlay, "$g_presentation_obj_18", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_18", 1),
			(try_begin),
				(troop_slot_eq, "$temp", 2506, 0),
				(overlay_set_val, "$g_presentation_obj_17", 1),
				(overlay_set_val, "$g_presentation_obj_18", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_17", 0),
				(overlay_set_val, "$g_presentation_obj_18", 1),
			(try_end),
			(position_set_x, 1, 418),
			(position_set_y, 1, 225),
			(create_image_button_overlay, "$g_presentation_obj_19", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_19", 1),
			(position_set_x, 1, 560),
			(position_set_y, 1, 240),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 155),
			(create_text_overlay, reg1, "@Upgrade armor ", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 105),
			(create_text_overlay, reg1, "@Upgrade horse ", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 180),
			(position_set_y, 1, 148),
			(create_check_box_overlay, "$g_presentation_obj_13", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_13", 1),
			(troop_get_slot, ":temp_2500", "$temp", 2500),
			(overlay_set_val, "$g_presentation_obj_13", ":temp_2500"),
			(position_set_y, 1, 98),
			(create_check_box_overlay, "$g_presentation_obj_14", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_14", 1),
			(troop_get_slot, ":temp_2501", "$temp", 2501),
			(overlay_set_val, "$g_presentation_obj_14", ":temp_2501"),
			(position_set_x, 1, 418),
			(position_set_y, 1, 140),
			(create_image_button_overlay, "$g_presentation_obj_15", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_15", 1),
			(position_set_y, 1, 90),
			(create_image_button_overlay, "$g_presentation_obj_16", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_16", 1),
			(position_set_x, 1, 560),
			(position_set_y, 1, 155),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 105),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 45),
			(create_text_overlay, reg1, "@Price threshold of items for picking:", 4096),
			(overlay_set_position, reg1, 1),
			(create_number_box_overlay, "$g_presentation_obj_9", 0, 1001),
			(position_set_x, 1, 600),
			(position_set_y, 1, 31),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(overlay_set_val, "$g_presentation_obj_9", "$g_price_threshold_for_picking"),
			(call_script, "script_prsnt_lines", 640, 2, 125, 290),
			(call_script, "script_prsnt_lines", 640, 2, 125, 185),
			(call_script, "script_prsnt_lines", 640, 2, 125, 75),
			(assign, ":var_10", 900),
			(assign, ":var_11", 600),
			(assign, ":var_12", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":localvariable", 1, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
				(is_between, ":party_stack_troop_id_main_party_localvariable", "trp_npc1", "trp_kingdom_1_lord"),
				(str_store_troop_name, 1, ":party_stack_troop_id_main_party_localvariable"),
				(position_set_x, 1, ":var_10"),
				(position_set_y, 1, ":var_11"),
				(val_sub, ":var_11", 30),
				(create_button_overlay, reg0, "@{s1}", 4112),
				(overlay_set_position, reg0, 1),
				(assign, ":var_16", ":var_12"),
				(troop_set_slot, "trp_temp_array_a", ":var_16", reg0),
				(troop_set_slot, "trp_temp_array_b", ":var_16", ":party_stack_troop_id_main_party_localvariable"),
				(val_add, ":var_12", 1),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2502, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2503, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2504, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2505, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2507, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2508, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_7"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2509, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 2510, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(assign, "$g_price_threshold_for_picking", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 2),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_13"),
				(troop_set_slot, "$temp", 2500, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_14"),
				(troop_set_slot, "$temp", 2501, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_15"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 3),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_16"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 4),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_17"),
				(overlay_set_val, "$g_presentation_obj_17", 1),
				(overlay_set_val, "$g_presentation_obj_18", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2506, 1),
					(troop_set_slot, "$temp", 2506, 0),
					(call_script, "script_exchange_equipments_between_two_sets", "$temp"),
					(start_presentation, "prsnt_autoloot_upgrade_management"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_18"),
				(overlay_set_val, "$g_presentation_obj_18", 1),
				(overlay_set_val, "$g_presentation_obj_17", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 2506, 0),
					(troop_set_slot, "$temp", 2506, 1),
					(call_script, "script_exchange_equipments_between_two_sets", "$temp"),
					(start_presentation, "prsnt_autoloot_upgrade_management"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_19"),
				(troop_get_slot, ":temp_2506", "$temp", 2506),
				(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
					(troop_get_slot, ":troop_2506", ":troop", 2506),
					(neq, ":troop_2506", ":temp_2506"),
					(troop_set_slot, ":troop", 2506, ":temp_2506"),
					(call_script, "script_exchange_equipments_between_two_sets", ":troop"),
				(try_end),
			(try_end),
			(assign, ":var_7", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
				(is_between, ":party_stack_troop_id_main_party_localvariable", "trp_npc1", "trp_kingdom_1_lord"),
				(assign, ":var_11", ":var_7"),
				(val_add, ":var_7", 1),
				(troop_slot_eq, "trp_temp_array_a", ":var_11", ":trigger_param_1"),
				(troop_get_slot, ":temp_array_b_var_11", "trp_temp_array_b", ":var_11"),
				(assign, "$temp", ":temp_array_b_var_11"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(try_end)
		])
	]),

	("auto_sell_options", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg0, "@Sell items automaticly when leaving:", 4096),
			(position_set_x, 1, 170),
			(position_set_y, 1, 660),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_1", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 150),
			(position_set_y, 1, 652),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_val, "$g_presentation_obj_1", "$g_sell_items_when_leaving"),
			(create_text_overlay, reg0, "@Price limit for auto-sell:", 4096),
			(position_set_x, 1, 150),
			(position_set_y, 1, 610),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_2", 10, 10000),
			(position_set_x, 1, 600),
			(position_set_y, 1, 596),
			(overlay_set_val, "$g_presentation_obj_2", "$g_auto_sell_price_limit"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_game_button_overlay, "$g_presentation_obj_3", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_text_overlay, reg0, "@Item types for auto-sell:", 4096),
			(position_set_x, 1, 150),
			(position_set_y, 1, 578),
			(overlay_set_position, reg0, 1),
			(create_image_button_overlay, "$g_presentation_obj_5", "mesh_drop_button_child", "mesh_drop_button_child_down"),
			(position_set_x, 1, 160),
			(position_set_y, 1, 528),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(create_text_overlay, reg1, "@Select all", 4112),
			(position_set_x, 1, 265),
			(position_set_y, 1, 538),
			(overlay_set_position, reg1, 1),
			(create_image_button_overlay, "$g_presentation_obj_6", "mesh_drop_button_child", "mesh_drop_button_child_down"),
			(position_set_x, 1, 385),
			(position_set_y, 1, 528),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(create_text_overlay, reg1, "@Select invert", 4112),
			(position_set_x, 1, 490),
			(position_set_y, 1, 538),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 160),
			(assign, ":var_2", 500),
			(try_for_range, ":number", 0, 20),
				(store_add, ":value_2", 1, ":number"),
				(neq, ":value_2", 11),
				(neq, ":value_2", 19),
				(neq, ":value_2", 20),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(create_mesh_overlay, reg1, "mesh_drop_button_child"),
				(overlay_set_position, reg1, 1),
				(store_add, ":value_3", ":value", 120),
				(store_add, ":value_4", ":var_2", 10),
				(position_set_x, 1, ":value_3"),
				(position_set_y, 1, ":value_4"),
				(store_add, ":value_5", "str_hero_wpn_slot_horse", ":number"),
				(str_store_string, 1, ":value_5"),
				(create_text_overlay, reg1, "@{s1}", 4112),
				(overlay_set_position, reg1, 1),
				(store_add, ":value_6", ":value", 0),
				(store_add, ":value_7", ":var_2", 4),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_7"),
				(create_check_box_overlay, reg1, "mesh_checkbox_off", "mesh_checkbox_on"),
				(overlay_set_position, reg1, 1),
				(store_add, ":value_8", 1, ":number"),
				(item_get_slot, ":value_8_1506", ":value_8", 1506),
				(store_sub, ":value_8_1506", 1, ":value_8_1506"),
				(overlay_set_val, reg1, ":value_8_1506"),
				(troop_set_slot, "trp_temp_array_b", ":number", reg1),
				(val_add, ":value", 225),
				(try_begin),
					(eq, ":value", 835),
					(assign, ":value", 160),
					(val_sub, ":var_2", 28),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, "$g_sell_items_when_leaving", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(assign, "$g_auto_sell_price_limit", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(try_for_range, ":number", 0, 20),
					(store_add, ":value", 1, ":number"),
					(neq, ":value", 11),
					(neq, ":value", 19),
					(neq, ":value", 20),
					(item_set_slot, ":value", 1506, 0),
					(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
					(overlay_set_val, ":temp_array_b_number", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(try_for_range, ":number", 0, 20),
					(store_add, ":value", 1, ":number"),
					(neq, ":value", 11),
					(neq, ":value", 19),
					(neq, ":value", 20),
					(item_get_slot, ":value_1506", ":value", 1506),
					(val_add, ":value_1506", 1),
					(val_mod, ":value_1506", 2),
					(item_set_slot, ":value", 1506, ":value_1506"),
					(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
					(store_sub, ":value_2", 1, ":value_1506"),
					(overlay_set_val, ":temp_array_b_number", ":value_2"),
				(try_end),
			(try_end),
			(try_for_range, ":number_2", 0, 20),
				(troop_slot_eq, "trp_temp_array_b", ":number_2", ":trigger_param_1"),
				(store_add, ":value_3", 1, ":number_2"),
				(store_sub, ":value_1506", 1, ":trigger_param_2"),
				(item_set_slot, ":value_3", 1506, ":value_1506"),
			(try_end)
		])
	]),

	("change_all_factions_color", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_combo_label_overlay, "$g_presentation_obj_1"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 680),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(troop_set_slot, "trp_temp_array_a", slot_troop_relations_begin, "fac_deserters"),
			(troop_set_slot, "trp_temp_array_a", 1, "fac_outlaws"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_renown, "fac_papacy"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_prisoner_of_party, "fac_player_supporters_faction"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_recruitment_random, "fac_kingdom_42"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_recruitment_random, "fac_kingdom_41"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_temp_decision_seed, "fac_kingdom_40"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_set_decision_seed, "fac_kingdom_39"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_promised_fief, "fac_kingdom_38"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_temp_slot, "fac_kingdom_37"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_current_rumor, "fac_kingdom_36"),
			(troop_set_slot, "trp_temp_array_a", 44, "fac_kingdom_35"),
			(troop_set_slot, "trp_temp_array_a", 42, "fac_kingdom_34"),
			(troop_set_slot, "trp_temp_array_a", 43, "fac_kingdom_36"),
			(troop_set_slot, "trp_temp_array_a", 41, "fac_kingdom_37"),
			(troop_set_slot, "trp_temp_array_a", slot_lady_used_tournament, "fac_kingdom_33"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_betrothal_time, "fac_kingdom_32"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_love_interests_end, "fac_kingdom_31"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_leaded_party, "fac_kingdom_30"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_wealth, "fac_kingdom_29"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_cur_center, "fac_kingdom_28"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_banner_scene_prop, "fac_kingdom_27"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_original_faction, "fac_kingdom_26"),
			(troop_set_slot, "trp_temp_array_a", 15, "fac_kingdom_25"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_player_order_state, "fac_kingdom_24"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_player_order_object, "fac_kingdom_23"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_age, "fac_kingdom_22"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_age_appearance, "fac_kingdom_20"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_does_not_give_quest, "fac_kingdom_18"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_player_debt, "fac_kingdom_17"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_player_relation, "fac_kingdom_16"),
			(troop_set_slot, "trp_temp_array_a", 23, "fac_kingdom_15"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_last_quest, "fac_kingdom_14"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_last_quest_betrayed, "fac_kingdom_13"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_last_persuasion_time, "fac_kingdom_12"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_last_comment_time, "fac_kingdom_11"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_spawned_before, "fac_kingdom_10"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_last_comment_slot, "fac_kingdom_9"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_spouse, "fac_kingdom_8"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_father, "fac_kingdom_7"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_mother, "fac_kingdom_6"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_guardian, "fac_kingdom_5"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_betrothed, "fac_kingdom_4"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_love_interest_1, "fac_kingdom_3"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_love_interest_2, "fac_kingdom_2"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_love_interest_3, "fac_kingdom_1"),
			(troop_set_slot, "trp_temp_array_b", slot_troop_relations_begin, 8947848),
			(troop_set_slot, "trp_temp_array_b", 1, 8947848),
			(troop_set_slot, "trp_temp_array_b", slot_troop_occupation, 56320),
			(troop_set_slot, "trp_temp_array_b", slot_troop_state, 4093315),
			(troop_set_slot, "trp_temp_array_b", slot_troop_last_talk_time, 4093315),
			(troop_set_slot, "trp_temp_array_b", slot_troop_met, 5414062),
			(troop_set_slot, "trp_temp_array_b", slot_troop_party_template, 6668503),
			(troop_set_slot, "trp_temp_array_b", slot_troop_renown, 16773498),
			(troop_set_slot, "trp_temp_array_b", slot_troop_prisoner_of_party, 4621459),
			(troop_set_slot, "trp_temp_array_b", slot_troop_present_at_event, 12658477),
			(troop_set_slot, "trp_temp_array_b", slot_troop_leaded_party, 7774870),
			(troop_set_slot, "trp_temp_array_b", slot_troop_wealth, 11764323),
			(troop_set_slot, "trp_temp_array_b", slot_troop_cur_center, 10781792),
			(troop_set_slot, "trp_temp_array_b", slot_troop_banner_scene_prop, 14782468),
			(troop_set_slot, "trp_temp_array_b", slot_troop_original_faction, 11690568),
			(troop_set_slot, "trp_temp_array_b", 15, 15460352),
			(troop_set_slot, "trp_temp_array_b", slot_troop_player_order_state, 7969973),
			(troop_set_slot, "trp_temp_array_b", slot_troop_player_order_object, 15986616),
			(troop_set_slot, "trp_temp_array_b", slot_troop_age, 7736589),
			(troop_set_slot, "trp_temp_array_b", slot_troop_age_appearance, 11258116),
			(troop_set_slot, "trp_temp_array_b", slot_troop_does_not_give_quest, 14179012),
			(troop_set_slot, "trp_temp_array_b", slot_troop_player_debt, 504371),
			(troop_set_slot, "trp_temp_array_b", slot_troop_player_relation, 13209),
			(troop_set_slot, "trp_temp_array_b", 23, 15526004),
			(troop_set_slot, "trp_temp_array_b", slot_troop_last_quest, 3298485),
			(troop_set_slot, "trp_temp_array_b", slot_troop_last_quest_betrayed, 7844642),
			(troop_set_slot, "trp_temp_array_b", slot_troop_last_persuasion_time, 2283687),
			(troop_set_slot, "trp_temp_array_b", slot_troop_last_comment_time, 6711766),
			(troop_set_slot, "trp_temp_array_b", slot_troop_spawned_before, 9109),
			(troop_set_slot, "trp_temp_array_b", slot_troop_last_comment_slot, 9638180),
			(troop_set_slot, "trp_temp_array_b", slot_troop_spouse, 10357615),
			(troop_set_slot, "trp_temp_array_b", slot_troop_father, 2659111),
			(troop_set_slot, "trp_temp_array_b", slot_troop_mother, 16763904),
			(troop_set_slot, "trp_temp_array_b", slot_troop_guardian, 16711680),
			(troop_set_slot, "trp_temp_array_b", slot_troop_betrothed, 10164762),
			(troop_set_slot, "trp_temp_array_b", slot_troop_love_interest_1, 10698290),
			(troop_set_slot, "trp_temp_array_b", slot_troop_love_interest_2, 5414062),
			(troop_set_slot, "trp_temp_array_b", slot_troop_love_interest_3, 56320),
			(troop_set_slot, "trp_temp_array_b", slot_troop_love_interests_end, 14782474),
			(troop_set_slot, "trp_temp_array_b", slot_troop_betrothal_time, 516659),
			(troop_set_slot, "trp_temp_array_b", slot_lady_used_tournament, 3298533),
			(troop_set_slot, "trp_temp_array_b", 41, 10355306),
			(troop_set_slot, "trp_temp_array_b", 42, 15263976),
			(try_for_range, ":number", 1, 43),
				(troop_get_slot, ":temp_array_a_number", "trp_temp_array_a", ":number"),
				(str_store_faction_name, 0, ":temp_array_a_number"),
				(overlay_add_item, "$g_presentation_obj_1", 0),
			(try_end),
			(overlay_set_val, "$g_presentation_obj_1", "$temp"),
			(troop_get_slot, ":temp_array_a_number", "trp_temp_array_a", "$temp"),
			(str_store_faction_name, 0, ":temp_array_a_number"),
			(create_text_overlay, reg1, "@Faction color of {s0}:", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay, "$g_presentation_obj_2", "mesh_white_plane"),
			(position_set_x, 1, 450),
			(position_set_y, 1, 480),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_x, 1, 5000),
			(position_set_y, 1, 5000),
			(overlay_set_size, "$g_presentation_obj_2", 1),
			(faction_get_color, ":color_temp_array_a_number", ":temp_array_a_number"),
			(overlay_set_color, "$g_presentation_obj_2", ":color_temp_array_a_number"),
			(position_set_x, 1, 500),
			(create_slider_overlay, "$g_presentation_obj_3", 0, 255),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_slider_overlay, "$g_presentation_obj_4", 0, 255),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(create_slider_overlay, "$g_presentation_obj_5", 0, 255),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(store_mod, ":value", ":color_temp_array_a_number", 256),
			(val_div, ":color_temp_array_a_number", 256),
			(store_mod, ":value_2", ":color_temp_array_a_number", 256),
			(val_div, ":color_temp_array_a_number", 256),
			(store_mod, ":value_3", ":color_temp_array_a_number", 256),
			(overlay_set_val, "$g_presentation_obj_3", ":value_3"),
			(overlay_set_val, "$g_presentation_obj_4", ":value_2"),
			(overlay_set_val, "$g_presentation_obj_5", ":value"),
			(position_set_x, 1, 650),
			(create_number_box_overlay, "$g_presentation_obj_6", 0, 256),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(create_number_box_overlay, "$g_presentation_obj_7", 0, 256),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(create_number_box_overlay, "$g_presentation_obj_8", 0, 256),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(overlay_set_val, "$g_presentation_obj_6", ":value_3"),
			(overlay_set_val, "$g_presentation_obj_7", ":value_2"),
			(overlay_set_val, "$g_presentation_obj_8", ":value"),
			(assign, reg2, ":value_3"),
			(assign, reg3, ":value_2"),
			(assign, reg4, ":value"),
			(position_set_x, 1, 330),
			(create_text_overlay, reg1, "@Red:", 16),
			(position_set_y, 1, 400),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Green:", 16),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Blue:", 16),
			(position_set_y, 1, 300),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, "$g_presentation_obj_9", "@ ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
			(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(create_game_button_overlay, "$g_presentation_obj_11", "@Default"),
			(position_set_x, 1, 420),
			(position_set_y, 1, 230),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(create_game_button_overlay, "$g_presentation_obj_12", "@Randomize"),
			(position_set_x, 1, 580),
			(position_set_y, 1, 230),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(create_mesh_overlay, reg1, "mesh_white_plane"),
			(position_set_x, 1, 138),
			(position_set_y, 1, 78),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 36100),
			(position_set_y, 1, 6100),
			(overlay_set_size, reg1, 1),
			(overlay_set_color, reg1, 0),
			(assign, ":value_4", 140),
			(assign, ":var_8", 80),
			(try_for_range, ":number", 0, 216),
				(create_image_button_overlay, reg1, "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(assign, ":var_9", ":number"),
				(call_script, "script_convert_slot_no_to_color", ":var_9"),
				(assign, ":var_10", reg0),
				(overlay_set_color, reg1, ":var_10"),
				(val_add, ":value_4", 20),
				(try_begin),
					(eq, ":value_4", 860),
					(assign, ":value_4", 140),
					(val_add, ":var_8", 20),
				(try_end),
				(troop_set_slot, "trp_temp_array_c", ":number", reg1),
			(try_end),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_for_range, ":number", 0, 216),
				(troop_slot_eq, "trp_temp_array_c", ":number", ":trigger_param_1"),
				(assign, ":value", ":number"),
				(call_script, "script_convert_slot_no_to_color", ":value"),
				(assign, ":var_5", reg0),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":var_5"),
				(overlay_set_color, "$g_presentation_obj_2", ":var_5"),
				(store_mod, ":value_2", ":var_5", 256),
				(val_div, ":var_5", 256),
				(store_mod, ":value_3", ":var_5", 256),
				(val_div, ":var_5", 256),
				(store_mod, ":value_4", ":var_5", 256),
				(overlay_set_val, "$g_presentation_obj_3", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_4", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_5", ":value_2"),
				(overlay_set_val, "$g_presentation_obj_6", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_7", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_8", ":value_2"),
				(assign, reg2, ":value_4"),
				(assign, reg3, ":value_3"),
				(assign, reg4, ":value_2"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, "$temp", ":trigger_param_2"),
				(start_presentation, "prsnt_change_all_factions_color"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(overlay_set_val, "$g_presentation_obj_3", ":trigger_param_2"),
				(overlay_set_val, "$g_presentation_obj_6", ":trigger_param_2"),
				(assign, reg2, ":trigger_param_2"),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(eq, ":trigger_param_1", "$g_presentation_obj_7"),
				(overlay_set_val, "$g_presentation_obj_4", ":trigger_param_2"),
				(overlay_set_val, "$g_presentation_obj_7", ":trigger_param_2"),
				(assign, reg3, ":trigger_param_2"),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(overlay_set_val, "$g_presentation_obj_5", ":trigger_param_2"),
				(overlay_set_val, "$g_presentation_obj_8", ":trigger_param_2"),
				(assign, reg4, ":trigger_param_2"),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(troop_get_slot, ":temp_array_b_temp", "trp_temp_array_b", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":temp_array_b_temp"),
				(overlay_set_color, "$g_presentation_obj_2", ":temp_array_b_temp"),
				(store_mod, ":value_2", ":temp_array_b_temp", 256),
				(val_div, ":temp_array_b_temp", 256),
				(store_mod, ":value_3", ":temp_array_b_temp", 256),
				(val_div, ":temp_array_b_temp", 256),
				(store_mod, ":value_4", ":temp_array_b_temp", 256),
				(overlay_set_val, "$g_presentation_obj_3", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_4", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_5", ":value_2"),
				(overlay_set_val, "$g_presentation_obj_6", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_7", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_8", ":value_2"),
				(assign, reg2, ":value_4"),
				(assign, reg3, ":value_3"),
				(assign, reg4, ":value_2"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(store_random_in_range, reg2, 0, 256),
				(store_random_in_range, reg3, 0, 256),
				(store_random_in_range, reg4, 0, 256),
				(overlay_set_val, "$g_presentation_obj_3", reg2),
				(overlay_set_val, "$g_presentation_obj_4", reg3),
				(overlay_set_val, "$g_presentation_obj_5", reg4),
				(overlay_set_val, "$g_presentation_obj_6", reg2),
				(overlay_set_val, "$g_presentation_obj_7", reg3),
				(overlay_set_val, "$g_presentation_obj_8", reg4),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@Hex code: {s0}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("troop_note", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_copy_inventory", "$temp", "trp_temp_array_a"),
			(try_for_range, ":number", 0, 10),
				(troop_get_inventory_slot, ":inventory_slot_temp_array_a_number", "trp_temp_array_a", ":number"),
				(gt, ":inventory_slot_temp_array_a_number", -1),
				(troop_add_item, "trp_temp_array_a", ":inventory_slot_temp_array_a_number"),
				(troop_set_inventory_slot, "trp_temp_array_a", ":number", -1),
			(try_end),
			(create_game_button_overlay, "$g_presentation_obj_1", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(store_mul, ":value", "$temp", 2),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":value"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 720),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(str_store_troop_name, 1, "$temp"),
			(store_character_level, ":character_level_temp", "$temp"),
			(assign, reg1, ":character_level_temp"),
			(str_store_string, 1, "@Name: {s1}^Level: {reg1}"),
			(call_script, "script_get_troop_max_hp", "$temp"),
			(str_store_string, 1, "@{s1}^HP: {reg0}"),
			(create_text_overlay, reg0, "@{s1}", 2048),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg0, 1),
			(str_store_string, 3, "@Attributes:"),
			(store_attribute_level, reg1, "$temp", 0),
			(store_attribute_level, reg2, "$temp", 2),
			(str_store_string, 3, "@{s3}^STR: {reg1}^INT: {reg2}^^Skills:"),
			(store_skill_level, reg1, 35, "$temp"),
			(store_skill_level, reg2, 33, "$temp"),
			(store_skill_level, reg3, 34, "$temp"),
			(store_skill_level, reg4, 23, "$temp"),
			(str_store_string, 3, "@{s3}^Power Strike: {reg1}^Power Draw: {reg2}^Power Throw: {reg3}^Horse Archery: {reg4}^^Weapon Proficiencies:"),
			(store_proficiency_level, reg1, "$temp", 0),
			(store_proficiency_level, reg2, "$temp", 1),
			(store_proficiency_level, reg3, "$temp", 2),
			(str_store_string, 3, "@{s3}^1 Hand Wpns: {reg1}^2 Hand Wpns: {reg2}^Polearms: {reg3}"),
			(create_text_overlay, reg0, "@{s3}", 2048),
			(position_set_x, 1, 500),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(str_store_string, 4, "str_empty_string"),
			(store_attribute_level, reg1, "$temp", 1),
			(store_attribute_level, reg2, "$temp", 3),
			(str_store_string, 4, "@{s4}^AGI: {reg1}^CHA: {reg2}^^"),
			(store_skill_level, reg1, 36, "$temp"),
			(store_skill_level, reg2, 25, "$temp"),
			(store_skill_level, reg3, 26, "$temp"),
			(store_skill_level, reg4, 24, "$temp"),
			(str_store_string, 4, "@{s4}^Ironflesh: {reg1}^Athletics: {reg2}^Shield: {reg3}^Riding: {reg4}^^"),
			(store_proficiency_level, reg1, "$temp", 3),
			(store_proficiency_level, reg2, "$temp", 4),
			(store_proficiency_level, reg3, "$temp", 5),
			(str_store_string, 4, "@{s4}^Archery: {reg1}^Crossbows: {reg2}^Throwing: {reg3}"),
			(create_text_overlay, reg0, "@{s4}", 2048),
			(position_set_x, 1, 710),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_2", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 560),
			(overlay_set_area_size, "$g_presentation_obj_2", 1),
			(set_container_overlay, "$g_presentation_obj_2"),
			(assign, ":value_2", 0),
			(assign, ":var_6", 1840),
			(assign, ":var_7", 10),
			(try_for_range, ":unused", 0, 24),
				(try_for_range, ":unused_2", 0, 4),
					(create_mesh_overlay, reg1, "mesh_inv_slot"),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value_2"),
					(position_set_y, 1, ":var_6"),
					(overlay_set_position, reg1, 1),
					(create_mesh_overlay, reg1, "mesh_mp_inventory_choose"),
					(position_set_x, 1, 640),
					(position_set_y, 1, 640),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value_2"),
					(position_set_y, 1, ":var_6"),
					(overlay_set_position, reg1, 1),
					(troop_set_slot, "trp_temp_array_a", ":var_7", reg1),
					(troop_get_inventory_slot, ":inventory_slot_temp_array_a_var_7", "trp_temp_array_a", ":var_7"),
					(try_begin),
						(gt, ":inventory_slot_temp_array_a_var_7", -1),
						(create_mesh_overlay_with_item_id, reg1, ":inventory_slot_temp_array_a_var_7"),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg1, 1),
						(store_add, ":value_3", ":value_2", 40),
						(store_add, ":value_4", ":var_6", 40),
						(position_set_x, 1, ":value_3"),
						(position_set_y, 1, ":value_4"),
						(overlay_set_position, reg1, 1),
						(troop_set_slot, "trp_temp_array_b", ":var_7", reg1),
					(try_end),
					(val_add, ":value_2", 80),
					(val_add, ":var_7", 1),
				(try_end),
				(assign, ":value_2", 0),
				(val_sub, ":var_6", 80),
			(try_end),
			(set_container_overlay, -1),
			(create_text_overlay, reg1, "@Equipments: ", 4096),
			(position_set_x, 1, 60),
			(position_set_y, 1, 635),
			(overlay_set_position, reg1, 1)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_for_range, ":number", 10, 106),
					(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
					(troop_get_inventory_slot, ":inventory_slot_temp_array_a_number", "trp_temp_array_a", ":number"),
					(try_begin),
						(gt, ":inventory_slot_temp_array_a_number", -1),
						(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
						(overlay_get_position, 0, ":temp_array_b_number"),
						(show_item_details, ":inventory_slot_temp_array_a_number", 0, 100),
						(assign, "$g_current_opened_item_details", ":number"),
					(try_end),
				(try_end),
			(else_try),
				(try_for_range, ":number", 10, 106),
					(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
					(try_begin),
						(eq, "$g_current_opened_item_details", ":number"),
						(close_item_details),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(try_begin),
					(gt, "$g_presentation_next_presentation", -1),
					(store_sub, "$temp_2", "$g_presentation_next_presentation", -1),
					(start_presentation, "$g_presentation_next_presentation"),
				(else_try),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("recruit_npc", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(position_set_x, 1, 50),
			(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
			(party_get_slot, ":current_town_center_culture", "$current_town", slot_center_culture),
			(try_begin),
				(this_or_next|eq, ":faction_of_party_current_town", "fac_kingdom_3"),
				(this_or_next|eq, ":faction_of_party_current_town", "fac_kingdom_27"),
				(eq, ":current_town_center_culture", "fac_culture_mongol"),
				(str_store_string, 7, "@Mongol"),
			(else_try),
				(eq, ":current_town_center_culture", "fac_culture_baltic"),
				(neq, ":faction_of_party_current_town", "fac_kingdom_1"),
				(str_store_string, 7, "@Baltic"),
			(else_try),
				(this_or_next|eq, ":current_town_center_culture", "fac_culture_rus"),
				(this_or_next|eq, ":current_town_center_culture", "fac_culture_serbian"),
				(this_or_next|eq, ":current_town_center_culture", "fac_culture_balkan"),
				(eq, ":current_town_center_culture", "fac_culture_byzantium"),
				(str_store_string, 7, "@Orthodox"),
			(else_try),
				(this_or_next|eq, ":current_town_center_culture", "fac_culture_marinid"),
				(this_or_next|eq, ":current_town_center_culture", "fac_culture_mamluke"),
				(this_or_next|eq, ":current_town_center_culture", "fac_culture_andalus"),
				(eq, ":current_town_center_culture", "fac_culture_anatolian"),
				(str_store_string, 7, "@Muslim"),
			(else_try),
				(str_store_string, 7, "@Catholic"),
			(try_end),
			(position_set_y, 1, 700),
			(create_text_overlay, reg0, "@Current Culture: ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 200),
			(create_text_overlay, reg0, 7, 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 660),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 620),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 580),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 540),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 500),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 460),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 420),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 380),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 340),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 300),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 260),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 220),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 180),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 140),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 100),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 60),
			(create_text_overlay, reg0, "@ ", 4096),
			(overlay_set_position, reg0, 1),
			(assign, ":var_3", 600),
			(assign, ":var_4", 585),
			(assign, ":var_5", 40),
			(assign, ":value", 0),
			(assign, ":value_2", 0),
			(assign, ":value_3", 0),
			(assign, ":value_4", 0),
			(assign, ":value_5", 0),
			(str_clear, 8),
			(try_for_range, ":troop", "trp_npc16", "trp_kingdom_1_lord"),
				(str_store_troop_name, 1, ":troop"),
				(try_begin),
					(is_between, ":troop", "trp_npc16", "trp_npc19"),
					(str_store_string, 2, "@Pathfinder"),
					(try_begin),
						(eq, ":value", 0),
						(party_count_members_of_type, reg1, "p_main_party", ":troop"),
						(ge, reg1, 1),
						(str_store_string, 8, "@{s8} Pathfinder"),
						(assign, ":value", 1),
					(try_end),
				(else_try),
					(is_between, ":troop", "trp_npc19", "trp_npc21"),
					(str_store_string, 2, "@Trader"),
					(try_begin),
						(eq, ":value_2", 0),
						(party_count_members_of_type, reg1, "p_main_party", ":troop"),
						(ge, reg1, 1),
						(str_store_string, 8, "@{s8} Trader"),
						(assign, ":value_2", 1),
					(try_end),
				(else_try),
					(is_between, ":troop", "trp_npc21", "trp_npc23"),
					(str_store_string, 2, "@Monk"),
					(try_begin),
						(eq, ":value_3", 0),
						(party_count_members_of_type, reg1, "p_main_party", ":troop"),
						(ge, reg1, 1),
						(str_store_string, 8, "@{s8} Monk"),
						(assign, ":value_3", 1),
					(try_end),
				(else_try),
					(is_between, ":troop", "trp_npc23", "trp_npc25"),
					(str_store_string, 2, "@Engineer"),
					(try_begin),
						(eq, ":value_4", 0),
						(party_count_members_of_type, reg1, "p_main_party", ":troop"),
						(ge, reg1, 1),
						(str_store_string, 8, "@{s8} Engineer"),
						(assign, ":value_4", 1),
					(try_end),
				(else_try),
					(str_store_string, 2, "@Trainer"),
					(try_begin),
						(eq, ":value_5", 0),
						(party_count_members_of_type, reg1, "p_main_party", ":troop"),
						(ge, reg1, 1),
						(str_store_string, 8, "@{s8} Trainer"),
						(assign, ":value_5", 1),
					(try_end),
				(try_end),
				(try_begin),
					(this_or_next|eq, ":troop", "trp_npc16"),
					(this_or_next|eq, ":troop", "trp_npc26"),
					(eq, ":troop", "trp_npc19"),
					(str_store_string, 3, "@Balt"),
				(else_try),
					(this_or_next|eq, ":troop", "trp_npc23"),
					(this_or_next|eq, ":troop", "trp_npc25"),
					(eq, ":troop", "trp_npc21"),
					(str_store_string, 3, "@Catholic"),
				(else_try),
					(this_or_next|eq, ":troop", "trp_npc22"),
					(this_or_next|eq, ":troop", "trp_npc27"),
					(eq, ":troop", "trp_npc17"),
					(str_store_string, 3, "@Orthodox"),
				(else_try),
					(this_or_next|eq, ":troop", "trp_npc20"),
					(this_or_next|eq, ":troop", "trp_npc24"),
					(eq, ":troop", "trp_npc28"),
					(str_store_string, 3, "@Muslim"),
				(else_try),
					(this_or_next|eq, ":troop", "trp_npc18"),
					(eq, ":troop", "trp_npc29"),
					(str_store_string, 3, "@Mongol"),
				(else_try),
					(str_store_string, 3, "@Strange"),
				(try_end),
				(assign, reg5, 50),
				(store_character_level, ":character_level_troop", ":troop"),
				(val_mul, reg5, ":character_level_troop"),
				(str_store_string, 6, "@Available"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(val_mul, reg5, 2),
					(str_store_string, 6, "@Captured"),
				(else_try),
					(party_count_members_of_type, reg1, "p_main_party", ":troop"),
					(ge, reg1, 1),
					(str_store_string, 6, "@Hired"),
				(else_try),
					(neg|troop_slot_eq, ":troop", slot_troop_mission_object, 0),
					(str_store_string, 6, "@On a mission"),
				(else_try),
					(neg|troop_slot_eq, ":troop", slot_troop_occupation, 0),
					(neg|troop_slot_eq, ":troop", slot_troop_occupation, 5),
					(str_store_string, 6, "@Unavailable"),
				(try_end),
				(str_store_string, 4, "@{reg5}"),
				(position_set_x, 1, 50),
				(position_set_y, 1, ":var_3"),
				(create_text_overlay, reg0, 2, 4096),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 200),
				(position_set_y, 1, ":var_3"),
				(create_text_overlay, reg0, 1, 4096),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 350),
				(position_set_y, 1, ":var_3"),
				(create_text_overlay, reg0, 3, 4096),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 450),
				(position_set_y, 1, ":var_3"),
				(create_text_overlay, reg0, 4, 4096),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 650),
				(position_set_y, 1, ":var_3"),
				(create_text_overlay, reg0, 6, 4096),
				(overlay_set_position, reg0, 1),
				(val_sub, ":var_3", ":var_5"),
				(val_sub, ":var_4", ":var_5"),
			(try_end),
			(position_set_x, 1, 50),
			(position_set_y, 1, 680),
			(create_text_overlay, reg0, "@Specialists in party: ", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 200),
			(create_text_overlay, reg0, 8, 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 640),
			(create_text_overlay, reg0, "@Specialist:", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 200),
			(position_set_y, 1, 640),
			(create_text_overlay, reg0, "@Name:", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 640),
			(create_text_overlay, reg0, "@Culture:", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 450),
			(position_set_y, 1, 640),
			(create_text_overlay, reg0, "@Cost to hire:", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 560),
			(position_set_y, 1, 640),
			(create_text_overlay, reg0, "@Hire:", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 610),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc16"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 585),
				(create_game_button_overlay, "$g_presentation_obj_1", 0),
				(overlay_set_position, "$g_presentation_obj_1", 1),
				(overlay_set_display, "$g_presentation_obj_1", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value", 1),
				(overlay_set_display, "$g_presentation_obj_1", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc17"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 545),
				(create_game_button_overlay, "$g_presentation_obj_2", 0),
				(overlay_set_position, "$g_presentation_obj_2", 1),
				(overlay_set_display, "$g_presentation_obj_2", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value", 1),
				(overlay_set_display, "$g_presentation_obj_2", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc18"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 505),
				(create_game_button_overlay, "$g_presentation_obj_3", 0),
				(overlay_set_position, "$g_presentation_obj_3", 1),
				(overlay_set_display, "$g_presentation_obj_3", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value", 1),
				(overlay_set_display, "$g_presentation_obj_3", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc19"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 465),
				(create_game_button_overlay, "$g_presentation_obj_4", 0),
				(overlay_set_position, "$g_presentation_obj_4", 1),
				(overlay_set_display, "$g_presentation_obj_4", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_2", 1),
				(overlay_set_display, "$g_presentation_obj_4", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc20"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 425),
				(create_game_button_overlay, "$g_presentation_obj_5", 0),
				(overlay_set_position, "$g_presentation_obj_5", 1),
				(overlay_set_display, "$g_presentation_obj_5", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_2", 1),
				(overlay_set_display, "$g_presentation_obj_5", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc21"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 385),
				(create_game_button_overlay, "$g_presentation_obj_6", 0),
				(overlay_set_position, "$g_presentation_obj_6", 1),
				(overlay_set_display, "$g_presentation_obj_6", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_3", 1),
				(overlay_set_display, "$g_presentation_obj_6", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc22"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 345),
				(create_game_button_overlay, "$g_presentation_obj_7", 0),
				(overlay_set_position, "$g_presentation_obj_7", 1),
				(overlay_set_display, "$g_presentation_obj_7", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_3", 1),
				(overlay_set_display, "$g_presentation_obj_7", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc23"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 305),
				(create_game_button_overlay, "$g_presentation_obj_8", 0),
				(overlay_set_position, "$g_presentation_obj_8", 1),
				(overlay_set_display, "$g_presentation_obj_8", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_4", 1),
				(overlay_set_display, "$g_presentation_obj_8", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc24"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 265),
				(create_game_button_overlay, "$g_presentation_obj_9", 0),
				(overlay_set_position, "$g_presentation_obj_9", 1),
				(overlay_set_display, "$g_presentation_obj_9", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_4", 1),
				(overlay_set_display, "$g_presentation_obj_9", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc25"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 225),
				(create_game_button_overlay, "$g_presentation_obj_10", 0),
				(overlay_set_position, "$g_presentation_obj_10", 1),
				(overlay_set_display, "$g_presentation_obj_10", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_5", 1),
				(overlay_set_display, "$g_presentation_obj_10", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc26"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 185),
				(create_game_button_overlay, "$g_presentation_obj_11", 0),
				(overlay_set_position, "$g_presentation_obj_11", 1),
				(overlay_set_display, "$g_presentation_obj_11", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_5", 1),
				(overlay_set_display, "$g_presentation_obj_11", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc27"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 145),
				(create_game_button_overlay, "$g_presentation_obj_12", 0),
				(overlay_set_position, "$g_presentation_obj_12", 1),
				(overlay_set_display, "$g_presentation_obj_12", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_5", 1),
				(overlay_set_display, "$g_presentation_obj_12", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc28"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 105),
				(create_game_button_overlay, "$g_presentation_obj_13", 0),
				(overlay_set_position, "$g_presentation_obj_13", 1),
				(overlay_set_display, "$g_presentation_obj_13", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_5", 1),
				(overlay_set_display, "$g_presentation_obj_13", 1),
			(try_end),
			(try_begin),
				(str_store_string, 0, "@Hire"),
				(assign, ":troop", "trp_npc29"),
				(try_begin),
					(troop_slot_ge, ":troop", 8, 0),
					(str_store_string, 0, "@Ransom"),
				(try_end),
				(position_set_y, 1, 65),
				(create_game_button_overlay, "$g_presentation_obj_14", 0),
				(overlay_set_position, "$g_presentation_obj_14", 1),
				(overlay_set_display, "$g_presentation_obj_14", 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 0),
				(troop_slot_eq, ":troop", slot_troop_mission_object, 0),
				(troop_slot_eq, ":troop", slot_troop_current_mission, 0),
				(neq, ":troop", "$g_player_minister"),
				(neq, ":troop", "$g_player_chamberlain"),
				(neq, ":troop", "$g_player_constable"),
				(party_count_members_of_type, reg1, "p_main_party", ":troop"),
				(eq, reg1, 0),
				(neq, ":value_5", 1),
				(overlay_set_display, "$g_presentation_obj_14", 1),
			(try_end),
			(position_set_x, 1, 650),
			(position_set_y, 1, 640),
			(create_text_overlay, reg0, "@Status:", 4096),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, "$g_presentation_obj_20", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_20", 1),
			(position_set_x, 1, 90),
			(position_set_y, 1, 30),
			(overlay_set_size, "$g_presentation_obj_1", 1),
			(overlay_set_size, "$g_presentation_obj_2", 1),
			(overlay_set_size, "$g_presentation_obj_3", 1),
			(overlay_set_size, "$g_presentation_obj_4", 1),
			(overlay_set_size, "$g_presentation_obj_5", 1),
			(overlay_set_size, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_8", 1),
			(overlay_set_size, "$g_presentation_obj_9", 1),
			(overlay_set_size, "$g_presentation_obj_10", 1),
			(overlay_set_size, "$g_presentation_obj_11", 1),
			(overlay_set_size, "$g_presentation_obj_12", 1),
			(overlay_set_size, "$g_presentation_obj_13", 1),
			(overlay_set_size, "$g_presentation_obj_14", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(assign, ":value", 0),
			(assign, ":value_2", 0),
			(assign, ":value_3", 0),
			(assign, ":value_4", 0),
			(assign, ":value_5", 0),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc16"),
				(overlay_set_display, "$g_presentation_obj_1", 0),
				(assign, ":value", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc17"),
				(overlay_set_display, "$g_presentation_obj_2", 0),
				(assign, ":value", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc18"),
				(overlay_set_display, "$g_presentation_obj_3", 0),
				(assign, ":value", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc19"),
				(overlay_set_display, "$g_presentation_obj_4", 0),
				(assign, ":value_2", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc20"),
				(overlay_set_display, "$g_presentation_obj_5", 0),
				(assign, ":value_2", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc21"),
				(overlay_set_display, "$g_presentation_obj_6", 0),
				(assign, ":value_3", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_7"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc22"),
				(overlay_set_display, "$g_presentation_obj_7", 0),
				(assign, ":value_3", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc23"),
				(overlay_set_display, "$g_presentation_obj_8", 0),
				(assign, ":value_4", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc24"),
				(overlay_set_display, "$g_presentation_obj_9", 0),
				(assign, ":value_4", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc25"),
				(overlay_set_display, "$g_presentation_obj_10", 0),
				(assign, ":value_5", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc26"),
				(overlay_set_display, "$g_presentation_obj_11", 0),
				(assign, ":value_5", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc27"),
				(overlay_set_display, "$g_presentation_obj_12", 0),
				(assign, ":value_5", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_13"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc28"),
				(overlay_set_display, "$g_presentation_obj_13", 0),
				(assign, ":value_5", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_14"),
				(call_script, "script_cf_hire_npc_specialist", "trp_npc29"),
				(overlay_set_display, "$g_presentation_obj_14", 0),
				(assign, ":value_5", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_20"),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(overlay_set_display, "$g_presentation_obj_1", 0),
				(overlay_set_display, "$g_presentation_obj_2", 0),
				(overlay_set_display, "$g_presentation_obj_3", 0),
			(else_try),
				(eq, ":value_2", 1),
				(overlay_set_display, "$g_presentation_obj_4", 0),
				(overlay_set_display, "$g_presentation_obj_5", 0),
			(else_try),
				(eq, ":value_3", 1),
				(overlay_set_display, "$g_presentation_obj_6", 0),
				(overlay_set_display, "$g_presentation_obj_7", 0),
			(else_try),
				(eq, ":value_4", 1),
				(overlay_set_display, "$g_presentation_obj_8", 0),
				(overlay_set_display, "$g_presentation_obj_9", 0),
				(overlay_set_display, "$g_presentation_obj_10", 0),
			(else_try),
				(eq, ":value_5", 1),
				(overlay_set_display, "$g_presentation_obj_11", 0),
				(overlay_set_display, "$g_presentation_obj_12", 0),
				(overlay_set_display, "$g_presentation_obj_13", 0),
				(overlay_set_display, "$g_presentation_obj_14", 0),
			(try_end)
		])
	]),

	("mod_options", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_6", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_x, 1, 550),
			(position_set_y, 1, 630),
			(position_set_x, 1, 50),
			(create_text_overlay, reg0, "@Travel speed (recommended 75%):", 4096),
			(position_set_y, 1, 715),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use shield bash (player):", 4096),
			(position_set_y, 1, 675),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use shield bash (AI):", 4096),
			(position_set_y, 1, 635),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Spear bracing:", 4096),
			(position_set_y, 1, 595),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use historical coat of arm usage:", 4096),
			(position_set_y, 1, 555),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Apply historical coat of arms to player:", 4096),
			(position_set_y, 1, 515),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Change party icons on water(Warning: resource intensive!):", 4096),
			(position_set_y, 1, 475),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Reinforcement waves:", 4096),
			(position_set_y, 1, 435),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Troop wages:", 4096),
			(position_set_y, 1, 395),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Fief inefficency:", 4096),
			(position_set_y, 1, 355),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Enterprise inefficency:", 4096),
			(position_set_y, 1, 315),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Number of times to reduce flora in custom battlefields:", 4096),
			(position_set_y, 1, 275),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Auxiliary player feature:", 4096),
			(position_set_y, 1, 235),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Banners give bonuses:", 4096),
			(position_set_y, 1, 195),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use banner-man:", 4096),
			(position_set_y, 1, 155),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use Custom-battlefields:", 4096),
			(position_set_y, 1, 115),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Weapon breaking:", 4096),
			(position_set_y, 1, 75),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(create_check_box_overlay, "$g_presentation_obj_7", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 665),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(overlay_set_val, "$g_presentation_obj_7", "$sp_shield_bash"),
			(create_check_box_overlay, "$g_presentation_obj_8", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 625),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(overlay_set_val, "$g_presentation_obj_8", "$sp_shield_bash_ai"),
			(create_check_box_overlay, "$g_presentation_obj_5", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 585),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(overlay_set_val, "$g_presentation_obj_5", "$setting_use_spearwall"),
			(create_check_box_overlay, "$g_presentation_obj_13", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 545),
			(overlay_set_position, "$g_presentation_obj_13", 1),
			(overlay_set_val, "$g_presentation_obj_13", "$historical_banners"),
			(create_check_box_overlay, "$g_presentation_obj_11", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 505),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(overlay_set_val, "$g_presentation_obj_11", "$randomize_player_shield"),
			(create_check_box_overlay, "$g_presentation_obj_12", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 465),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(overlay_set_val, "$g_presentation_obj_12", "$tom_use_longships"),
			(create_check_box_overlay, "$g_presentation_obj_27", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 225),
			(overlay_set_position, "$g_presentation_obj_27", 1),
			(overlay_set_val, "$g_presentation_obj_27", "$use_player_auxiliary"),
			(create_check_box_overlay, "$g_presentation_obj_28", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 185),
			(overlay_set_position, "$g_presentation_obj_28", 1),
			(overlay_set_val, "$g_presentation_obj_28", "$tom_bonus_banners"),
			(create_check_box_overlay, "$g_presentation_obj_29", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 145),
			(overlay_set_position, "$g_presentation_obj_29", 1),
			(overlay_set_val, "$g_presentation_obj_29", "$tom_use_banners"),
			(create_check_box_overlay, "$g_presentation_obj_30", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 105),
			(overlay_set_position, "$g_presentation_obj_30", 1),
			(overlay_set_val, "$g_presentation_obj_30", "$tom_use_battlefields"),
			(create_check_box_overlay, "$g_presentation_obj_31", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 65),
			(overlay_set_position, "$g_presentation_obj_31", 1),
			(overlay_set_val, "$g_presentation_obj_31", "$tom_weapon_break"),
			(position_set_x, 1, 400),
			(create_number_box_overlay, "$g_presentation_obj_10", 0, 101),
			(position_set_y, 1, 701),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(overlay_set_val, "$g_presentation_obj_10", "$g_travel_speed"),
			(create_number_box_overlay, "$g_presentation_obj_15", 0, 101),
			(position_set_y, 1, 421),
			(overlay_set_position, "$g_presentation_obj_15", 1),
			(overlay_set_val, "$g_presentation_obj_15", "$g_reinforcement_waves"),
			(create_button_overlay, "$g_presentation_obj_18", "@troop wage"),
			(try_begin),
				(eq, "$tom_difficulty_wages", 0),
				(overlay_set_text, "$g_presentation_obj_18", "@Masochistic"),
			(else_try),
				(eq, "$tom_difficulty_wages", 1),
				(overlay_set_text, "$g_presentation_obj_18", "@Normal"),
			(else_try),
				(eq, "$tom_difficulty_wages", 2),
				(overlay_set_text, "$g_presentation_obj_18", "@Childish"),
			(try_end),
			(position_set_y, 1, 381),
			(overlay_set_position, "$g_presentation_obj_18", 1),
			(create_button_overlay, "$g_presentation_obj_25", "@fief"),
			(try_begin),
				(eq, "$tom_difficulty_fief", 0),
				(overlay_set_text, "$g_presentation_obj_25", "@Masochistic"),
			(else_try),
				(eq, "$tom_difficulty_fief", 1),
				(overlay_set_text, "$g_presentation_obj_25", "@Normal"),
			(else_try),
				(eq, "$tom_difficulty_fief", 2),
				(overlay_set_text, "$g_presentation_obj_25", "@Childish"),
			(try_end),
			(position_set_y, 1, 341),
			(overlay_set_position, "$g_presentation_obj_25", 1),
			(create_button_overlay, "$g_presentation_obj_24", "@enterprise"),
			(try_begin),
				(eq, "$tom_difficulty_enterprise", 0),
				(overlay_set_text, "$g_presentation_obj_24", "@Masochistic"),
			(else_try),
				(eq, "$tom_difficulty_enterprise", 1),
				(overlay_set_text, "$g_presentation_obj_24", "@Normal"),
			(else_try),
				(eq, "$tom_difficulty_enterprise", 2),
				(overlay_set_text, "$g_presentation_obj_24", "@Childish"),
			(try_end),
			(position_set_y, 1, 301),
			(overlay_set_position, "$g_presentation_obj_24", 1),
			(create_number_box_overlay, "$g_presentation_obj_32", 1, 11),
			(position_set_y, 1, 261),
			(overlay_set_position, "$g_presentation_obj_32", 1),
			(overlay_set_val, "$g_presentation_obj_32", "$tom_generate_reduction"),
			(position_set_x, 1, 520),
			(create_text_overlay, reg0, "@AI marshal army gathering inefficency:", 4096),
			(position_set_y, 1, 715),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Lance breaking(Warning: can cause crashes!):", 4096),
			(position_set_y, 1, 675),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 850),
			(create_button_overlay, "$g_presentation_obj_33", "@inefficency"),
			(try_begin),
				(eq, "$feudal_inefficency", 0),
				(overlay_set_text, "$g_presentation_obj_33", "@None"),
			(else_try),
				(eq, "$feudal_inefficency", 1),
				(overlay_set_text, "$g_presentation_obj_33", "@Low"),
			(else_try),
				(eq, "$feudal_inefficency", 2),
				(overlay_set_text, "$g_presentation_obj_33", "@Normal"),
			(else_try),
				(eq, "$feudal_inefficency", 3),
				(overlay_set_text, "$g_presentation_obj_33", "@Masochistic"),
			(try_end),
			(position_set_y, 1, 701),
			(overlay_set_position, "$g_presentation_obj_33", 1),
			(position_set_y, 1, 661),
			(create_check_box_overlay, "$g_presentation_obj_34", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_34", 1),
			(overlay_set_val, "$g_presentation_obj_34", "$tom_lance_breaking"),
			(create_game_button_overlay, "$g_presentation_obj_20", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_20", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(assign, "$setting_use_spearwall", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_7"),
				(assign, "$sp_shield_bash", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(assign, "$sp_shield_bash_ai", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(assign, "$g_travel_speed", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_15"),
				(assign, "$g_reinforcement_waves", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(assign, "$randomize_player_shield", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(assign, "$tom_use_longships", ":trigger_param_2"),
				(call_script, "script_set_sea_icons"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_13"),
				(assign, "$historical_banners", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_18"),
				(val_sub, "$tom_difficulty_wages", 1),
				(try_begin),
					(eq, "$tom_difficulty_wages", -1),
					(assign, "$tom_difficulty_wages", 2),
				(try_end),
				(try_begin),
					(eq, "$tom_difficulty_wages", 0),
					(overlay_set_text, "$g_presentation_obj_18", "@Masochistic"),
				(else_try),
					(eq, "$tom_difficulty_wages", 1),
					(overlay_set_text, "$g_presentation_obj_18", "@Normal"),
				(else_try),
					(eq, "$tom_difficulty_wages", 2),
					(overlay_set_text, "$g_presentation_obj_18", "@Childish"),
				(else_try),
					(overlay_set_text, "$g_presentation_obj_18", "@Oy! we have a problem!"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_25"),
				(val_sub, "$tom_difficulty_fief", 1),
				(try_begin),
					(eq, "$tom_difficulty_fief", -1),
					(assign, "$tom_difficulty_fief", 2),
				(try_end),
				(try_begin),
					(eq, "$tom_difficulty_fief", 0),
					(overlay_set_text, "$g_presentation_obj_25", "@Masochistic"),
				(else_try),
					(eq, "$tom_difficulty_fief", 1),
					(overlay_set_text, "$g_presentation_obj_25", "@Normal"),
				(else_try),
					(eq, "$tom_difficulty_fief", 2),
					(overlay_set_text, "$g_presentation_obj_25", "@Childish"),
				(else_try),
					(overlay_set_text, "$g_presentation_obj_25", "@Oy! we have a problem!"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_33"),
				(val_add, "$feudal_inefficency", 1),
				(try_begin),
					(eq, "$feudal_inefficency", 4),
					(assign, "$feudal_inefficency", 0),
				(try_end),
				(try_begin),
					(eq, "$feudal_inefficency", 0),
					(overlay_set_text, "$g_presentation_obj_33", "@None"),
				(else_try),
					(eq, "$feudal_inefficency", 1),
					(overlay_set_text, "$g_presentation_obj_33", "@Low"),
				(else_try),
					(eq, "$feudal_inefficency", 2),
					(overlay_set_text, "$g_presentation_obj_33", "@Normal"),
				(else_try),
					(eq, "$feudal_inefficency", 3),
					(overlay_set_text, "$g_presentation_obj_33", "@Masochistic"),
				(else_try),
					(overlay_set_text, "$g_presentation_obj_33", "@Oy! we have a problem!"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_24"),
				(val_sub, "$tom_difficulty_enterprise", 1),
				(try_begin),
					(eq, "$tom_difficulty_enterprise", -1),
					(assign, "$tom_difficulty_enterprise", 2),
				(try_end),
				(try_begin),
					(eq, "$tom_difficulty_enterprise", 0),
					(overlay_set_text, "$g_presentation_obj_24", "@Masochistic"),
				(else_try),
					(eq, "$tom_difficulty_enterprise", 1),
					(overlay_set_text, "$g_presentation_obj_24", "@Normal"),
				(else_try),
					(eq, "$tom_difficulty_enterprise", 2),
					(overlay_set_text, "$g_presentation_obj_24", "@Childish"),
				(else_try),
					(overlay_set_text, "$g_presentation_obj_24", "@Oy! we have a problem!"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_27"),
				(assign, "$use_player_auxiliary", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_28"),
				(assign, "$tom_bonus_banners", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_29"),
				(assign, "$tom_use_banners", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_30"),
				(assign, "$tom_use_battlefields", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_31"),
				(assign, "$tom_weapon_break", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_32"),
				(assign, "$tom_generate_reduction", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_34"),
				(assign, "$tom_lance_breaking", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_20"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("economy_build", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_set_prsnt_debug"),
			(call_script, "script_economy_get_buildings"),
			(position_set_x, 2, 60),
			(position_set_y, 2, 22),
			(position_set_x, 1, 50),
			(position_set_y, 1, 500),
			(create_text_overlay, reg0, "@NAME(build)     cost", 4096),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 475),
			(create_text_overlay, reg0, "@{s1}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 450),
			(create_text_overlay, reg0, "@{s2}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 425),
			(create_text_overlay, reg0, "@{s3}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 400),
			(create_text_overlay, reg0, "@{s4}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 375),
			(create_text_overlay, reg0, "@{s5}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 350),
			(create_text_overlay, reg0, "@{s6}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 325),
			(create_text_overlay, reg0, "@{s7}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 300),
			(create_text_overlay, reg0, "@{s8}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 275),
			(create_text_overlay, reg0, "@{s9}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 250),
			(create_text_overlay, reg0, "@{s10}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 225),
			(create_text_overlay, reg0, "@{s11}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 200),
			(create_text_overlay, reg0, "@{s12}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 175),
			(create_text_overlay, reg0, "@{s13}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 150),
			(create_text_overlay, reg0, "@{s14}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 125),
			(create_text_overlay, reg0, "@{s15}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_y, 1, 100),
			(create_text_overlay, reg0, "@{s16}", 4),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 325),
			(position_set_y, 1, 22),
			(position_set_y, 1, 472),
			(create_game_button_overlay, "$g_presentation_obj_1", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_size, "$g_presentation_obj_1", 2),
			(position_set_y, 1, 447),
			(create_game_button_overlay, "$g_presentation_obj_2", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(overlay_set_size, "$g_presentation_obj_2", 2),
			(position_set_y, 1, 422),
			(create_game_button_overlay, "$g_presentation_obj_3", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(overlay_set_size, "$g_presentation_obj_3", 2),
			(position_set_y, 1, 397),
			(create_game_button_overlay, "$g_presentation_obj_4", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(overlay_set_size, "$g_presentation_obj_4", 2),
			(position_set_y, 1, 372),
			(create_game_button_overlay, "$g_presentation_obj_5", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(overlay_set_size, "$g_presentation_obj_5", 2),
			(position_set_y, 1, 347),
			(create_game_button_overlay, "$g_presentation_obj_6", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_6", 2),
			(position_set_y, 1, 322),
			(create_game_button_overlay, "$g_presentation_obj_7", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_7", 2),
			(position_set_y, 1, 297),
			(create_game_button_overlay, "$g_presentation_obj_8", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(overlay_set_size, "$g_presentation_obj_8", 2),
			(position_set_y, 1, 272),
			(create_game_button_overlay, "$g_presentation_obj_9", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(overlay_set_size, "$g_presentation_obj_9", 2),
			(position_set_y, 1, 247),
			(create_game_button_overlay, "$g_presentation_obj_10", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(overlay_set_size, "$g_presentation_obj_10", 2),
			(position_set_y, 1, 222),
			(create_game_button_overlay, "$g_presentation_obj_11", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(overlay_set_size, "$g_presentation_obj_11", 2),
			(position_set_y, 1, 197),
			(create_game_button_overlay, "$g_presentation_obj_12", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(overlay_set_size, "$g_presentation_obj_12", 2),
			(position_set_y, 1, 172),
			(create_game_button_overlay, "$g_presentation_obj_13", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_13", 1),
			(overlay_set_size, "$g_presentation_obj_13", 2),
			(position_set_y, 1, 147),
			(create_game_button_overlay, "$g_presentation_obj_14", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_14", 1),
			(overlay_set_size, "$g_presentation_obj_14", 2),
			(position_set_y, 1, 122),
			(create_game_button_overlay, "$g_presentation_obj_15", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_15", 1),
			(overlay_set_size, "$g_presentation_obj_15", 2),
			(position_set_y, 1, 97),
			(create_game_button_overlay, "$g_presentation_obj_16", "str_economy_build"),
			(overlay_set_position, "$g_presentation_obj_16", 1),
			(overlay_set_size, "$g_presentation_obj_16", 2),
			(create_game_button_overlay, "$g_presentation_obj_20", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_20", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_20"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("taragoth_lords_report", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg0, "@CURRENT COMMANDER'S REPORT!", 4),
			(position_set_x, 1, 50),
			(position_set_y, 1, 650),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 40),
			(assign, ":value_2", 580),
			(position_set_x, 1, 50),
			(str_store_troop_name, 19, "$enlisted_lord"),
			(create_text_overlay, reg0, "@Your Commander: {s19}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(call_script, "script_troop_get_player_relation", "$enlisted_lord"),
			(create_text_overlay, reg0, "@Commander Relation: {reg0}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_faction_of_troop, reg1, "$enlisted_lord"),
			(str_store_faction_name, 20, reg1),
			(create_text_overlay, reg0, "@Enlisted Faction: {s20}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(str_store_troop_name, 21, "$player_cur_troop"),
			(create_text_overlay, reg0, "@Current Rank: {s21}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(troop_get_slot, ":player_signup", "trp_player", slot_troop_signup),
			(troop_get_xp, ":xp_player", "trp_player"),
			(val_sub, ":xp_player", ":player_signup"),
			(troop_get_upgrade_troop, ":upgrade_troop_player_cur_troop_0", "$player_cur_troop", 0),
			(str_store_string, 1, "@N/A"),
			(try_begin),
				(gt, ":upgrade_troop_player_cur_troop_0", 1),
				(call_script, "script_game_get_upgrade_xp", "$player_cur_troop"),
				(store_sub, reg0, reg0, ":xp_player"),
				(gt, reg0, 0),
				(str_store_string, 1, "str_reg0"),
			(try_end),
			(create_text_overlay, reg0, "@Experience to next promotion: {s1}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_current_day, ":current_day"),
			(troop_get_slot, ":player_signup_2", "trp_player", slot_troop_signup_2),
			(store_sub, ":value_3", ":current_day", ":player_signup_2"),
			(assign, reg20, ":value_3"),
			(create_text_overlay, reg0, "@Days in service: {reg20}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_character_level, ":character_level_player_cur_troop", "$player_cur_troop"),
			(store_mul, ":value_4", 10, ":character_level_player_cur_troop"),
			(assign, reg23, ":value_4"),
			(create_text_overlay, reg0, "@Current Wage: {reg23} florins.", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(str_store_date, 25, "$$g_next_pay_time"),
			(create_text_overlay, reg0, "@Next Pay/Promotion day: {s25}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_enlisted_party", "$enlisted_party"),
			(assign, reg26, ":party_size_wo_prisoners_enlisted_party"),
			(create_text_overlay, reg0, "@Army size: {reg26}", 4),
			(position_set_x, 1, 800),
			(position_set_y, 1, 60),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "@Commander's Army", 4),
			(position_set_x, 1, 500),
			(position_set_y, 1, 430),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_pic_camp"),
			(position_set_x, 1, 450),
			(position_set_y, 1, 380),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 560),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 300),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(assign, ":value", 40),
			(party_get_num_companion_stacks, ":num_companion_stacks_l_enlisted_party", "$enlisted_party"),
			(store_mul, ":value_2", ":num_companion_stacks_l_enlisted_party", ":value"),
			(try_for_range, ":localvariable", 1, ":num_companion_stacks_l_enlisted_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_enlisted_party_localvariable", "$enlisted_party", ":localvariable"),
				(party_stack_get_size, ":party_stack_size_enlisted_party_localvariable", "$enlisted_party", ":localvariable"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_enlisted_party_localvariable", "$enlisted_party", ":localvariable"),
				(val_sub, ":party_stack_size_enlisted_party_localvariable", ":party_stack_num_wounded_enlisted_party_localvariable"),
				(str_store_troop_name, 1, ":party_stack_troop_id_enlisted_party_localvariable"),
				(create_text_overlay, reg0, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(assign, reg0, ":party_stack_size_enlisted_party_localvariable"),
				(create_text_overlay, reg0, "str_reg0"),
				(position_set_x, 1, 325),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_2", ":value"),
			(try_end),
			(set_container_overlay, -1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_19", "@Done", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_19", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("order_display", prsntf_read_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_for_range, ":number", 0, 9),
				(store_add, ":value", ":number", 78),
				(party_set_slot, "p_main_party_backup", ":value", -1),
			(try_end),
			(assign, ":value_2", 564),
			(try_begin),
				(eq, "$gk_order", 0),
				(str_store_string, 1, "@F8 - Formation types"),
				(assign, ":value_3", 1),
				(assign, ":value_2", 474),
			(else_try),
				(eq, "$gk_order", 26),
				(str_store_string, 1, "@F5 - Shieldwall"),
				(str_store_string, 2, "@F6 - Wedge"),
				(str_store_string, 3, "@F7 - Square"),
				(str_store_string, 4, "@F8 - Ranks"),
				(str_store_string, 5, "@F9 - No Formation"),
				(assign, ":value_3", 5),
			(try_end),
			(party_set_slot, "p_main_party_backup", slot_town_rebellion_readiness, "$gk_order"),
			(try_for_range, ":number", 0, ":value_3"),
				(try_begin),
					(eq, ":number", 0),
					(str_store_string_reg, 0, 1),
				(else_try),
					(eq, ":number", 1),
					(str_store_string_reg, 0, 2),
				(else_try),
					(eq, ":number", 2),
					(str_store_string_reg, 0, 3),
				(else_try),
					(eq, ":number", 3),
					(str_store_string_reg, 0, 4),
				(else_try),
					(eq, ":number", 4),
					(str_store_string_reg, 0, 5),
				(try_end),
				(create_text_overlay, ":value_4", 0),
				(overlay_set_color, ":value_4", 16777215),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, ":value_4", 1),
				(position_set_x, 1, 1),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_4", 1),
				(store_add, ":value", ":number", 78),
				(party_set_slot, "p_main_party_backup", ":value", ":value_4"),
				(val_sub, ":value_2", 30),
			(try_end),
			(store_mul, ":value_5", 30, ":value_3"),
			(val_add, ":value_2", ":value_5"),
			(val_sub, ":value_2", 4),
			(try_for_range, ":number", 0, ":value_3"),
				(create_mesh_overlay, ":value_4", "mesh_order_frame"),
				(position_set_x, 1, 700),
				(position_set_y, 1, 700),
				(overlay_set_size, ":value_4", 1),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_4", 1),
				(val_sub, ":value_2", 30),
			(try_end),
			(try_begin),
				(neq, "$gk_order", 0),
				(create_mesh_overlay, ":value_4", "mesh_white_plane"),
				(overlay_set_color, ":value_4", 0),
				(overlay_set_alpha, ":value_4", 16),
				(position_set_x, 1, 14000),
				(position_set_y, 1, 4500),
				(overlay_set_size, ":value_4", 1),
				(position_set_x, 1, 0),
				(position_set_y, 1, 498),
				(overlay_set_position, ":value_4", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(gt, ":trigger_param_1", 50),
			(try_begin),
				(this_or_next|game_key_clicked, 23),
				(this_or_next|game_key_clicked, 24),
				(this_or_next|game_key_clicked, 25),
				(this_or_next|game_key_clicked, 22),
				(this_or_next|game_key_clicked, 30),
				(this_or_next|game_key_clicked, 31),
				(this_or_next|game_key_clicked, 32),
				(this_or_next|game_key_clicked, 33),
				(this_or_next|game_key_clicked, 34),
				(this_or_next|game_key_clicked, 35),
				(this_or_next|game_key_clicked, 36),
				(this_or_next|game_key_clicked, 37),
				(this_or_next|game_key_clicked, 38),
				(this_or_next|game_key_clicked, 29),
				(this_or_next|game_key_clicked, 39),
				(game_key_clicked, 40),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(assign, ":value", -1),
				(try_begin),
					(game_key_clicked, 26),
					(assign, ":value", 4),
				(else_try),
					(game_key_clicked, 27),
					(assign, ":value", 5),
				(else_try),
					(game_key_clicked, 28),
					(assign, ":value", 6),
				(else_try),
					(key_clicked, 65),
					(assign, ":value", 7),
				(else_try),
					(key_clicked, 66),
					(assign, ":value", 8),
				(try_end),
				(neq, ":value", -1),
				(try_begin),
					(party_slot_eq, "p_main_party_backup", slot_town_rebellion_readiness, 0),
					(presentation_set_duration, 0),
				(else_try),
					(party_slot_eq, "p_main_party_backup", slot_town_rebellion_readiness, 26),
					(assign, ":var_3", 4),
					(assign, ":var_4", 8),
					(store_sub, ":value_2", ":var_4", ":var_3"),
					(val_add, ":value_2", 1),
					(store_sub, ":value_3", ":value", ":var_3"),
					(is_between, ":value_3", 0, ":value_2"),
					(try_for_range, ":localvariable", 0, ":value_2"),
						(store_add, ":value_4", ":localvariable", 78),
						(party_get_slot, ":main_party_backup_value_4", "p_main_party_backup", ":value_4"),
						(try_begin),
							(neq, ":localvariable", ":value_3"),
							(overlay_animate_to_alpha, ":main_party_backup_value_4", 400, 0),
							(val_add, ":main_party_backup_value_4", ":value_2"),
							(overlay_animate_to_alpha, ":main_party_backup_value_4", 400, 0),
						(else_try),
							(overlay_animate_to_alpha, ":main_party_backup_value_4", 1100, 0),
							(val_add, ":main_party_backup_value_4", ":value_2"),
							(overlay_animate_to_alpha, ":main_party_backup_value_4", 1100, 0),
						(try_end),
					(try_end),
					(presentation_set_duration, 200),
				(try_end),
			(try_end)
		])
	]),

	("character_creation1", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_20"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("doghotel_configure", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, "$g_doghotel_prsnt_configure_close", 0),
			(set_container_overlay, -1),
			(create_mesh_overlay, "$g_presentation_obj_doghotel_42", "mesh_mp_score_b"),
			(overlay_set_alpha, "$g_presentation_obj_doghotel_42", 255),
			(overlay_set_color, "$g_presentation_obj_doghotel_42", 16777215),
			(position_set_x, 1, 788),
			(position_set_y, 1, 1064),
			(overlay_set_size, "$g_presentation_obj_doghotel_42", 1),
			(position_set_x, 1, 20),
			(position_set_y, 1, 80),
			(overlay_set_position, "$g_presentation_obj_doghotel_42", 1),
			(str_clear, 0),
			(create_text_overlay, reg0, 0, 131072),
			(position_set_x, 1, 0),
			(position_set_y, 1, -200),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 880),
			(position_set_y, 1, 888),
			(overlay_set_size, reg0, 1),
			(overlay_set_area_size, reg0, 1),
			(set_container_overlay, reg0),
			(create_text_overlay, "$g_presentation_obj_doghotel_1", "str_doghotel_config_shortcut_key", 65544),
			(position_set_x, 1, 635),
			(position_set_y, 1, 660),
			(overlay_set_position, "$g_presentation_obj_doghotel_1", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_1", 11133370),
			(create_button_overlay, "$g_presentation_obj_doghotel_41", "str_doghotel_defaults", 65544),
			(position_set_x, 1, 620),
			(position_set_y, 1, 140),
			(overlay_set_position, "$g_presentation_obj_doghotel_41", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_41", 11133370),
			(create_button_overlay, "$g_presentation_obj_doghotel_40", "str_doghotel_done", 65544),
			(position_set_x, 1, 620),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_doghotel_40", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_40", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_35", "str_doghotel_enable_brainy_bots", 65540),
			(position_set_x, 1, 56),
			(position_set_y, 1, 660),
			(overlay_set_position, "$g_presentation_obj_doghotel_35", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_35", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_36", "str_doghotel_enable_only_for_heroes", 65540),
			(position_set_x, 1, 56),
			(position_set_y, 1, 620),
			(overlay_set_position, "$g_presentation_obj_doghotel_36", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_36", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_37", "str_doghotel_enable_movement_actions", 65540),
			(position_set_x, 1, 56),
			(position_set_y, 1, 580),
			(overlay_set_position, "$g_presentation_obj_doghotel_37", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_37", 11133370),
			(try_begin),
				(neg|game_in_multiplayer_mode),
				(create_text_overlay, "$g_presentation_obj_doghotel_39", "str_doghotel_combat_ai", 65540),
				(position_set_x, 1, 30),
				(position_set_y, 1, 540),
				(overlay_set_position, "$g_presentation_obj_doghotel_39", 1),
				(overlay_set_color, "$g_presentation_obj_doghotel_39", 11133370),
			(try_end),
			(create_text_overlay, "$g_presentation_obj_doghotel_12", "str_doghotel_block_chance_range", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_doghotel_12", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_12", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_13", "str_doghotel_hold_chance_range", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 460),
			(overlay_set_position, "$g_presentation_obj_doghotel_13", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_13", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_14", "str_doghotel_feint_chance_range", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 420),
			(overlay_set_position, "$g_presentation_obj_doghotel_14", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_14", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_15", "str_doghotel_kick_chance_range", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 380),
			(overlay_set_position, "$g_presentation_obj_doghotel_15", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_15", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_16", "str_doghotel_weapon_prof_range", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 340),
			(overlay_set_position, "$g_presentation_obj_doghotel_16", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_16", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_17", "str_doghotel_hold_time_range", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_doghotel_17", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_17", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_7", "str_doghotel_max_consecutive_feints", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 260),
			(overlay_set_position, "$g_presentation_obj_doghotel_7", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_7", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_8", "str_doghotel_renown_bonus", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 220),
			(overlay_set_position, "$g_presentation_obj_doghotel_8", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_8", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_9", "str_doghotel_renown_min", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 180),
			(overlay_set_position, "$g_presentation_obj_doghotel_9", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_9", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_10", "str_doghotel_batch_size", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 140),
			(overlay_set_position, "$g_presentation_obj_doghotel_10", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_10", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_11", "str_doghotel_nearby_enemy_radius", 65540),
			(position_set_x, 1, 30),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_doghotel_11", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_11", 11133370),
			(create_check_box_overlay, "$g_presentation_obj_doghotel_32", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 42),
			(position_set_y, 1, 667),
			(overlay_set_position, "$g_presentation_obj_doghotel_32", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_32", 11133370),
			(try_begin),
				(eq, "$g_doghotel_enable_brainy_bots", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_32", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_32", "$g_doghotel_enable_brainy_bots"),
			(try_end),
			(try_begin),
				(eq, "$g_doghotel_enable_brainy_bots", 1),
				(overlay_set_val, "$g_presentation_obj_doghotel_32", 1),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_32", 0),
			(try_end),
			(create_check_box_overlay, "$g_presentation_obj_doghotel_33", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 42),
			(position_set_y, 1, 627),
			(overlay_set_position, "$g_presentation_obj_doghotel_33", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_33", 11133370),
			(try_begin),
				(eq, "$g_doghotel_enable_only_for_heroes", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_33", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_33", "$g_doghotel_enable_only_for_heroes"),
			(try_end),
			(try_begin),
				(eq, "$g_doghotel_enable_only_for_heroes", 1),
				(overlay_set_val, "$g_presentation_obj_doghotel_33", 1),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_33", 0),
			(try_end),
			(create_check_box_overlay, "$g_presentation_obj_doghotel_34", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 42),
			(position_set_y, 1, 587),
			(overlay_set_position, "$g_presentation_obj_doghotel_34", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_34", 11133370),
			(try_begin),
				(eq, "$g_doghotel_movement_actions_enabled", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_34", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_34", "$g_doghotel_movement_actions_enabled"),
			(try_end),
			(try_begin),
				(eq, "$g_doghotel_movement_actions_enabled", 1),
				(overlay_set_val, "$g_presentation_obj_doghotel_34", 1),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_34", 0),
			(try_end),
			(try_begin),
				(neg|game_in_multiplayer_mode),
				(options_get_combat_ai, ":options_combat_ai"),
				(create_combo_button_overlay, "$g_presentation_obj_doghotel_38", 4),
				(position_set_x, 1, 540),
				(position_set_y, 1, 540),
				(overlay_set_position, "$g_presentation_obj_doghotel_38", 1),
				(overlay_set_color, "$g_presentation_obj_doghotel_38", 11133370),
				(try_begin),
					(eq, ":options_combat_ai", -1),
					(overlay_set_val, "$g_presentation_obj_doghotel_38", 0),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_doghotel_38", ":options_combat_ai"),
				(try_end),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, "$g_presentation_obj_doghotel_38", 1),
				(overlay_set_color, "$g_presentation_obj_doghotel_38", 0),
				(overlay_add_item, "$g_presentation_obj_doghotel_38", "str_doghotel_combat_ai_good"),
				(overlay_add_item, "$g_presentation_obj_doghotel_38", "str_doghotel_combat_ai_average"),
				(overlay_add_item, "$g_presentation_obj_doghotel_38", "str_doghotel_combat_ai_poor"),
				(overlay_set_val, "$g_presentation_obj_doghotel_38", ":options_combat_ai"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_18", 0, 101, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_doghotel_18", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_18", 11133370),
			(try_begin),
				(eq, "$g_doghotel_min_block_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_18", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_18", "$g_doghotel_min_block_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_19", 0, 101, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 460),
			(overlay_set_position, "$g_presentation_obj_doghotel_19", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_19", 11133370),
			(try_begin),
				(eq, "$g_doghotel_min_hold_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_19", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_19", "$g_doghotel_min_hold_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_20", 0, 101, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 420),
			(overlay_set_position, "$g_presentation_obj_doghotel_20", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_20", 11133370),
			(try_begin),
				(eq, "$g_doghotel_min_feint_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_20", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_20", "$g_doghotel_min_feint_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_21", 0, 101, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 380),
			(overlay_set_position, "$g_presentation_obj_doghotel_21", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_21", 11133370),
			(try_begin),
				(eq, "$g_doghotel_min_kick_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_21", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_21", "$g_doghotel_min_kick_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_22", 0, 1001, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 340),
			(overlay_set_position, "$g_presentation_obj_doghotel_22", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_22", 11133370),
			(try_begin),
				(eq, "$g_doghotel_min_weapon_prof", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_22", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_22", "$g_doghotel_min_weapon_prof"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_23", 0, 10001, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_doghotel_23", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_23", 11133370),
			(try_begin),
				(eq, "$g_doghotel_min_hold_msec", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_23", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_23", "$g_doghotel_min_hold_msec"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_2", 0, 11, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 260),
			(overlay_set_position, "$g_presentation_obj_doghotel_2", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_2", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_consecutive_feints", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_2", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_2", "$g_doghotel_max_consecutive_feints"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_3", 0, 101, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 220),
			(overlay_set_position, "$g_presentation_obj_doghotel_3", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_3", 11133370),
			(try_begin),
				(eq, "$g_doghotel_renown_block_bonus", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_3", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_3", "$g_doghotel_renown_block_bonus"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_4", 0, 10001, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 180),
			(overlay_set_position, "$g_presentation_obj_doghotel_4", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_4", 11133370),
			(try_begin),
				(eq, "$g_doghotel_renown_min", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_4", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_4", "$g_doghotel_renown_min"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_5", 1, 10001, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 140),
			(overlay_set_position, "$g_presentation_obj_doghotel_5", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_5", 11133370),
			(try_begin),
				(eq, "$g_doghotel_batch_size", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_5", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_5", "$g_doghotel_batch_size"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_6", 1, 10001, 4),
			(position_set_x, 1, 420),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_doghotel_6", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_6", 11133370),
			(try_begin),
				(eq, "$g_doghotel_nearby_enemy_radius", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_6", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_6", "$g_doghotel_nearby_enemy_radius"),
			(try_end),
			(try_begin),
				(game_in_multiplayer_mode),
				(create_text_overlay, "$g_presentation_obj_doghotel_30", "str_doghotel_anti_autoblock", 65540),
				(position_set_x, 1, 56),
				(position_set_y, 1, 540),
				(overlay_set_position, "$g_presentation_obj_doghotel_30", 1),
				(overlay_set_color, "$g_presentation_obj_doghotel_30", 11133370),
			(try_end),
			(try_begin),
				(game_in_multiplayer_mode),
				(create_check_box_overlay, "$g_presentation_obj_doghotel_31", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 42),
				(position_set_y, 1, 547),
				(overlay_set_position, "$g_presentation_obj_doghotel_31", 1),
				(overlay_set_color, "$g_presentation_obj_doghotel_31", 11133370),
				(try_begin),
					(eq, "$g_doghotel_anti_autoblock", -1),
					(overlay_set_val, "$g_presentation_obj_doghotel_31", 0),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_doghotel_31", "$g_doghotel_anti_autoblock"),
				(try_end),
				(try_begin),
					(eq, "$g_doghotel_anti_autoblock", 1),
					(overlay_set_val, "$g_presentation_obj_doghotel_31", 1),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_doghotel_31", 0),
				(try_end),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_24", 0, 101, 4),
			(position_set_x, 1, 555),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_doghotel_24", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_24", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_block_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_24", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_24", "$g_doghotel_max_block_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_25", 0, 101, 4),
			(position_set_x, 1, 555),
			(position_set_y, 1, 460),
			(overlay_set_position, "$g_presentation_obj_doghotel_25", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_25", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_hold_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_25", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_25", "$g_doghotel_max_hold_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_26", 0, 101, 4),
			(position_set_x, 1, 555),
			(position_set_y, 1, 420),
			(overlay_set_position, "$g_presentation_obj_doghotel_26", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_26", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_feint_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_26", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_26", "$g_doghotel_max_feint_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_27", 0, 101, 4),
			(position_set_x, 1, 555),
			(position_set_y, 1, 380),
			(overlay_set_position, "$g_presentation_obj_doghotel_27", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_27", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_kick_chance", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_27", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_27", "$g_doghotel_max_kick_chance"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_28", 0, 1001, 4),
			(position_set_x, 1, 555),
			(position_set_y, 1, 340),
			(overlay_set_position, "$g_presentation_obj_doghotel_28", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_28", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_weapon_prof", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_28", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_28", "$g_doghotel_max_weapon_prof"),
			(try_end),
			(create_number_box_overlay, "$g_presentation_obj_doghotel_29", 0, 10001, 4),
			(position_set_x, 1, 555),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_doghotel_29", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_29", 11133370),
			(try_begin),
				(eq, "$g_doghotel_max_hold_msec", -1),
				(overlay_set_val, "$g_presentation_obj_doghotel_29", 0),
			(else_try),
				(overlay_set_val, "$g_presentation_obj_doghotel_29", "$g_doghotel_max_hold_msec"),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(assign, ":trigger_param_2", -1),
			(try_end),
			(try_begin),
				(eq, "$g_presentation_obj_doghotel_32", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_enable_brainy_bots", ":trigger_param_2"),
					(assign, "$g_doghotel_enable_brainy_bots", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 0, ":trigger_param_2", 4096),
				(try_end),
				(call_script, "script_doghotel_reset_bots"),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_33", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_enable_only_for_heroes", ":trigger_param_2"),
					(assign, "$g_doghotel_enable_only_for_heroes", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 35, ":trigger_param_2", 4096),
				(try_end),
				(call_script, "script_doghotel_reset_bots"),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_34", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_movement_actions_enabled", ":trigger_param_2"),
					(assign, "$g_doghotel_movement_actions_enabled", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 1, ":trigger_param_2", 4096),
				(try_end),
				(call_script, "script_doghotel_reset_bots"),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_38", ":trigger_param_1"),
				(neg|game_in_multiplayer_mode),
				(try_begin),
					(eq, ":trigger_param_2", -1),
					(assign, ":trigger_param_2", 0),
				(try_end),
				(options_set_combat_ai, ":trigger_param_2"),
				(options_get_combat_ai, ":options_combat_ai"),
				(try_begin),
					(neq, ":options_combat_ai", ":trigger_param_2"),
					(assign, ":options_combat_ai", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, -1, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_18", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_min_block_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_min_block_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 6, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_19", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_min_hold_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_min_hold_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 8, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_20", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_min_feint_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_min_feint_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 10, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_21", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_min_kick_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_min_kick_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 38, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_22", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_min_weapon_prof", ":trigger_param_2"),
					(assign, "$g_doghotel_min_weapon_prof", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 14, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_23", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_min_hold_msec", ":trigger_param_2"),
					(assign, "$g_doghotel_min_hold_msec", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 16, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_2", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_consecutive_feints", ":trigger_param_2"),
					(assign, "$g_doghotel_max_consecutive_feints", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 18, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_3", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_renown_block_bonus", ":trigger_param_2"),
					(assign, "$g_doghotel_renown_block_bonus", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 27, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_4", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_renown_min", ":trigger_param_2"),
					(assign, "$g_doghotel_renown_min", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 31, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_5", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_batch_size", ":trigger_param_2"),
					(assign, "$g_doghotel_batch_size", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 2, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_6", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_nearby_enemy_radius", ":trigger_param_2"),
					(assign, "$g_doghotel_nearby_enemy_radius", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 3, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_24", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_block_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_max_block_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 7, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_25", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_hold_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_max_hold_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 9, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_26", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_feint_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_max_feint_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 11, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_27", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_kick_chance", ":trigger_param_2"),
					(assign, "$g_doghotel_max_kick_chance", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 39, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_28", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_weapon_prof", ":trigger_param_2"),
					(assign, "$g_doghotel_max_weapon_prof", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 15, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_29", ":trigger_param_1"),
				(try_begin),
					(neq, "$g_doghotel_max_hold_msec", ":trigger_param_2"),
					(assign, "$g_doghotel_max_hold_msec", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 17, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_31", ":trigger_param_1"),
				(game_in_multiplayer_mode),
				(try_begin),
					(neq, "$g_doghotel_anti_autoblock", ":trigger_param_2"),
					(assign, "$g_doghotel_anti_autoblock", ":trigger_param_2"),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 34, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_41", ":trigger_param_1"),
				(call_script, "script_doghotel_initialize_bot_globals", 1),
				(overlay_set_val, "$g_presentation_obj_doghotel_32", "$g_doghotel_enable_brainy_bots"),
				(overlay_set_val, "$g_presentation_obj_doghotel_33", "$g_doghotel_enable_only_for_heroes"),
				(overlay_set_val, "$g_presentation_obj_doghotel_34", "$g_doghotel_movement_actions_enabled"),
				(try_begin),
					(neg|game_in_multiplayer_mode),
					(options_get_combat_ai, ":options_combat_ai"),
					(ge, "$g_presentation_obj_doghotel_38", 0),
					(overlay_set_val, "$g_presentation_obj_doghotel_38", ":options_combat_ai"),
					(overlay_set_val, "$g_presentation_obj_doghotel_38", ":options_combat_ai"),
				(try_end),
				(overlay_set_val, "$g_presentation_obj_doghotel_18", "$g_doghotel_min_block_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_19", "$g_doghotel_min_hold_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_20", "$g_doghotel_min_feint_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_21", "$g_doghotel_min_kick_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_22", "$g_doghotel_min_weapon_prof"),
				(overlay_set_val, "$g_presentation_obj_doghotel_23", "$g_doghotel_min_hold_msec"),
				(overlay_set_val, "$g_presentation_obj_doghotel_2", "$g_doghotel_max_consecutive_feints"),
				(overlay_set_val, "$g_presentation_obj_doghotel_3", "$g_doghotel_renown_block_bonus"),
				(overlay_set_val, "$g_presentation_obj_doghotel_4", "$g_doghotel_renown_min"),
				(overlay_set_val, "$g_presentation_obj_doghotel_5", "$g_doghotel_batch_size"),
				(overlay_set_val, "$g_presentation_obj_doghotel_6", "$g_doghotel_nearby_enemy_radius"),
				(overlay_set_val, "$g_presentation_obj_doghotel_24", "$g_doghotel_max_block_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_25", "$g_doghotel_max_hold_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_26", "$g_doghotel_max_feint_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_27", "$g_doghotel_max_kick_chance"),
				(overlay_set_val, "$g_presentation_obj_doghotel_28", "$g_doghotel_max_weapon_prof"),
				(overlay_set_val, "$g_presentation_obj_doghotel_29", "$g_doghotel_max_hold_msec"),
				(try_begin),
					(game_in_multiplayer_mode),
					(overlay_set_val, "$g_presentation_obj_doghotel_31", "$g_doghotel_anti_autoblock"),
				(try_end),
				(try_begin),
					(game_in_multiplayer_mode),
					(multiplayer_send_3_int_to_server, 120, 33, ":trigger_param_2", 4096),
				(try_end),
			(else_try),
				(eq, "$g_presentation_obj_doghotel_40", ":trigger_param_1"),
				(assign, "$g_doghotel_prsnt_configure_close", 1),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 87),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 248),
				(key_clicked, 252),
				(gt, ":trigger_param_1", 200),
				(eq, "$g_doghotel_prsnt_configure_close", 0),
				(assign, "$g_doghotel_prsnt_configure_close", 1),
			(try_end)
		])
	]),

	("game_escape", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, "$g_presentation_obj_doghotel_44", "str_doghotel_escape_menu_line_2", 65544),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 15),
			(overlay_set_position, "$g_presentation_obj_doghotel_44", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_44", 11133370),
			(create_text_overlay, "$g_presentation_obj_doghotel_43", "str_doghotel_escape_menu_line_1", 65544),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 45),
			(overlay_set_position, "$g_presentation_obj_doghotel_43", 1),
			(overlay_set_color, "$g_presentation_obj_doghotel_43", 11133370)
		])
	]),

]